(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./bundles/kanban.js":function(e,t,n){"use strict";n.r(t);var a=n("../node_modules/@babel/runtime/helpers/typeof.js"),r=n.n(a);window.sf=window.sf||{},window.sf.kanban=function(e,t,n,a,i,o,l,s){var d,c,p,h,u,g,m,y="content-ready",f="data-ready",v=function(){function e(e){this.parent=e,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof a.DataManager?e:new a.DataManager(e),this.query=t instanceof a.Query?t:new a.Query},e.prototype.generateQuery=function(){return this.query.clone()},e.prototype.getData=function(e){return this.dataManager.executeQuery(e)},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.generateQuery()).then((function(t){return e.dataManagerSuccess(t)})).catch((function(t){return e.dataManagerFailure(t)}))},e.prototype.dataManagerSuccess=function(e){var n=this;this.parent.isDestroyed||this.parent.trigger("dataBinding",e,(function(e){var a=t.extend([],e.result,null,!0);n.parent.kanbanData=a,n.parent.notify(f,{processedData:a}),n.parent.trigger("dataBound",null,(function(){return n.parent.hideSpinner()}))}))},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))},e}(),w=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},C=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return w(n,e),b([t.Property()],n.prototype,"keyField",void 0),b([t.Property()],n.prototype,"textField",void 0),b([t.Property(!1)],n.prototype,"showEmptyRow",void 0),b([t.Property(!0)],n.prototype,"showItemCount",void 0),b([t.Property(!1)],n.prototype,"allowDragAndDrop",void 0),b([t.Property()],n.prototype,"template",void 0),b([t.Property("Ascending")],n.prototype,"sortBy",void 0),n}(t.ChildProperty),S=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},E=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return S(n,e),k([t.Property(!0)],n.prototype,"showHeader",void 0),k([t.Property()],n.prototype,"headerField",void 0),k([t.Property()],n.prototype,"contentField",void 0),k([t.Property()],n.prototype,"template",void 0),k([t.Property()],n.prototype,"priority",void 0),k([t.Property("Single")],n.prototype,"selectionType",void 0),n}(t.ChildProperty),A=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},D=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return A(n,e),O([t.Property()],n.prototype,"template",void 0),O([t.Property([])],n.prototype,"fields",void 0),n}(t.ChildProperty),M=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),x=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},R=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return M(n,e),x([t.Property()],n.prototype,"keyField",void 0),x([t.Property()],n.prototype,"headerText",void 0),x([t.Property()],n.prototype,"template",void 0),x([t.Property(!1)],n.prototype,"allowToggle",void 0),x([t.Property(!0)],n.prototype,"isExpanded",void 0),x([t.Property()],n.prototype,"minCount",void 0),x([t.Property()],n.prototype,"maxCount",void 0),x([t.Property(!0)],n.prototype,"showItemCount",void 0),n}(t.ChildProperty),j=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},F=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return j(n,e),T([t.Property()],n.prototype,"text",void 0),T([t.Property()],n.prototype,"keyFields",void 0),n}(t.ChildProperty),P="e-kanban-content",q=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var n=t.closest(e.target,".e-card,.e-header-icon,.e-content-row.e-swimlane-row");n&&(n.classList.contains("e-card")?this.cardClick(e):n.classList.contains("e-header-icon")?this.columnExpandCollapse(e):n.classList.contains("e-content-row")&&n.classList.contains("e-swimlane-row")&&this.rowExpandCollapse(e))},e.prototype.doubleClickHandler=function(e){t.closest(e.target,".e-card")&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e,n){var a=this,r=t.closest(n||e.target,".e-card"),i=this.parent.getCardDetails(r);this.parent.activeCardData={data:i,element:r};var o={data:i,element:r,cancel:!1,event:e};this.parent.trigger("cardClick",o,(function(n){if(!n.cancel){if(r.classList.contains("e-selection")&&"click"===e.type)t.removeClass([r],"e-selection"),a.parent.layoutModule.disableAttributeSelection(r);else{var i=e.ctrlKey;a.parent.isAdaptive&&a.parent.touchModule&&(i=a.parent.touchModule.mobilePopup&&a.parent.touchModule.tabHold||i),a.cardSelection(r,i,e.shiftKey)}a.parent.isAdaptive&&a.parent.touchModule&&a.parent.touchModule.updatePopupContent()}}))},e.prototype.cardDoubleClick=function(e){var n=this,a=t.closest(e.target,".e-card"),r=this.parent.getCardDetails(a);this.parent.activeCardData={data:r,element:a};var i={data:r,element:a,cancel:!1,event:e};this.parent.trigger("cardDoubleClick",i,(function(e){e.cancel||n.parent.isBlazorRender()||n.parent.dialogModule.openDialog("Edit",i.data)}))},e.prototype.rowExpandCollapse=function(e){var n=this,a=e instanceof HTMLElement?e:e.target,r={cancel:!1,target:a,requestType:"rowExpandCollapse"};this.parent.trigger("actionBegin",r,(function(e){if(!e.cancel){var r=t.closest(a,".e-swimlane-row"),i=r.getAttribute("data-key"),o=n.parent.element.querySelector(".e-content-row:nth-child("+(r.rowIndex+2)+")"),l=r.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse"),s=!!r.classList.contains("e-collapsed");s?(t.removeClass([o,r],"e-collapsed"),t.classList(l,["e-swimlane-row-expand"],["e-swimlane-row-collapse"]),n.parent.swimlaneToggleArray.splice(n.parent.swimlaneToggleArray.indexOf(i),1)):(t.addClass([o,r],"e-collapsed"),t.classList(l,["e-swimlane-row-collapse"],["e-swimlane-row-expand"]),n.parent.swimlaneToggleArray.push(i)),l.setAttribute("aria-label",s?i+" Expand":i+" Collapse"),r.setAttribute("aria-expanded",s.toString()),o.setAttribute("aria-expanded",s.toString()),n.parent.notify(y,{}),n.parent.trigger("actionComplete",{target:a,requestType:"rowExpandCollapse"})}}))},e.prototype.columnExpandCollapse=function(e){var n=this,a=e instanceof HTMLElement?e:e.target,r={cancel:!1,target:a,requestType:"columnExpandCollapse"};this.parent.trigger("actionBegin",r,(function(e){if(!e.cancel){var r=t.closest(a,".e-header-cells"),i=r.cellIndex;n.columnToggle(r);var o=n.parent.element.querySelectorAll(".e-header-cells.e-collapsed").length;if(o===n.parent.columns.length-n.hideColumnKeys.length){var l=".e-header-cells:not(.e-stacked-header-cell):nth-child("+(i+1===o?1:i+2)+")",s=n.parent.element.querySelector(l);t.addClass([s],"e-collapsed"),n.columnToggle(s)}n.parent.notify(y,{}),n.parent.trigger("actionComplete",{target:a,requestType:"columnExpandCollapse"})}}))},e.prototype.columnToggle=function(e){var n=this,a=e.cellIndex,r=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),i=".e-kanban-table col:nth-child("+(a+1)+")",o=e.querySelector(".e-column-expand,.e-column-collapse"),l=[].slice.call(this.parent.element.querySelectorAll(i));if(e.classList.contains("e-collapsed")){t.removeClass(l,"e-collapsed"),this.parent.isAdaptive&&l.forEach((function(e){return e.style.width=t.formatUnit(n.parent.layoutModule.getWidth())})),t.classList(o,["e-column-expand"],["e-column-collapse"]);for(var s=0,d=r;s<d.length;s++){var c=(g=d[s]).querySelector(".e-content-cells:nth-child("+(a+1)+")");t.removeClass([c,e],"e-collapsed"),t.remove(c.querySelector(".e-collapse-header-text")),e.setAttribute("aria-expanded","true"),c.setAttribute("aria-expanded","true")}this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[a].setProperties({isExpanded:!0},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")}else{t.addClass(l,"e-collapsed"),this.parent.isAdaptive&&l.forEach((function(e){return e.style.width=t.formatUnit(50)})),t.classList(o,["e-column-collapse"],["e-column-expand"]);for(var p=e.getAttribute("data-key"),h=0,u=r;h<u.length;h++){var g=u[h],m=(c=g.querySelector('.e-content-cells[data-key="'+p+'"]')).cellIndex;c.appendChild(t.createElement("div",{className:"e-collapse-header-text",innerHTML:this.parent.columns[m].headerText})),t.addClass([c,e],"e-collapsed"),e.setAttribute("aria-expanded","false"),c.setAttribute("aria-expanded","false")}this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[a].setProperties({isExpanded:!1},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",p+" Collapse")}},e.prototype.cardSelection=function(e,n,a){var r=this;if(e){var i=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var o=t.closest(e,".e-content-row");if((t.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(n||a)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===i.length||n&&"Single"!==this.parent.cardSettings.selectionType||(t.removeClass(i,"e-selection"),this.parent.layoutModule.disableAttributeSelection(i),i.forEach((function(e){r.selectionArray.splice(r.selectionArray.indexOf(e.getAttribute("data-id")),1),r.selectedCardsElement.splice(r.selectedCardsElement.indexOf(e),1),r.selectedCardsData.splice(r.selectedCardsData.indexOf(r.parent.getCardDetails(e),1))}))),i.length>0&&a&&"Multiple"===this.parent.cardSettings.selectionType){var l=[],s=void 0,d=void 0,c=void 0,p=[].slice.call(o.querySelectorAll(".e-card"));p.forEach((function(e){return l.push(e.getAttribute("data-id"))}));var h=e.getAttribute("data-id"),u=this.lastCard.getAttribute("data-id"),g=d=l.indexOf(h),m=s=l.indexOf(u),y=g>m?"next":"prev";for("prev"===y&&(s=g,d=m),c=s;c<=d;c++){var f=p[c];t.addClass([f],"e-selection"),f.setAttribute("aria-selected","true"),this.selectionArray.push(f.getAttribute("data-id")),this.selectedCardsElement.push(f),this.selectedCardsData.push(this.parent.getCardDetails(f)),this.lastCardSelection=f,"prev"===y&&(this.lastCardSelection=p[s])}}else if(t.addClass([e],"e-selection"),e.setAttribute("aria-selected","true"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=t.closest(e,".e-content-row"),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains("e-swimlane-row-collapse")&&this.rowExpandCollapse(v)}}}},e.prototype.addColumn=function(e,t){this.parent.columns.splice(t,0,e),this.parent.notify(f,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll(".e-header-cells").item(e);t&&t.classList.contains("e-toggle-header")&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?this.parent.destroy():this.parent.notify(f,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e);-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(f,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e),this.parent.notify(f,{processedData:this.parent.kanbanData})},e}(),L=function(){function e(e){this.parent=e,this.keyField=this.parent.cardSettings.headerField}return e.prototype.getQuery=function(){return this.parent.dataModule.generateQuery()},e.prototype.getTable=function(){return this.parent.query?this.parent.query.clone().fromTable:null},e.prototype.refreshData=function(e){var t=this,n={requestType:e.requestType,cancel:!1,addedRecords:e.addedRecords,changedRecords:e.changedRecords,deletedRecords:e.deletedRecords};this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger("actionComplete",n,(function(e){e.cancel||t.parent.dataModule.refreshDataManager()})):e.promise.then((function(e){t.parent.isDestroyed||t.parent.trigger("actionComplete",n,(function(e){e.cancel||t.parent.dataModule.refreshDataManager()}))})).catch((function(e){t.parent.isDestroyed||t.parent.trigger("actionFailure",{error:e})}))},e.prototype.addCard=function(e){var t=this,n={cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]};this.parent.trigger("actionBegin",n,(function(n){if(!n.cancel){var a=null,r=[];t.parent.cardSettings.priority&&(e instanceof Array?r=e:r.push(e),r=t.priorityOrder(r,n));var i={addedRecords:e instanceof Array?e:[e],changedRecords:t.parent.cardSettings.priority?r:[],deletedRecords:[]};if(e instanceof Array||r.length>0?t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("AddCards",{Records:e},t.keyField):a=t.parent.dataModule.dataManager.saveChanges(i,t.keyField,t.getTable(),t.getQuery()):t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("AddCard",{Record:e}):a=t.parent.dataModule.dataManager.insert(e,t.getTable(),t.getQuery()),!t.parent.isBlazorRender()){var o={requestType:"cardCreated",cancel:!1,promise:a,addedRecords:i.addedRecords,changedRecords:i.changedRecords,deletedRecords:i.deletedRecords};t.refreshData(o)}}}))},e.prototype.updateCard=function(e){var t=this,n={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};this.parent.trigger("actionBegin",n,(function(n){if(!n.cancel){var a=null;if(t.parent.cardSettings.priority){var r=[];e instanceof Array?r=e:r.push(e),e=t.priorityOrder(r,n)}var i={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};if(e instanceof Array?t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("UpdateCards",{Records:e},t.keyField):a=t.parent.dataModule.dataManager.saveChanges(i,t.keyField,t.getTable(),t.getQuery()):t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("UpdateCard",t.keyField,{Record:e}):a=t.parent.dataModule.dataManager.update(t.keyField,e,t.getTable(),t.getQuery()),!t.parent.isBlazorRender()){var o={requestType:"cardChanged",cancel:!1,promise:a,addedRecords:i.addedRecords,changedRecords:i.changedRecords,deletedRecords:i.deletedRecords};t.refreshData(o)}}}))},e.prototype.deleteCard=function(e){var t=this,n={addedRecords:[],changedRecords:[],deletedRecords:[]};n.deletedRecords="string"==typeof e||"number"==typeof e?this.parent.kanbanData.filter((function(n){return n[t.keyField]===e})):e instanceof Array?e:[e];var a={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n.deletedRecords};this.parent.trigger("actionBegin",a,(function(a){if(!a.cancel){var r=null;if(n.deletedRecords.length>1?t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("DeleteCards",{Records:e},t.keyField):r=t.parent.dataModule.dataManager.saveChanges(n,t.keyField,t.getTable(),t.getQuery()):t.parent.isBlazorRender()?t.parent.interopAdaptor.invokeMethodAsync("DeleteCard",t.keyField,{Record:e}):r=t.parent.dataModule.dataManager.remove(t.keyField,e,t.getTable(),t.getQuery()),!t.parent.isBlazorRender()){var i={requestType:"cardRemoved",cancel:!1,promise:r,addedRecords:n.addedRecords,changedRecords:n.changedRecords,deletedRecords:n.deletedRecords};t.refreshData(i)}}}))},e.prototype.priorityOrder=function(e,t){for(var n,a=this,r=e.map((function(e){return e[a.parent.cardSettings.headerField]})),i=e.map((function(e){return e[a.parent.keyField]})),o=[],l=this,s=0,d=i.filter((function(e,t){return i.indexOf(e)===t})).sort();s<d.length;s++)!function(i){var s=e.filter((function(e){return e[a.parent.keyField]===i}));n=l.parent.getColumnData(i);for(var d=1,c=void 0,p=0,h=s;p<h.length;p++){var u=h[p],g=void 0;if(u[l.parent.cardSettings.priority]?g=u[l.parent.cardSettings.priority]:(1===d&&(c=n.slice(-1)[0][l.parent.cardSettings.priority]),g=u[l.parent.cardSettings.priority]=(d>1?c:n.slice(-1)[0][l.parent.cardSettings.priority])+d,d++),l.parent.swimlaneSettings.keyField){var m=l.parent.getSwimlaneData(u[l.parent.swimlaneSettings.keyField]);n=l.parent.getColumnData(i,m)}for(var y=[],f=0;f<n.length;f++)if(n[f][l.parent.cardSettings.priority]===g){y.push(f+1);break}"cardChange"===t.requestType&&o.push(u);for(var v=o.map((function(e){return e[a.parent.cardSettings.headerField]})),w=y[0];w<=n.length;w++){var b=n[w-1];if(-1===r.indexOf(b[l.parent.cardSettings.headerField])&&g>=b[l.parent.cardSettings.priority]){b[l.parent.cardSettings.priority]=++g;var C=v.indexOf(b[l.parent.cardSettings.headerField]);-1===C?o.push(b):o[C]=b}}}}(d[s]);return o},e}(),H=function(){function e(e){this.parent=e,this.dragObj={element:null,cloneElement:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isDragging=!1}return e.prototype.wireDragEvents=function(e){new t.Draggable(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:this.parent.element.querySelector("."+P),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=t.closest(e.sender.target,".e-card"),t.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=t.formatUnit(this.dragObj.element.offsetWidth);var n=t.createElement("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=n.children.item(0),t.addClass([this.dragObj.cloneElement],"e-cloned-card"),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=t.createElement("div",{className:"e-target-multi-clone"}),this.dragObj.targetClone=t.createElement("div",{className:"e-target-dropped-clone",styles:"width:"+t.formatUnit(this.dragObj.element.offsetWidth)+";height:"+t.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.cloneElement},e.prototype.dragStart=function(e){var n=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains("e-selection")){var a=t.closest(this.dragObj.element,".e-content-row");this.dragObj.selectedCards=[].slice.call(a.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)")),this.dragObj.selectedCards.forEach((function(e){n.dragObj.cardDetails.push(n.parent.getCardDetails(e))}))}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];var r={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",r,(function(a){if(a.cancel)return n.removeElement(n.dragObj.cloneElement),void(n.dragObj={element:null,cloneElement:null,targetClone:null,draggedClone:null,targetCloneMulti:null});if(n.parent.isBlazorRender()&&e.bindEvents(e.dragElement),n.dragObj.element.classList.contains("e-selection")){if(n.dragObj.selectedCards.forEach((function(e){n.draggedClone(e)})),n.dragObj.selectedCards.length>1){n.dragObj.cloneElement.innerHTML="";var r=t.createElement("div",{className:"e-multi-card-text",innerHTML:n.dragObj.selectedCards.length+" Cards"});n.dragObj.cloneElement.appendChild(r),t.classList(n.dragObj.cloneElement,["e-multi-card-clone"],["e-selection"]),n.parent.layoutModule.disableAttributeSelection(n.dragObj.cloneElement),n.dragObj.cloneElement.style.width="90px"}}else n.draggedClone(n.dragObj.element);n.parent.notify(y,{})}))},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=t.createElement("div",{className:"e-target-dragged-clone",styles:"width:"+t.formatUnit(e.offsetWidth-1)+";height:"+t.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),t.addClass([e],"e-kanban-dragged-card")},e.prototype.drag=function(e){var n=this;if(e.target){var a=t.closest(e.target,".e-card")||e.target,r=t.closest(a,".e-content-row:not(.e-swimlane-row) .e-content-cells");if(this.calculateArgs(e),r){var i=this.getColumnKey(r),o=i.split(",");this.multiCloneRemove();var l=i===this.getColumnKey(t.closest(this.dragObj.draggedClone,".e-content-cells"));if(1===o.length||l)if(a.classList.contains("e-card")){var s=t.isNullOrUndefined(a.previousElementSibling)&&(this.dragObj.pageY-a.offsetTop)/2<25?"beforebegin":"afterend";a.insertAdjacentElement(s,this.dragObj.targetClone)}else a.classList.contains("e-content-cells")&&!t.closest(a,".e-swimlane-row")?a.querySelector(".e-card-wrapper").appendChild(this.dragObj.targetClone):a.classList.contains("e-card-wrapper")&&!t.closest(a,".e-swimlane-row")&&0===r.querySelectorAll(".e-card").length&&a.appendChild(this.dragObj.targetClone);else if(o.length>1){var d=r.offsetHeight,c=r.querySelector(".e-limits");c&&(d-=c.offsetHeight),this.dragObj.targetCloneMulti.style.height=t.formatUnit(d),t.addClass([r.querySelector(".e-card-wrapper")],"e-multi-card-wrapper"),r.querySelector(".e-card-wrapper").style.height="auto",r.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var p=0,h=o;p<h.length;p++){var u=h[p],g=t.createElement("div",{className:"e-column-key",attrs:{"data-key":u.trim()}}),m=t.createElement("div",{className:"e-text",innerHTML:u.trim()});r.appendChild(this.dragObj.targetCloneMulti).appendChild(g).appendChild(m),g.style.lineHeight=g.style.height=t.formatUnit(d/o.length),m.style.top=t.formatUnit(d/2-m.offsetHeight/2)}}this.parent.notify(y,{})}this.addDropping();var f=!1;r&&(f=r.classList.contains("e-collapsed")&&r.classList.contains("e-dropping")),f&&(this.toggleVisible(a,void 0),t.addClass([r],"e-toggle-visible"));var v=[].slice.call(this.parent.element.querySelectorAll(".e-toggle-visible"));v.length>0&&!a.classList.contains("e-toggle-visible")&&!t.closest(a,".e-toggle-visible")&&(this.toggleVisible(a,v.slice(-1)[0]),t.removeClass(v,"e-toggle-visible")),this.parent.notify(y,{});var w=t.closest(a,".e-content-cells:not(.e-collapsed)");w&&(this.dragObj.targetClone.style.width=t.formatUnit(w.offsetWidth-2-16));var b=t.closest(a,".e-column-key");if(b){var C=[].slice.call(this.parent.element.querySelectorAll(".e-column-key")).filter((function(e){return n.getColumnKey(e)===n.getColumnKey(b)}));C.length>0&&(t.addClass(C,"e-multi-active"),C[0].previousElementSibling&&t.addClass([C[0].previousElementSibling],"e-multi-bottom-border"))}if(document.body.style.cursor=r?"":"not-allowed",this.parent.swimlaneSettings.keyField&&!this.parent.swimlaneSettings.allowDragAndDrop){var S=t.closest(this.dragObj.element,".e-content-row"),k=t.closest(a,".e-content-row:not(.e-swimlane-row)");S&&k&&S.rowIndex!==k.rowIndex&&(document.body.style.cursor="not-allowed")}"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone),this.multiCloneRemove()),this.updateScrollPosition(e);var E={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("drag",E)}},e.prototype.removeElement=function(e){this.parent.element.getElementsByClassName(e.className).length>0&&t.remove(e)},e.prototype.addDropping=function(){if(this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop)[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells")).forEach((function(e){return t.addClass([e],"e-dropping")}));else{var e=t.closest(this.dragObj.draggedClone,".e-content-row");e&&[].slice.call(e.children).forEach((function(e){return t.addClass([e],"e-dropping")}))}var n=t.closest(this.dragObj.draggedClone,".e-content-cells");n&&t.removeClass([n],"e-dropping")},e.prototype.dragStop=function(e){var n,a=this,r=t.closest(this.dragObj.targetClone,".e-content-cells");this.parent.element.querySelector(".e-target-multi-clone")&&(n=t.closest(e.target,".e-column-key"));var i={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStop",i,(function(e){var i;e.cancel||!r&&!n||(r?i=a.getColumnKey(r):(i=a.getColumnKey(n),r=t.closest(n,".e-content-cells")),a.dragObj.selectedCards instanceof HTMLElement?a.updateDroppedData(a.dragObj.selectedCards,i,r):a.dragObj.selectedCards.forEach((function(e){a.updateDroppedData(e,i,r)})),a.parent.cardSettings.priority&&a.changeOrder(a.dragObj.modifiedData),a.parent.crudModule.updateCard(a.dragObj.modifiedData));a.removeElement(a.dragObj.draggedClone),a.removeElement(a.dragObj.targetClone),a.removeElement(a.dragObj.cloneElement),[].slice.call(a.parent.element.querySelectorAll(".e-target-dragged-clone")).forEach((function(e){return t.remove(e)})),a.parent.isBlazorRender()&&(a.dragObj.element.style.removeProperty("width"),a.multiCloneRemove()),t.removeClass([a.dragObj.element],"e-kanban-dragged-card"),clearInterval(a.dragObj.navigationInterval),a.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(a.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){return t.removeClass([e],"e-dropping")})),a.parent.isAdaptive&&(a.parent.touchModule.tabHold=!1),a.dragObj.cardDetails=a.dragObj.modifiedData=[],a.isDragging=!1}))},e.prototype.updateDroppedData=function(e,n,a){var r=this.parent.getCardDetails(e);if(1===n.split(",").length&&(r[this.parent.keyField]=n),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var i=t.closest(a,".e-content-row").previousElementSibling;if(this.parent.isAdaptive){var o=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;r[this.parent.swimlaneSettings.keyField]=o}else r[this.parent.swimlaneSettings.keyField]=this.getColumnKey(i)}this.dragObj.modifiedData.push(r)},e.prototype.changeOrder=function(e){var t=this,n=!1,a=this.dragObj.targetClone.previousElementSibling;if(!a||a.classList.contains("e-kanban-dragged-card")||a.classList.contains("e-cloned-card")||a.classList.contains("e-target-dragged-clone")){if(!this.dragObj.targetClone.nextElementSibling)return;a=this.dragObj.targetClone.nextElementSibling}else n=!0;var r=this.parent.getCardDetails(a)[this.parent.cardSettings.priority];e.forEach((function(e){n?e[t.parent.cardSettings.priority]=++r:1!==r&&r<=e[t.parent.cardSettings.priority]?e[t.parent.cardSettings.priority]=--r:1===r&&(e[t.parent.cardSettings.priority]=1)}))},e.prototype.toggleVisible=function(e,n){var a=this;[].slice.call(this.parent.element.querySelectorAll(".e-header-cells:not(.e-stacked-header-cell)")).forEach((function(t){a.getColumnKey(t)===a.getColumnKey(n||e)&&a.parent.actionModule.columnToggle(t)}));var r=t.closest(this.dragObj.draggedClone,".e-content-cells");if(r){var i=t.formatUnit(r.offsetWidth-16);this.dragObj.draggedClone.style.width=i,this.dragObj.cloneElement.style.width=i}},e.prototype.multiCloneRemove=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-target-multi-clone"));e.length>0&&([].slice.call(this.parent.element.querySelectorAll(".e-column-key")).forEach((function(e){return t.remove(e)})),e.forEach((function(e){var n=t.closest(e,".e-content-cells");n&&(n.style.borderStyle="",t.removeClass([n.querySelector(".e-card-wrapper")],"e-multi-card-wrapper"))})),this.removeElement(this.dragObj.targetCloneMulti))},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0,this.parent.isAdaptive&&this.parent.tooltipModule&&this.parent.tooltipModule.tooltipObj.close()},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(e){var n=this;t.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){n.autoScrollValidation(e)&&n.autoScroll()}),100))},e.prototype.autoScrollValidation=function(e){var t=this.dragObj.pageY,n=this.dragObj.pageX,a={left:!1,right:!1,top:!1,bottom:!1};return this.dragObj.pageY-window.scrollY<66&&(a.top=!0),t>window.innerHeight-30+window.pageYOffset&&t<window.innerHeight+window.pageYOffset&&(a.bottom=!0),n<30+window.pageXOffset&&n>0+window.pageXOffset&&(a.left=!0),n>window.innerWidth-30+window.pageXOffset&&n<window.innerWidth+window.pageXOffset&&(a.right=!0),this.dragEdges=a,a.bottom||a.top||a.left||a.right},e.prototype.autoScroll=function(){var e;if(this.parent.isAdaptive){if(this.dragEdges.top||this.dragEdges.bottom?e=this.dragObj.targetClone?t.closest(this.dragObj.targetClone,".e-card-wrapper"):t.closest(this.dragObj.draggedClone,".e-card-wrapper"):(this.dragEdges.right||this.dragEdges.left)&&(e=this.parent.element.querySelector("."+P)),e){var n=e.offsetHeight<=e.scrollHeight,a=e.offsetWidth<=e.scrollWidth,r=e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,i=e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&r&&(this.dragEdges.top||this.dragEdges.bottom)&&(e.scrollTop+=this.dragEdges.top?-66:30),a&&i&&(this.dragEdges.left||this.dragEdges.right)&&(this.parent.layoutModule.getWidth()*(this.parent.columns.length-1)>e.scrollLeft||this.dragEdges.left)&&(e.scrollLeft+=this.dragEdges.left?-30:30)}}else this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)},e.prototype.unWireDragEvents=function(e){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()},e}(),B=function(){function e(e){this.parent=e}return e.prototype.openDialog=function(e,t){this.action=e,this.parent.activeCardData.data=t,this.renderDialog(t,e),this.dialogObj.show()},e.prototype.closeDialog=function(){this.dialogObj.hide()},e.prototype.renderDialog=function(e,a){this.element=t.createElement("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var r={buttons:this.getDialogButtons(a),content:this.getDialogContent(e,a),cssClass:"e-kanban-dialog",enableRtl:this.parent.enableRtl,header:this.parent.localeObj.getConstant("Add"===a?"addTitle":"Edit"===a?"editTitle":"deleteTitle"),height:this.parent.isAdaptive?"100%":"auto",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,width:"Delete"===a?400:350,visible:!1,beforeOpen:this.onBeforeDialogOpen.bind(this),beforeClose:this.onBeforeDialogClose.bind(this)};this.dialogObj=new n.Dialog(r,this.element),"Delete"!==a&&this.applyFormValidation()},e.prototype.getDialogContent=function(e,n){if("Delete"===n)return this.parent.localeObj.getConstant("deleteContent");var a=t.createElement("div",{className:"e-kanban-form-wrapper"}),r=t.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-kanban-form",attrs:{onsubmit:"return false;"}});if(this.parent.dialogSettings.template)e&&(this.destroyComponents(),[].slice.call(r.childNodes).forEach((function(e){return t.remove(e)}))),t.append(this.parent.templateParser(this.parent.dialogSettings.template)(e),r);else{var i=t.createElement("div",{className:"e-kanban-dialog-content"});r.appendChild(i);var o=t.createElement("table");i.appendChild(o);for(var l=0,s=this.getDialogFields();l<s.length;l++){var d=s[l],c=t.createElement("tr");o.appendChild(c),c.appendChild(t.createElement("td",{className:"e-label",innerHTML:d.text?d.text:d.key}));var p=t.createElement("td");c.appendChild(p),p.appendChild(this.renderComponents(d))}}return a.appendChild(r),a},e.prototype.getDialogFields=function(){var e=this.parent.dialogSettings.fields;return 0===e.length&&(e=[{text:"ID",key:this.parent.cardSettings.headerField,type:"Input"},{key:this.parent.keyField,type:"DropDown"},{key:"Estimate",type:"Numeric"},{key:"Summary",type:"TextArea"}],this.parent.cardSettings.priority&&e.splice(e.length-1,0,{key:this.parent.cardSettings.priority,type:"Numeric"}),this.parent.swimlaneSettings.keyField&&e.splice(e.length-1,0,{key:"Assignee",type:"DropDown"})),e},e.prototype.getDialogButtons=function(e){var t="Delete"===e?"e-dialog-no":"e-dialog-cancel",n=[{buttonModel:{cssClass:"e-flat "+("Delete"===e?"e-dialog-yes":"Add"===e?"e-dialog-add":"e-dialog-edit"),isPrimary:!0,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"save":"yes")},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-flat "+t,isPrimary:!1,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"cancel":"no")},click:this.dialogButtonClick.bind(this)}];if("Edit"===e){var a={buttonModel:{cssClass:"e-flat e-dialog-delete",isPrimary:!1,content:this.parent.localeObj.getConstant("delete")},click:this.dialogButtonClick.bind(this)};n.splice(0,0,a)}return n},e.prototype.renderComponents=function(e){var n=t.createElement("div",{className:e.key+"_wrapper"}),a=t.createElement("input",{className:"e-field",attrs:{name:e.key}});n.appendChild(a);var r,l=this.parent.activeCardData.data?this.parent.activeCardData.data[e.key]:null;switch(e.type){case"DropDown":var s=void 0;e.key===this.parent.keyField?s={dataSource:[].slice.call(this.parent.columns),fields:{text:"headerText",value:"keyField"},value:l}:e.key===this.parent.swimlaneSettings.keyField&&(s={dataSource:[].slice.call(this.parent.layoutModule.kanbanRows),fields:{text:"textField",value:"keyField"},value:l}),r=new i.DropDownList(s);break;case"Numeric":r=new o.NumericTextBox({value:l});break;case"TextBox":r=new o.TextBox({value:l});break;case"Input":l&&(a.value=l),l&&this.parent.cardSettings.headerField===e.key?o.Input.createInput({element:a,properties:{enabled:!1}}):o.Input.createInput({element:a});break;case"TextArea":t.remove(a);var d=t.createElement("div",{className:"e-float-input"});a=t.createElement("textarea",{className:"e-field",attrs:{name:e.key,rows:"2"},innerHTML:l}),n.appendChild(d).appendChild(a)}return r&&r.appendTo(a),n},e.prototype.onBeforeDialogOpen=function(e){var t={data:this.parent.activeCardData.data,cancel:!1,element:this.element,target:this.parent.activeCardData.element,requestType:this.action};this.parent.trigger("dialogOpen",t,(function(t){return e.cancel=t.cancel}))},e.prototype.onBeforeDialogClose=function(e){for(var n=this,a={},r=0,i=this.getFormElements();r<i.length;r++){var o=i[r],l=o.name||this.getColumnName(o);if(!t.isNullOrUndefined(l)&&""!==l){var s=this.getValueFromElement(o);l===this.parent.cardSettings.headerField&&(s="string"===this.getIDType()?s:parseInt(s,10)),a[l]=s}}var d={data:a,cancel:!1,element:this.element,requestType:this.action};this.parent.trigger("dialogClose",d,(function(t){e.cancel=t.cancel,t.cancel||(n.cardData=d.data,n.destroy())}))},e.prototype.getIDType=function(){return 0!==this.parent.kanbanData.length?r()(this.parent.kanbanData[0][this.parent.cardSettings.headerField]):"string"},e.prototype.applyFormValidation=function(){for(var e=this,t=this.element.querySelector(".e-kanban-form"),n={},a=0,r=this.parent.dialogSettings.fields;a<r.length;a++){var i=r[a];n[i.key]=i.validationRules&&Object.keys(i.validationRules).length>0?i.validationRules:null}this.formObj=new o.FormValidator(t,{rules:n,customPlacement:function(t,n){var a=n.getAttribute("for");e.element.querySelector("#"+a+"_Error")||e.createTooltip(t,n,a,"")},validationComplete:function(t){var n=e.element.querySelector("#"+t.inputName+"_Error");n&&(n.style.display="failure"===t.status?"":"none")}})},e.prototype.createTooltip=function(e,n,a,r){var i,o,l=e.parentElement.getBoundingClientRect();this.element.classList.contains("e-kanban-dialog")?(i=this.element,o=this.element.getBoundingClientRect()):o=(i=this.element.querySelector(".e-kanban-dialog .e-dlg-content")).getBoundingClientRect();var s=t.createElement("div",{className:"e-tooltip-wrap e-popup e-kanban-error",id:a+"_Error",styles:"display:"+r+";top:"+(l.bottom-o.top+i.scrollTop+9)+"px;left:"+(l.left-o.left+i.scrollLeft+l.width/2)+"px;"}),d=t.createElement("div",{className:"e-tip-content"});d.appendChild(n);var c=t.createElement("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(t.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(t.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),s.appendChild(d),s.appendChild(c),i.appendChild(s),s.style.left=parseInt(s.style.left,10)-s.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){this.element&&this.element.querySelectorAll(".e-kanban-error").forEach((function(e){return t.remove(e)})),this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.dialogButtonClick=function(e){var t=e.target.cloneNode(!0),n=this.formObj.element.id;document.getElementById(n)&&this.formObj.validate()&&(t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add"))&&(this.dialogObj.hide(),t.classList.contains("e-dialog-edit")&&this.parent.crudModule.updateCard(this.cardData),t.classList.contains("e-dialog-add")&&this.parent.crudModule.addCard(this.cardData),this.cardData=null),t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add")||(this.dialogObj.hide(),t.classList.contains("e-dialog-yes")?this.parent.crudModule.deleteCard(this.parent.activeCardData.data):t.classList.contains("e-dialog-no")?this.openDialog("Edit",this.parent.activeCardData.data):t.classList.contains("e-dialog-delete")&&this.openDialog("Delete",this.parent.activeCardData.data))},e.prototype.getFormElements=function(){for(var e=[],t=0,n=[].slice.call(this.element.querySelectorAll(".e-field"));t<n.length;t++){var a=n[t];a.classList.contains("e-control")?e.push(a):a.querySelector(".e-control")?e.push(a.querySelector(".e-control")):e.push(a)}return e},e.prototype.getColumnName=function(e){var n=e.getAttribute("data-name")||"";if(""===n){var a=!1,r="";e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?(r=e.classList.contains("e-dropdownlist")?"e-ddl":"e-multiselect",a=!0):e.classList.contains("e-numerictextbox")&&(r="e-numeric");var i=a?"."+r+":not(.e-control)":"."+r,o=t.closest(e,i)||e.querySelector("."+r);if(o){var l=o.querySelector("[name]");l&&(n=l.name)}}return n},e.prototype.getValueFromElement=function(e){var t=e.ej2_instances;return t&&t.length>0?t[0].value||t[0].checked:e.value},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements();e<t.length;e++){var n=t[e].ej2_instances;n&&n.length>0&&n.forEach((function(e){return e.destroy()}))}},e.prototype.destroy=function(){this.destroyToolTip(),this.destroyComponents(),this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null,t.remove(this.element),this.element=null)},e}(),N=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",swimlaneExpandAll:"ctrl+40",swimlaneCollapseAll:"ctrl+38",selectedSwimlaneExpand:"alt+40",selectedSwimlaneCollapse:"alt+38",selectedColumnCollapse:"ctrl+37",selectedColumnExpand:"ctrl+39",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",multiSelectionByLeftArrow:"shift+37",multiSelectionByRightArrow:"shift+39",shiftTab:"shift+tab",enter:"13",tab:"tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new t.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.prevAction=""}return e.prototype.keyActionHandler=function(e){var n=this.parent.element.querySelectorAll(".e-card.e-selection").item(0);if(n||t.closest(document.activeElement,".e-kanban"))switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":case"multiSelectionByLeftArrow":case"multiSelectionByRightArrow":this.processLeftRightArrow(e,n);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"swimlaneExpandAll":case"swimlaneCollapseAll":case"selectedSwimlaneExpand":case"selectedSwimlaneCollapse":this.processSwimlaneExpandCollapse(e.action);break;case"selectedColumnExpand":case"selectedColumnCollapse":this.processColumnExpandcollapse(e.action,n);break;case"enter":this.processEnter(e,n);break;case"tab":case"shiftTab":this.processTab(e.action,n)}},e.prototype.processCardSelection=function(e,n){if(n){t.removeClass([n],"e-selection"),this.parent.layoutModule.disableAttributeSelection(n);var a=this.parent.actionModule.selectionArray;a.splice(a.indexOf(n.getAttribute("data-id")),1)}var r=[].slice.call(this.parent.element.querySelectorAll(".e-card")),i="firstCardSelection"===e?r[0]:r[r.length-1];this.parent.actionModule.cardSelection(i,!1,!1)},e.prototype.processLeftRightArrow=function(e,t){var n=document.activeElement;!t&&n&&(n.classList.contains("e-column-expand")||n.classList.contains("e-column-collapse")?this.parent.actionModule.columnExpandCollapse(n):(n.classList.contains("e-swimlane-row-expand")||n.classList.contains("e-swimlane-row-collapse"))&&this.parent.actionModule.rowExpandCollapse(e)),t&&this.processMoveCards(e.action,this.parent.actionModule.lastCardSelection)},e.prototype.processUpDownArrow=function(e,n){var a,r=!1;if(n){var i='.e-content-cells[data-key="'+t.closest(this.parent.actionModule.lastCardSelection,".e-content-cells").getAttribute("data-key")+'"] .e-card',o=[].slice.call(this.parent.element.querySelectorAll(i)),l=this.parent.actionModule.lastCardSelection.getAttribute("data-id"),s=this.getCardId(o).indexOf(l);r=("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&"Multiple"===this.parent.cardSettings.selectionType,a=o["upArrow"===e||"multiSelectionByUpArrow"===e?s-1:s+1]}else if("downArrow"===e&&document.activeElement)document.activeElement.classList.contains("e-swimlane-row-expand")?a=(d=t.closest(document.activeElement,".e-swimlane-row")).nextElementSibling.querySelector(".e-card"):document.activeElement.classList.contains("e-kanban")&&!this.parent.swimlaneSettings.keyField&&(a=this.parent.element.querySelector(".e-card"));else if("upArrow"===e&&document.activeElement&&document.activeElement.classList.contains("e-swimlane-row-expand")){var d=t.closest(document.activeElement,".e-swimlane-row");a=(o=[].slice.call(d.previousElementSibling.querySelectorAll(".e-card"))).slice(-1)[0]}this.parent.actionModule.cardSelection(a,!1,r),this.parent.element.focus()},e.prototype.processColumnExpandcollapse=function(e,t){var n=t.getAttribute("data-key"),a=this.parent.element.querySelector('.e-header-cells[data-key="'+n+'"]');if(a.classList.contains("e-toggle-header")){if(a.classList.contains("e-collapsed")&&"selectedColumnCollapse"===e||!a.classList.contains("e-collapsed")&&"selectedColumnExpand"===e)return;this.parent.actionModule.columnExpandCollapse(a)}},e.prototype.processSwimlaneExpandCollapse=function(e){if(this.parent.swimlaneSettings.keyField){var n=".e-card.e-selection";"swimlaneExpandAll"!==e&&"swimlaneCollapseAll"!==e||(n=".e-content-row.e-swimlane-row");var a=[].slice.call(this.parent.element.querySelectorAll(n));this.prevAction!==e&&(this.prevAction=e,a.forEach((function(e){e.classList.contains("e-card")&&(e=t.closest(e,".e-content-row").previousElementSibling),e.classList.contains("e-collapsed")?(t.removeClass([e,e.nextElementSibling],"e-collapsed"),t.classList(e.querySelector(".e-icons"),["e-swimlane-row-expand"],["e-swimlane-row-collapse"]),e.querySelector(".e-icons").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")):e.classList.contains("e-collapsed")||(t.addClass([e,e.nextElementSibling],"e-collapsed"),t.classList(e.querySelector(".e-icons"),["e-swimlane-row-collapse"],["e-swimlane-row-expand"]),e.querySelector(".e-icons").setAttribute("aria-label",e.getAttribute("data-key")+" Collapse"))})))}},e.prototype.getCardId=function(e){var t=[];return e.forEach((function(e){return t.push(e.getAttribute("data-id"))})),t},e.prototype.processNextRow=function(e){for(var t=0;t<e.childElementCount;t++){var n=e.children[t],a=[].slice.call(n.querySelectorAll(".e-card"));if(a.length>0){this.parent.actionModule.cardSelection(a[0],!1,!1);break}}},e.prototype.processPreviousRow=function(e){for(var t=e.childElementCount-1;t>=0;t--){var n=e.children[t],a=[].slice.call(n.querySelectorAll(".e-card"));if(a.length>0){this.parent.actionModule.cardSelection(a.slice(-1)[0],!1,!1);break}}},e.prototype.processCards=function(e,t,n,a){if(e){var r=("multiSelectionByRightArrow"===a||"multiSelectionByLeftArrow"===a)&&"Multiple"===this.parent.cardSettings.selectionType,i=t[n]||t.slice(-1)[0];this.parent.actionModule.cardSelection(i,!1,r)}},e.prototype.processEnter=function(e,t){var n=e.target;n.classList.contains("e-header-icon")&&this.parent.actionModule.columnExpandCollapse(e),(n.classList.contains("e-swimlane-row-expand")||n.classList.contains("e-swimlane-row-collapse"))&&this.parent.actionModule.rowExpandCollapse(e),t&&this.parent.actionModule.cardClick(e,t)},e.prototype.processTab=function(e,n){if(n){var a=t.closest(n,".e-content-row"),r="tab"===e?a.previousElementSibling:a.nextElementSibling;r&&r.querySelector(".e-swimlane-row-collapse,.e-swimlane-row-expand").focus(),t.removeClass([n],"e-selection"),this.parent.layoutModule.disableAttributeSelection(n)}},e.prototype.processMoveCards=function(e,n){var a,r,i=t.closest(n,".e-content-cells"),o=[].slice.call(i.querySelectorAll(".e-card")),l=t.closest(i,".e-content-row"),s=this.getCardId(o).indexOf(n.getAttribute("data-id"));if("rightArrow"===e||"multiSelectionByRightArrow"===e)if(i.cellIndex===l.childElementCount-1&&this.parent.swimlaneSettings.keyField&&"multiSelectionByRightArrow"!==e)s<this.getCardId(o).length-1?this.parent.actionModule.cardSelection(this.parent.actionModule.lastCardSelection.nextElementSibling,!1,!1):l.rowIndex!==this.parent.element.querySelectorAll(".e-content-row").length-1&&(u=this.parent.element.querySelector(".e-content-row:nth-child("+(l.rowIndex+3)+")"),this.processNextRow(u));else{for(var d=!1,c=i.cellIndex+1;c<l.children.length;c++)if(a=l.children[c],(r=[].slice.call(a.querySelectorAll(".e-card"))).length>0){d=!0;break}this.processCards(d,r,s,e)}else if(0===i.cellIndex&&this.parent.swimlaneSettings.keyField&&"multiSelectionByLeftArrow"!==e){if(s>0)this.parent.actionModule.cardSelection(this.parent.actionModule.lastCardSelection.previousElementSibling,!1,!1);else if(l.rowIndex>1){var p=".e-content-row:nth-child("+(l.rowIndex-1)+"):not(.e-collapsed)",h=this.parent.element.querySelector(p);h&&this.processPreviousRow(h)}}else{for(d=!1,c=i.cellIndex-1;c>=0;c--){if(a=l.children[c],(r=[].slice.call(a.querySelectorAll(".e-card"))).length>0){d=!0;break}if(0===c&&this.parent.swimlaneSettings.keyField){var u=this.parent.element.querySelector(".e-content-row:nth-child("+(l.rowIndex-1)+")");this.processPreviousRow(u)}}this.processCards(d,r,s,e)}},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),I=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new n.Tooltip({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:".e-tooltip-text",beforeRender:this.onBeforeRender.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){if(this.parent.dragAndDropModule.isDragging)e.cancel=!0;else{var n;if(this.parent.tooltipTemplate){n=t.createElement("div");var a=t.closest(e.target,".e-card"),r=this.parent.getCardDetails(a),i=this.parent.templateParser(this.parent.tooltipTemplate)(r);t.append(i,n)}else n='<div class="e-card-header-caption">'+e.target.innerText+"</div>";this.tooltipObj.setProperties({content:n},!0)}},e.prototype.destroy=function(){this.tooltipObj.destroy(),t.addClass([this.parent.element],"e-control"),this.tooltipObj=null},e}(),_=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+P),this.touchObj=new t.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var n=t.closest(e.originalEvent.target,".e-card");n&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(n,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=t.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-close"></button></div><div class="e-popup-content"></div>'});document.body.appendChild(e),t.addClass([e],"e-device"),this.mobilePopup=new n.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var a=this.mobilePopup.element.querySelector(".e-close"),r=new l.Button({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:"e-icons e-close-icon"});r.appendTo(a),r.isStringTemplate=!0,t.EventHandler.add(a,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector(".e-popup-content").textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),t.remove(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),U=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=t.createElement("div",{className:"e-swimlane-header"});e.innerHTML='<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-toolbar-level-title"><div class="e-toolbar-swimlane-name"></div></div></div>',this.parent.element.appendChild(e),t.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector(".e-swimlane-header").offsetHeight,a=window.innerHeight-e;this.popupOverlay=t.createElement("div",{className:"e-swimlane-overlay",styles:"height: "+a+"px;"});var r=t.createElement("div",{className:"e-swimlane-content",styles:"top:"+e+"px;"}),i=t.createElement("div",{className:"e-swimlane-resource e-popup-close",styles:"height: "+a+"px;"});r.appendChild(i),r.appendChild(this.popupOverlay),this.parent.element.appendChild(r);var o=t.createElement("div",{className:"e-swimlane-tree"});i.appendChild(o),this.treeViewObj=new s.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:this.parent.layoutModule.kanbanRows,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this)}),this.treeViewObj.appendTo(o),this.treePopup=new n.Popup(i,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+P)})},e.prototype.menuClick=function(e){if(this.parent.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open"))this.treePopup.hide(),t.removeClass([this.popupOverlay],"e-enable");else{var n=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));t.removeClass(n,"e-active"),t.addClass([n[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),t.addClass([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(f,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e}(),z=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),K=function(e){function n(t){var n=e.call(this,t)||this;return n.kanbanRows=[],n.parent=t,n.columnKeys=[],n.swimlaneIndex=0,n.swimlaneData={},n.scrollLeft=0,n.parent.on(f,n.initRender,n),n.parent.on(y,n.scrollUiUpdate,n),n}return z(n,e),n.prototype.initRender=function(){if(!this.parent.isBlazorRender()){if(0===this.parent.columns.length)return;this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards()}if(this.parent.isAdaptive){var e=this.parent.element.querySelector("."+P);e&&(this.scrollLeft=e.scrollLeft)}if(!this.parent.isBlazorRender()){this.destroy(),this.parent.on(f,this.initRender,this),this.parent.on(y,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&this.renderSwimlaneHeader();var n=t.createElement("div",{className:"e-kanban-header"});this.parent.element.appendChild(n),this.renderHeader(n),this.renderContent(),this.renderCards(),this.renderValidation()}this.parent.notify(y,{}),this.wireEvents()},n.prototype.renderHeader=function(e){var n=t.createElement("div",{className:this.parent.swimlaneSettings.keyField?"e-swimlane":""});e.appendChild(n);var a=t.createElement("table",{className:"e-kanban-table e-header-table",attrs:{role:"presentation"}});n.appendChild(a),this.renderColGroup(a);var r=t.createElement("thead");a.appendChild(r),this.parent.stackedHeaders.length>0&&r.appendChild(this.createStackedRow(this.parent.stackedHeaders));var i=t.createElement("tr",{className:"e-header-row"});r.appendChild(i);for(var o=this,l=0,s=this.parent.columns;l<s.length;l++)!function(e){if(o.isColumnVisible(e)){var n=o.parent.actionModule.columnToggleArray.indexOf(e.keyField),a=t.createElement("th",{className:-1===n?"e-header-cells":"e-header-cells e-collapsed",attrs:{"data-role":"kanban-column","data-key":e.keyField}}),r=[];e.allowToggle&&(r.push("e-toggle-header"),e.isExpanded||r.push("e-collapsed")),t.addClass([a],r);var l=t.createElement("div",{className:"e-header-wrap"});a.appendChild(l);var s=o.columnData[e.keyField].length,d=t.createElement("div",{className:"e-header-title"});if(l.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:s};t.addClass([a],"e-template");var p=o.parent.templateParser(e.template)(c);t.append(p,d)}else{var h=t.createElement("div",{className:"e-header-text",innerHTML:e.headerText});if(d.appendChild(h),e.showItemCount){var u=t.createElement("div",{className:"e-item-count",innerHTML:"- "+s.toString()+" "+o.parent.localeObj.getConstant("items")});d.appendChild(u)}}if(e.allowToggle){var g=!(!e.isExpanded||-1!==n),m=g?"e-column-expand":"e-column-collapse",y=t.createElement("div",{className:"e-header-icon e-icons "+m,attrs:{tabindex:"0"}});y.setAttribute("aria-label",g?e.keyField+" Expand":e.keyField+" Collapse"),a.setAttribute("aria-expanded",g.toString()),l.appendChild(y)}var f={data:[{keyField:e.keyField,textField:e.headerText,count:s}],element:i,cancel:!1,requestType:"headerRow"};o.parent.trigger("queryCellInfo",f,(function(e){e.cancel||i.appendChild(a)}))}}(s[l])},n.prototype.renderContent=function(){var e=t.createElement("div",{className:P});this.parent.element.appendChild(e);var n=t.createElement("div",{className:this.parent.swimlaneSettings.keyField?"e-swimlane":""});e.appendChild(n);var a=t.createElement("table",{className:"e-kanban-table e-content-table",attrs:{role:"presentation"}});n.appendChild(a),this.renderColGroup(a);var r=t.createElement("tbody");a.appendChild(r);var i,o=!1;this.swimlaneRow=this.kanbanRows,this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector(".e-toolbar-swimlane-name").innerHTML=this.swimlaneRow[0].textField);for(var l=this,s=0,d=this.swimlaneRow;s<d.length;s++)!function(e){if(l.parent.swimlaneSettings.keyField&&0!==l.parent.swimlaneToggleArray.length){var n=l.parent.swimlaneToggleArray.indexOf(e.keyField);o=-1!==n}i=o?"e-content-row e-collapsed":"e-content-row";var a=t.createElement("tr",{className:i,attrs:{"aria-expanded":"true"}});l.parent.swimlaneSettings.keyField&&!l.parent.isAdaptive&&l.renderSwimlaneRow(r,e,o);for(var s=0,d=l.parent.columns;s<d.length;s++){var c=d[s];if(l.isColumnVisible(c)){var p=-1===(n=l.parent.actionModule.columnToggleArray.indexOf(c.keyField))?"e-content-cells":"e-content-cells e-collapsed",h=t.createElement("td",{className:p,attrs:{"data-role":"kanban-column","data-key":c.keyField,"aria-expanded":"true"}});(c.allowToggle&&!c.isExpanded||-1!==n)&&(t.addClass([h],"e-collapsed"),h.appendChild(t.createElement("div",{className:"e-collapse-header-text",innerHTML:c.headerText})),h.setAttribute("aria-expanded","false")),a.appendChild(h);var u={data:[{keyField:e.keyField,textField:e.textField,count:e.count}],element:a,cancel:!1,requestType:"contentRow"};l.parent.trigger("queryCellInfo",u,(function(e){e.cancel||r.appendChild(a)}))}}}(d[s])},n.prototype.renderSwimlaneRow=function(e,n,a){var r=a?" e-collapsed":"",i=t.createElement("tr",{className:"e-content-row e-swimlane-row"+r,attrs:{"data-key":n.keyField,"aria-expanded":(!a).toString()}}),o=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,l=t.createElement("td",{className:"e-content-cells",attrs:{"data-role":"kanban-column",colspan:o.toString()}}),s=t.createElement("div",{className:"e-swimlane-header"});l.appendChild(s);var d=a?"e-swimlane-row-collapse":"e-swimlane-row-expand",c=t.createElement("div",{className:"e-icons "+d,attrs:{tabindex:"0","aria-label":a?n.keyField+" Collapse":n.keyField+" Expand"}});s.appendChild(c);var p=t.createElement("div",{className:"e-header-wrap"});s.appendChild(p);var h=this.swimlaneData[n.keyField].length;if(this.parent.swimlaneSettings.template){var u=t.extend({},n,{count:h},!0);t.addClass([l],"e-template");var g=this.parent.templateParser(this.parent.swimlaneSettings.template)(u);t.append(g,p)}else p.appendChild(t.createElement("div",{className:"e-swimlane-text",innerHTML:n.textField,attrs:{"data-role":n.textField}}));this.parent.swimlaneSettings.showItemCount&&s.appendChild(t.createElement("div",{className:"e-item-count",innerHTML:"- "+h.toString()+" "+this.parent.localeObj.getConstant("items")})),i.appendChild(l);var m={data:[{keyField:n.keyField,textField:n.textField,count:n.count}],element:i,cancel:!1,requestType:"swimlaneRow"};this.parent.trigger("queryCellInfo",m,(function(t){t.cancel||e.appendChild(i)}))},n.prototype.renderCards=function(){var e=this,n=this.swimlaneRow,a=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),r=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),i=[];a.forEach((function(a,o){for(var l=0,s=0,d=e.parent.columns;s<d.length;s++)!function(r){if(e.isColumnVisible(r)){var i=e.parent.swimlaneSettings.keyField?e.getColumnData(r.keyField,e.swimlaneData[n[o].keyField]):e.columnData[r.keyField];l+=i.length;var s=a.querySelector('[data-key="'+r.keyField+'"]'),d=t.createElement("div",{className:"e-card-wrapper"});s.appendChild(d);for(var c=0,p=i;c<p.length;c++)!function(n){var a=n[e.parent.cardSettings.headerField],r=e.parent.actionModule.selectionArray.indexOf(a),i=-1===r?"":" e-selection",o=t.createElement("div",{className:"e-card"+i,attrs:{"data-id":n[e.parent.cardSettings.headerField],"data-key":n[e.parent.keyField],"aria-selected":"false"}});if(-1!==r&&o.setAttribute("aria-selected","true"),e.parent.cardSettings.template){t.addClass([o],"e-template");var l=e.parent.templateParser(e.parent.cardSettings.template)(n);t.append(l,o)}else{var s=e.parent.enableTooltip?" e-tooltip-text":"";if(e.parent.cardSettings.showHeader){var c=t.createElement("div",{className:"e-card-header"}),p=t.createElement("div",{className:"e-card-header-caption"}),h=t.createElement("div",{className:"e-card-header-title"+s,innerHTML:n[e.parent.cardSettings.headerField]||""});c.appendChild(p),p.appendChild(h),o.appendChild(c)}var u=t.createElement("div",{className:"e-card-content"+s,innerHTML:n[e.parent.cardSettings.contentField]||""});o.appendChild(u)}var g={data:n,element:o,cancel:!1};e.parent.trigger("cardRendered",g,(function(e){e.cancel||d.appendChild(o)}))}(p[c])}}(d[s]);0===l&&(i.push(a),r.length>0&&i.push(r[o]))})),this.parent.swimlaneSettings.showEmptyRow||i.forEach((function(e){return t.remove(e)}))},n.prototype.renderColGroup=function(e){var n=this,a=t.createElement("colgroup");this.parent.columns.forEach((function(e){if(n.isColumnVisible(e)){var r=n.parent.actionModule.columnToggleArray.indexOf(e.keyField),i=e.allowToggle&&!e.isExpanded,o=-1===r?i?"e-collapsed":"":"e-collapsed",l=t.createElement("col",{className:o,attrs:{"data-key":e.keyField},styles:n.parent.isAdaptive?"width: "+(i?t.formatUnit(50):t.formatUnit(n.getWidth())):""});a.appendChild(l)}})),e.appendChild(a)},n.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map((function(n){(e.parent.swimlaneSettings.showEmptyRow||-1!==e.columnKeys.indexOf(n[e.parent.keyField]))&&t.push({keyField:n[e.parent.swimlaneSettings.keyField],textField:n[e.parent.swimlaneSettings.textField]||n[e.parent.swimlaneSettings.keyField]})})),(t=t.filter((function(e,t,n){return t===n.map((function(e){return e.keyField})).indexOf(e.keyField)}))).sort((function(e,t){var n=e.textField.toLowerCase(),a=t.textField.toLowerCase();return n>a?1:a>n?-1:0})),"Descending"===this.parent.swimlaneSettings.sortBy&&t.reverse(),t.forEach((function(t){t.count=e.parent.kanbanData.filter((function(n){return e.columnKeys.indexOf(n[e.parent.keyField])>-1&&n[e.parent.swimlaneSettings.keyField]===t.keyField})).length}))):t.push({keyField:"",textField:""}),t},n.prototype.createStackedRow=function(e){var n=t.createElement("tr",{className:"e-header-row e-stacked-header-row"}),a=[];this.parent.columns.forEach((function(t){for(var n="",r=0,i=e;r<i.length;r++){var o=i[r];-1!==o.keyFields.indexOf(t.keyField)&&(n=o.text)}a.push(n)}));for(var r=0;r<a.length;r++){for(var i=1,o=r+1;o<a.length&&""!==a[r]&&""!==a[o]&&a[r]===a[o];o++)i++;var l=t.createElement("div",{className:"e-header-text",innerHTML:a[r]}),s=t.createElement("th",{className:"e-header-cells e-stacked-header-cell",attrs:{colspan:i.toString()}});n.appendChild(s).appendChild(l),r+=i-1}return n},n.prototype.scrollUiUpdate=function(){var e=this,n=this.parent.element.querySelector(".e-kanban-header"),a=this.parent.element.querySelector("."+P),r=this.parent.element.offsetHeight-n.offsetHeight;if(this.parent.isAdaptive){r=window.innerHeight-(n.offsetHeight+25);var i=this.parent.element.querySelector(".e-swimlane-header");i&&(r-=i.offsetHeight),[].slice.call(this.parent.element.querySelectorAll(".e-content-cells")).forEach((function(n){var a=n.querySelector(".e-card-wrapper");a.classList.contains("e-multi-card-wrapper")||(a.style.height=t.formatUnit(r),t.EventHandler.add(n,"touchmove",e.onAdaptiveScroll,e))}))}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(a.style.height=t.formatUnit(r)),[].slice.call(n.children).forEach((function(n){var r=0;a.offsetWidth-a.clientWidth>0&&(r=17,a.offsetHeight-a.clientHeight>0&&(n.style.width=t.formatUnit(a.clientWidth))),e.parent.enableRtl?n.style.paddingLeft=t.formatUnit(r):n.style.paddingRight=t.formatUnit(r)}))},n.prototype.onContentScroll=function(e){this.parent.element.querySelector(".e-kanban-header div").scrollLeft=e.target.scrollLeft},n.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},n.prototype.isColumnVisible=function(e){var t=this,n=!1;return e.keyField.split(",").forEach((function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)})),n},n.prototype.renderLimits=function(e,n){var a=t.createElement("div",{className:"e-limits"});e.minCount&&a.appendChild(t.createElement("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&a.appendChild(t.createElement("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),a.childElementCount>0&&(n.querySelector(".e-card-wrapper")?n.insertBefore(a,n.firstElementChild):n.appendChild(a))},n.prototype.renderValidation=function(){var e=this,n=function(e,t){var n;return e.maxCount&&t>e.maxCount?n="e-max-color":e.minCount&&t<e.minCount&&(n="e-min-color"),n};this.parent.columns.forEach((function(a){if(a.minCount||a.maxCount){var r=e.columnData[a.keyField],i='[data-key="'+a.keyField+'"]',o=e.parent.element.querySelector(".e-header-cells"+i),l=[].slice.call(e.parent.element.querySelectorAll(".e-content-cells"+i));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach((function(i,o){e.renderLimits(a,l[o]);var s=r.filter((function(t){return t[e.parent.swimlaneSettings.keyField]===i.keyField})),d=n(a,s.length);d&&t.addClass([l[o]],d)}));else{e.renderLimits(a,o);var s=n(a,r.length);s&&t.addClass(l.concat(o),s)}}}))},n.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);for(var a=[],r=0,i=e.split(",");r<i.length;r++)!function(e){var r=t.filter((function(t){return t[n.parent.keyField]===e.trim()}));a=a.concat(r)}(i[r]);return this.parent.cardSettings.priority&&(a=a.sort((function(e,t){return parseInt(e[n.parent.cardSettings.priority],10)-parseInt(t[n.parent.cardSettings.priority],10)}))),a},n.prototype.documentClick=function(e){if(!t.closest(e.target,".e-kanban")){var n=[].slice.call(this.parent.element.querySelectorAll(".e-card.e-selection"));t.removeClass(n,"e-selection"),this.disableAttributeSelection(n)}},n.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},n.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach((function(a){t.columnKeys=t.columnKeys.concat(a.keyField.split(",").map((function(e){return e.trim()})));var r=t.getColumnData(a.keyField,e);n[a.keyField]=r})),n},n.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach((function(n){return t[n.keyField]=e.parent.kanbanData.filter((function(t){return e.columnKeys.indexOf(t[e.parent.keyField])>-1&&t[e.parent.swimlaneSettings.keyField]===n.keyField}))})),t},n.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector(".e-kanban-header");[].slice.call(e.children).forEach((function(e){return t.remove(e)})),this.renderHeader(e)},n.prototype.refreshCards=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card-wrapper")).forEach((function(e){return t.remove(e)})),this.renderCards()},n.prototype.wireEvents=function(){t.EventHandler.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),t.EventHandler.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),t.EventHandler.add(document,t.Browser.touchStartEvent,this.documentClick,this);var e=this.parent.element.querySelector("."+P);t.EventHandler.add(e,"scroll",this.onContentScroll,this),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),e.scrollLeft=this.scrollLeft),this.wireDragEvent()},n.prototype.unWireEvents=function(){t.EventHandler.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),t.EventHandler.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),t.EventHandler.remove(document,t.Browser.touchStartEvent,this.documentClick);var e=this.parent.element.querySelector("."+P);e&&(t.EventHandler.remove(e,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent()),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},n.prototype.wireDragEvent=function(){this.parent.allowDragAndDrop&&this.parent.dragAndDropModule.wireDragEvents(this.parent.element.querySelector("."+P))},n.prototype.unWireDragEvent=function(){this.parent.dragAndDropModule.unWireDragEvents(this.parent.element.querySelector("."+P))},n.prototype.destroy=function(){this.parent.off(f,this.initRender),this.parent.off(y,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector(".e-kanban-header");e&&t.remove(e);var n=this.parent.element.querySelector("."+P);n&&t.remove(n),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var a=this.parent.element.querySelector(".e-swimlane-header");a&&t.remove(a);var r=this.parent.element.querySelector(".e-swimlane-content");r&&t.remove(r)},n}(U),W=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),V=function(e,t,n,a){var i,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==("undefined"==typeof Reflect?"undefined":r()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},Y=function(e){function a(t,n){return e.call(this,t,n)||this}return W(a,e),a.prototype.preRender=function(){if(this.isAdaptive=t.Browser.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null},!this.isBlazorRender()){this.localeObj=new t.L10n(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected",addTitle:"Add New Card",editTitle:"Edit Card Details",deleteTitle:"Delete Card",deleteContent:"Are you sure you want to delete this card?",save:"Save",delete:"Delete",cancel:"Cancel",yes:"Yes",no:"No"},this.locale)}},a.prototype.requiredModules=function(){return[]},a.prototype.getPersistData=function(){return this.addOnPersist(["columns","dataSource","swimlaneToggleArray"])},a.prototype.getModuleName=function(){return"kanban"},a.prototype.render=function(){if(!this.isBlazorRender()){var e=[],a=[];this.enableRtl?e.push("e-rtl"):a.push("e-rtl"),this.isAdaptive?e.push("e-device"):a.push("e-device"),this.cssClass&&e.push(this.cssClass),this.element.setAttribute("role","main"),t.classList(this.element,e,a)}this.element.style.width=t.formatUnit(this.width),this.element.style.height=t.formatUnit(this.height),n.createSpinner({target:this.element}),this.showSpinner(),this.initializeModules()},a.prototype.onPropertyChanged=function(e,n){for(var a=0,r=Object.keys(e);a<r.length;a++)switch(r[a]){case"cssClass":n.cssClass&&t.removeClass([this.element],n.cssClass),e.cssClass&&t.addClass([this.element],e.cssClass);break;case"enableRtl":case"locale":this.isBlazorRender()||this.refresh();break;case"width":this.element.style.width=t.formatUnit(e.width),this.element.querySelector(".e-kanban-header").firstElementChild.style.width="auto",this.notify(y,{});break;case"height":this.element.style.height=t.formatUnit(e.height),this.element.querySelector("."+P).style.height="auto",this.notify(y,{});break;case"dataSource":case"query":this.isBlazorRender()||(this.dataModule=new v(this));break;case"columns":case"constraintType":this.isBlazorRender()?this.notifyChange():this.notify(f,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,n.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,n.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.layoutModule.wireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new I(this),this.isBlazorRender()||this.layoutModule.refreshCards());break;case"dialogSettings":e.dialogSettings&&(this.dialogModule=new B(this));break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new N(this));break;case"stackedHeaders":this.isBlazorRender()?this.notifyChange():this.layoutModule.refreshHeaders()}},a.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++)switch(a[n]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortBy":this.isBlazorRender()?this.notifyChange():this.notify(f,{processedData:this.kanbanData})}},a.prototype.onCardSettingsPropertyChanged=function(e,n){for(var a=0,r=Object.keys(e);a<r.length;a++)switch(r[a]){case"showHeader":case"headerField":case"contentField":case"template":this.isBlazorRender()?this.notifyChange():this.layoutModule.refreshCards();break;case"selectionType":var i=this.getSelectedCards();i.length>0&&(t.removeClass(i,"e-selection"),this.layoutModule.disableAttributeSelection(i))}},a.prototype.initializeModules=function(){this.isBlazorRender()||(this.dataModule=new v(this)),this.layoutModule=new K(this),this.allowKeyboard&&(this.keyboardModule=new N(this)),this.actionModule=new q(this),this.crudModule=new L(this),this.dragAndDropModule=new H(this),this.dialogModule=new B(this),this.enableTooltip&&(this.tooltipModule=new I(this)),(t.Browser.isDevice||t.Browser.isTouch)&&(this.touchModule=new _(this))},a.prototype.notifyChange=function(){this.interopAdaptor.invokeMethodAsync("PropertyChanged")},a.prototype.isDevice=function(e){t.Browser.isDevice&&this.isBlazorRender()&&e&&e.invokeMethodAsync("IsDevice",!0)},a.prototype.isBlazorRender=function(){return t.isBlazor()&&this.isServerRendered},a.prototype.updateDataSource=function(e){this.kanbanData=e.Result},a.prototype.dataReady=function(e){this.kanbanData=e.Result,this.hideSpinner(),this.notify(f,{processedData:{}})},a.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.dialogModule=null,this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},a.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return t.compile(document.querySelector(e).innerHTML.trim())}catch(n){return t.compile(e)}},a.prototype.getCardDetails=function(e){var t=this,n="number"==typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter((function(e){return e[t.cardSettings.headerField]===n}))[0]},a.prototype.getColumnData=function(e,t){return this.layoutModule.getColumnCards(t)[e]||[]},a.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[e]||[]},a.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},a.prototype.showSpinner=function(){n.showSpinner(this.element)},a.prototype.hideSpinner=function(){n.hideSpinner(this.element)},a.prototype.openDialog=function(e,t){this.dialogModule.openDialog(e,t)},a.prototype.closeDialog=function(){this.dialogModule.closeDialog()},a.prototype.addCard=function(e){this.crudModule.addCard(e)},a.prototype.updateCard=function(e){this.crudModule.updateCard(e)},a.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},a.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},a.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},a.prototype.showColumn=function(e){this.actionModule.showColumn(e)},a.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},a.prototype.destroy=function(){this.destroyModules(),this.isBlazorRender()||[].slice.call(this.element.childNodes).forEach((function(e){return t.detach(e)}));var n=["e-kanban"];this.cssClass&&(n=n.concat(this.cssClass.split(" "))),t.removeClass([this.element],n),this.isBlazorRender()||e.prototype.destroy.call(this)},V([t.Property()],a.prototype,"cssClass",void 0),V([t.Property("auto")],a.prototype,"width",void 0),V([t.Property("auto")],a.prototype,"height",void 0),V([t.Property([])],a.prototype,"dataSource",void 0),V([t.Property()],a.prototype,"query",void 0),V([t.Property()],a.prototype,"keyField",void 0),V([t.Property("Column")],a.prototype,"constraintType",void 0),V([t.Collection([],R)],a.prototype,"columns",void 0),V([t.Property(!0)],a.prototype,"allowKeyboard",void 0),V([t.Collection([],F)],a.prototype,"stackedHeaders",void 0),V([t.Complex({},C)],a.prototype,"swimlaneSettings",void 0),V([t.Complex({},E)],a.prototype,"cardSettings",void 0),V([t.Complex({},D)],a.prototype,"dialogSettings",void 0),V([t.Property(!0)],a.prototype,"allowDragAndDrop",void 0),V([t.Property(!1)],a.prototype,"enableTooltip",void 0),V([t.Property(!1)],a.prototype,"enablePersistence",void 0),V([t.Property()],a.prototype,"tooltipTemplate",void 0),V([t.Event()],a.prototype,"actionBegin",void 0),V([t.Event()],a.prototype,"actionComplete",void 0),V([t.Event()],a.prototype,"actionFailure",void 0),V([t.Event()],a.prototype,"created",void 0),V([t.Event()],a.prototype,"dataBinding",void 0),V([t.Event()],a.prototype,"dataBound",void 0),V([t.Event()],a.prototype,"cardClick",void 0),V([t.Event()],a.prototype,"cardDoubleClick",void 0),V([t.Event()],a.prototype,"queryCellInfo",void 0),V([t.Event()],a.prototype,"cardRendered",void 0),V([t.Event()],a.prototype,"dragStart",void 0),V([t.Event()],a.prototype,"drag",void 0),V([t.Event()],a.prototype,"dragStop",void 0),V([t.Event()],a.prototype,"dialogOpen",void 0),V([t.Event()],a.prototype,"dialogClose",void 0),V([t.NotifyPropertyChanges],a)}(t.Component);return e.Kanban=Y,e.actionBegin="actionBegin",e.actionComplete="actionComplete",e.actionFailure="actionFailure",e.cardClick="cardClick",e.cardDoubleClick="cardDoubleClick",e.cardRendered="cardRendered",e.queryCellInfo="queryCellInfo",e.dataBinding="dataBinding",e.dataBound="dataBound",e.dragStart="dragStart",e.drag="drag",e.dragStop="dragStop",e.documentClick="document-click",e.dialogOpen="dialogOpen",e.dialogClose="dialogClose",e.contentReady=y,e.dataReady=f,e.bottomSpace=25,e.cardSpace=16,e.toggleWidth=50,e};window.checkDependencies(["base","popups","data","dropdowns","inputs","buttons","navigations"],(function(){sf.kanban=sf.kanban({},sf.base,sf.popups,sf.data,sf.dropdowns,sf.inputs,sf.buttons,sf.navigations)}))}}]);