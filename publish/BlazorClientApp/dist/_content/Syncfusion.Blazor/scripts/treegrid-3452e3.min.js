(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"./bundles/treegrid.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/@babel/runtime/helpers/typeof.js"),n=r.n(i);window.sf=window.sf||{},window.sf.treegrid=function(e,t,r,i,o,a){function s(e){if(e.dataSource instanceof o.DataManager){var t=e.dataSource.adaptor;return t instanceof o.ODataAdaptor||t instanceof o.WebApiAdaptor||t instanceof o.WebMethodAdaptor||t instanceof o.CacheAdaptor||t instanceof o.UrlAdaptor}return!1}function d(e){return!!(e.dataSource&&"result"in e.dataSource)}function l(e){for(var t=0;t<e.columns.length;t++)if(e.columns[t].showCheckbox)return!0;return!1}function p(e){return!((t.isNullOrUndefined(e.grid.searchSettings.key)||""===e.grid.searchSettings.key||"Child"!==e.searchSettings.hierarchyMode&&"None"!==e.searchSettings.hierarchyMode)&&(!e.allowFiltering||!e.grid.filterSettings.columns.length||"Child"!==e.filterSettings.hierarchyMode&&"None"!==e.filterSettings.hierarchyMode))}function h(e){var t;t=[];for(var i=0,n=Object.keys(e).length;i<n;i++)r.getObject("hasChildRecords",e[i])&&t.push(e[i]);return t}function c(e,r,i){var n,o=t.isNullOrUndefined(r.parentItem)?null:m(e,r.parentItem.uniqueID);return null==o||(!e.initialRender||t.isNullOrUndefined(o[e.expandStateMapping])||o[e.expandStateMapping]?!1!==o.expanded&&(!o.parentItem||((n=m(e,o.parentItem.uniqueID))&&e.initialRender&&!t.isNullOrUndefined(n[e.expandStateMapping])&&!n[e.expandStateMapping]?(n.expanded=!1,!1):(!n||!1!==n.expanded)&&(!n||c(e,n,i)))):(o.expanded=!1,!1))}function u(e){var r=[];if(t.isNullOrUndefined(e)||!e.hasChildRecords&&!t.isNullOrUndefined(e.childRecords)&&!e.childRecords.length)return[];if(!t.isNullOrUndefined(e.childRecords))for(var i=e.childRecords,n=0,o=Object.keys(i).length;n<o;n++)r.push(i[n]),(i[n].hasChildRecords||!t.isNullOrUndefined(i[n].childRecords)&&i[n].childRecords.length)&&(r=r.concat(u(i[n])));return r}function g(e){if(s(e)){var r=e.dataSource;return!t.isNullOrUndefined(r.ready)}return!0}function f(e){for(var t,r,i=[],n=0;n<e.length;n++){r=Object.keys(e[n]),t={};for(var o=0;o<r.length;o++)t[r[o]]=e[n][r[o]];i.push(t)}return i}function y(e){return delete e.hasChildRecords,delete e.childRecords,delete e.index,delete e.parentItem,delete e.level,e}function m(e,t,r){return r?e.uniqueIDFilterCollection[t]:e.uniqueIDCollection[t]}function v(e,r,i,a,s,d,l){var p,h,c,u=e.value,g=e.action,y=r.grid.getPrimaryKeyFieldNames()[0],v=r.dataSource instanceof o.DataManager?r.dataSource.dataSource.json:r.dataSource,x=[],S=u,b=!1;if("Batch"===r.editSettings.mode&&(c=r.grid.editModule.getBatchChanges()),"add"===g||"batchsave"===g&&"Batch"===r.editSettings.mode&&c.addedRecords.length){var I=w(e,v,r,i,a,s,l);u=I.value,b=I.isSkip}if(u instanceof Array?x=f(u):x.push(t.extend({},u)),!b&&("add"!==g||"Top"!==r.editSettings.newRowPosition&&"Bottom"!==r.editSettings.newRowPosition))for(var D=0;D<x.length;D++){"object"==n()(x[D][y])&&(x[D]=x[D][y]);var M=Object.keys(x[D].taskData);for(p=v.length;p--&&p>=0&&"break"!==function(){if(v[p][y]===x[D][y]){if("delete"!==g){if("edit"===g)for(h=0;h<M.length;h++)v[p].hasOwnProperty(M[h])&&("Cell"!==r.editSettings.mode||!t.isNullOrUndefined(c)&&0===c.changedRecords.length||M[h]===d)&&(m(r,x[D].uniqueID).taskData[M[h]]=v[p][M[h]]=x[D][M[h]]);else if("add"===g||"batchsave"===g){var e=void 0;"Child"===r.editSettings.newRowPosition?i?(S.taskData[r.parentIdMapping]=v[p][r.idMapping],v.splice(p+1,0,S.taskData)):(v[p].hasOwnProperty(r.childMapping)||(v[p][r.childMapping]=[]),v[p][r.childMapping].push(S.taskData),C(y,v[p],g,r,i,S)):"Below"===r.editSettings.newRowPosition?(v.splice(p+1,0,S.taskData),C(y,v[p],g,r,i,S)):a?"Above"===r.editSettings.newRowPosition&&(v.splice(p,0,S.taskData),C(y,v[p],g,r,i,S)):(e=0,v.splice(e,0,S.taskData))}return"break"}var n=v[p];if(v.splice(p,1),i){if(!t.isNullOrUndefined(n[r.parentIdMapping]))for(var o=r.flatData.filter((function(e){return e[r.idMapping]===n[r.parentIdMapping]}))[0],s=o?o[r.childMapping]:[],l=s.length-1;l>=0;l--)if(s[l][r.idMapping]===n[r.idMapping]){s.splice(l,1),s.length||(o.hasChildRecords=!1,C(y,o,g,r,i));break}return"break"}}else t.isNullOrUndefined(v[p][r.childMapping])||R(v[p][r.childMapping],x[D],g,y,r,i,S,d)&&C(y,v[p],g,r,i)}(););}}function w(e,r,i,n,o,a,s){var d,l=!1,p=i.grid.getCurrentViewRecords();switch(d=y(d=t.extend({},e.value)),i.editSettings.newRowPosition){case"Top":r.unshift(d),l=!0;break;case"Bottom":r.push(d),l=!0;break;case"Above":d=y(d=t.isNullOrUndefined(s)?t.extend({},p[o+1]):t.extend({},s));break;case"Below":case"Child":d=y(d=t.isNullOrUndefined(s)?t.extend({},p[o]):t.extend({},s)),-1===a&&(r.unshift(d),l=!0)}return{value:d,isSkip:l}}function R(e,r,i,n,o,a,s,d){for(var l=!1,p=e.length;p--&&p>=0;)if(e[p][n]===r[n]||a&&e[p][o.parentIdMapping]===r[o.idMapping]){if("edit"===i){for(var h=Object.keys(r),c=m(o,r.uniqueID),u=0;u<h.length;u++)!e[p].hasOwnProperty(h[u])||"Cell"===o.editSettings.mode&&h[u]!==d||(c[h[u]]=c.taskData[h[u]]=e[p][h[u]]=r[h[u]]);break}"add"===i||"batchsave"===i?"Child"===o.editSettings.newRowPosition?a?(s[o.parentIdMapping]=e[p][o.idMapping],e.splice(p+1,0,s),C(n,e[p],i,o,a,s)):(e[p].hasOwnProperty(o.childMapping)||(e[p][o.childMapping]=[]),e[p][o.childMapping].push(s.taskData),C(n,e[p],i,o,a,s)):"Above"===o.editSettings.newRowPosition?(e.splice(p,0,s.taskData),C(n,e[p],i,o,a,s)):"Below"===o.editSettings.newRowPosition&&(e.splice(p+1,0,s.taskData),C(n,e[p],i,o,a,s)):(e[p].parentItem,e.splice(p,1),e.length||(l=!0))}else t.isNullOrUndefined(e[p][o.childMapping])||R(e[p][o.childMapping],r,i,n,o,a,s,d)&&C(n,e[p],i,o,a);return l}function C(e,r,i,n,a,s){if("Above"!==n.editSettings.newRowPosition&&"Below"!==n.editSettings.newRowPosition||"add"!==i&&"batchsave"!==i||t.isNullOrUndefined(s.parentItem)){var d,l=n.grid.getCurrentViewRecords();if(l.map((function(t,i){t[e]!==r[e]||(d=i)})),(r=l[d]).hasChildRecords=!1,"add"===i||"batchsave"===i){r.expanded=!0,r.hasChildRecords=!0,n.sortSettings.columns.length&&t.isNullOrUndefined(s)&&(s=l.filter((function(e){return e.parentUniqueID===r.uniqueID?e:null})));var p=s?s instanceof Array?s[0]:s:l[d+1];"Below"!==n.editSettings.newRowPosition&&(r.hasOwnProperty("childRecords")?t.isNullOrUndefined(s)||r[e]===s[e]||r.childRecords.push(s):r.childRecords=[],-1===r.childRecords.indexOf(p)&&r[e]!==s[e]&&r.childRecords.unshift(p),a&&(r.hasOwnProperty(n.childMapping)||(r[n.childMapping]=[]),-1===r[n.childMapping].indexOf(p)&&r[e]!==s[e]&&r[n.childMapping].unshift(p)))}for(var h=n.grid.getPrimaryKeyFieldNames()[0],c=n.grid.dataSource instanceof o.DataManager?n.grid.dataSource.dataSource.json:n.grid.dataSource,u=0;u<c.length;u++)if(c[u][h]===r[h]){c[u]=r;break}n.grid.setRowData(e,r);var g=n.getRowByIndex(d);"Batch"===n.editSettings.mode&&(g=n.getRows()[n.grid.getRowIndexByPrimaryKey(r[e])]);var f=void 0;(n.frozenRows||n.getFrozenColumns())&&(f=n.getMovableRowByIndex(d)),n.renderModule.cellRender({data:r,cell:g.cells[n.treeColumnIndex]?g.cells[n.treeColumnIndex]:f.cells[n.treeColumnIndex-n.frozenColumns],column:n.grid.getColumns()[n.treeColumnIndex],requestType:i})}else m(n,s.parentItem.uniqueID).childRecords.push(s)}var x,S,b,I,D,M=function(e){this.allowEditing=!0,this.edit={},this.disableHtmlEncode=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.allowFiltering=!0,this.allowSorting=!0,this.allowResizing=!0,this.filter={},t.merge(this,e)},P=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),O=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},E=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return P(r,e),O([t.Property()],r.prototype,"field",void 0),O([t.Property()],r.prototype,"operator",void 0),O([t.Property()],r.prototype,"value",void 0),O([t.Property()],r.prototype,"matchCase",void 0),O([t.Property()],r.prototype,"ignoreAccent",void 0),O([t.Property()],r.prototype,"predicate",void 0),O([t.Property({})],r.prototype,"actualFilterValue",void 0),O([t.Property({})],r.prototype,"actualOperator",void 0),O([t.Property()],r.prototype,"type",void 0),O([t.Property()],r.prototype,"ejpredicate",void 0),O([t.Property()],r.prototype,"uid",void 0),O([t.Property()],r.prototype,"isForeignKey",void 0),r}(t.ChildProperty),A=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return P(r,e),O([t.Collection([],E)],r.prototype,"columns",void 0),O([t.Property("FilterBar")],r.prototype,"type",void 0),O([t.Property()],r.prototype,"mode",void 0),O([t.Property(!0)],r.prototype,"showFilterBarStatus",void 0),O([t.Property(1500)],r.prototype,"immediateModeDelay",void 0),O([t.Property()],r.prototype,"operators",void 0),O([t.Property(!1)],r.prototype,"ignoreAccent",void 0),O([t.Property("Parent")],r.prototype,"hierarchyMode",void 0),r}(t.ChildProperty),k=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),q=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return k(r,e),function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);a>3&&s&&Object.defineProperty(t,r,s)}([t.Property("Both")],r.prototype,"wrapMode",void 0),r}(t.ChildProperty),B=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),N=function(e){function r(t){var r=e.call(this,t.grid)||this;return r.treeCopyContent="",r.copiedUniqueIdCollection=[],r.treeGridParent=t,r}return B(r,e),r.prototype.setCopyData=function(r){var i=this.treeGridParent.getCurrentViewRecords();if(""===window.getSelection().toString()){this.clipBoardTextArea.value=this.copyContent="";var n=this.treeGridParent.grid.getRows();if("Cell"!==this.treeGridParent.selectionSettings.mode){for(var o=this.treeGridParent.getSelectedRowIndexes().sort((function(e,t){return e-t})),a=0;a<o.length;a++)if(a>0&&(this.treeCopyContent+="\n"),!n[o[a]].classList.contains("e-summaryrow")){var s=[].slice.call(n[o[a]].querySelectorAll(".e-rowcell")),d=this.treeGridParent.getSelectedRecords()[a].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(d)&&("Parent"!==this.treeGridParent.copyHierarchyMode&&"Both"!==this.treeGridParent.copyHierarchyMode||this.parentContentData(i,o[a],n,r,a),this.getCopyData(s,!1,"\t",r),this.treeCopyContent+=this.copyContent,this.copiedUniqueIdCollection.push(d),this.copyContent="","Child"!==this.treeGridParent.copyHierarchyMode&&"Both"!==this.treeGridParent.copyHierarchyMode||this.childContentData(i,o[a],n,r))}if(r){var l=[];for(a=0;a<this.treeGridParent.getVisibleColumns().length;a++)l[a]=this.treeGridParent.getVisibleColumns()[a].headerText;this.getCopyData(l,!1,"\t",r),this.treeCopyContent=this.copyContent+"\n"+this.treeCopyContent}var p={data:this.treeCopyContent,cancel:!1};if(this.treeGridParent.trigger("beforeCopy",p),p.cancel)return;this.clipBoardTextArea.value=this.copyContent=p.data,t.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0,this.copiedUniqueIdCollection=[],this.treeCopyContent=""}else e.prototype.setCopyData.call(this,r)}},r.prototype.parentContentData=function(e,r,i,n,o){if(!t.isNullOrUndefined(e[r].parentItem))for(var a=e[r].parentItem.level,s=0;s<a+1;s++)for(var d=0;d<e.length;d++)if(!t.isNullOrUndefined(e[r].parentItem)&&e[d].uniqueID===e[r].parentItem.uniqueID){r=d;var l=[].slice.call(i[r].querySelectorAll(".e-rowcell")),p=e[d].uniqueID;if(-1===this.copiedUniqueIdCollection.indexOf(p)){this.getCopyData(l,!1,"\t",n),this.treeCopyContent=o>0?this.treeCopyContent+this.copyContent+"\n":this.copyContent+"\n"+this.treeCopyContent,this.copiedUniqueIdCollection.push(p),this.copyContent="";break}}},r.prototype.copy=function(t){e.prototype.copy.call(this,t)},r.prototype.paste=function(t,r,i){e.prototype.paste.call(this,t,r,i)},r.prototype.getModuleName=function(){return"clipboard"},r.prototype.destroy=function(){e.prototype.destroy.call(this)},r.prototype.childContentData=function(e,r,i,n){if(e[r].hasChildRecords)for(var o=e[r].childRecords,a=0;a<o.length;a++)for(var s=0;s<e.length;s++)if(!t.isNullOrUndefined(o[a].uniqueID)&&e[s].uniqueID===o[a].uniqueID){if(!t.isNullOrUndefined(i[s])&&!i[s].classList.contains("e-summaryrow")){var d=[].slice.call(i[s].querySelectorAll(".e-rowcell")),l=e[s].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(l)&&(this.getCopyData(d,!1,"\t",n),this.treeCopyContent+="\n"+this.copyContent,this.copyContent="",this.copiedUniqueIdCollection.push(l),this.childContentData(e,s,i,n))}break}},r}(r.Clipboard),U=function(){function e(e){this.parent=e,this.selectedItems=[],this.selectedIndexes=[],this.addEventListener()}return e.prototype.getModuleName=function(){return"selection"},e.prototype.addEventListener=function(){this.parent.on("dataBoundArg",this.headerCheckbox,this),this.parent.on("columnCheckbox",this.columnCheckbox,this),this.parent.on("updateGridActions",this.updateGridActions,this),this.parent.grid.on("colgroup-refresh",this.headerCheckbox,this),this.parent.on("checkboxSelection",this.checkboxSelection,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("dataBoundArg",this.headerCheckbox),this.parent.off("columnCheckbox",this.columnCheckbox),this.parent.grid.off("colgroup-refresh",this.headerCheckbox),this.parent.off("checkboxSelection",this.checkboxSelection),this.parent.off("updateGridActions",this.updateGridActions))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.checkboxSelection=function(e){var t,i=r.getObject("target",e),n=r.parentsUntil(i,"e-checkbox-wrapper");if(n&&n.querySelectorAll(".e-treecheckselect").length>0){t=n.querySelector('input[type="checkbox"]');var o=void 0;(o=[]).push(i.closest("tr").rowIndex),this.selectCheckboxes(o),this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"),i.closest("tr"))}else if(n&&n.querySelectorAll(".e-treeselectall").length>0&&this.parent.autoCheckHierarchy){var a=!n.querySelector(".e-frame").classList.contains("e-check")&&!n.querySelector(".e-frame").classList.contains("e-stop");this.headerSelection(a),t=n.querySelector('input[type="checkbox"]'),this.triggerChkChangeEvent(t,a,i.closest("tr"))}},e.prototype.triggerChkChangeEvent=function(e,t,r){var i=this.parent.getCurrentViewRecords()[r.rowIndex],n={checked:t,target:e,rowElement:r,rowData:e.classList.contains("e-treeselectall")?this.parent.getCheckedRecords():i};this.parent.trigger("checkboxChange",n)},e.prototype.getCheckboxcolumnIndex=function(){for(var e,t,r=this.parent.columns,i=0;i<r.length;i++)r[i].showCheckbox&&(e=this.parent.columns[i].uid);for(var n=this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv").length,o=0;o<n;o++)this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[o].getAttribute("e-mappinguid")===e&&(t=o);return t},e.prototype.headerCheckbox=function(){if(this.columnIndex=this.getCheckboxcolumnIndex(),this.columnIndex>-1&&0===this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length){var e=this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[this.columnIndex],r=void 0,n=this.parent.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}});(r=i.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "})).classList.add("e-hierarchycheckbox"),r.querySelector(".e-frame").style.width="18px",r.insertBefore(n.cloneNode(),r.firstChild),t.isNullOrUndefined(e)||e.insertBefore(r,e.firstChild),this.parent.autoCheckHierarchy&&this.headerSelection()}else if(this.columnIndex>-1&&this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length>0){var o=(r=this.parent.getHeaderContent().querySelectorAll(".e-checkbox-wrapper")[0]).querySelector(".e-frame").classList.contains("e-check");this.parent.autoCheckHierarchy&&o&&this.headerSelection(o)}},e.prototype.renderColumnCheckbox=function(e){var r,n=this.parent.createElement("input",{className:"e-treecheckselect",attrs:{type:"checkbox"}}),o=e.data;e.cell.classList.add("e-treegridcheckbox"),e.cell.setAttribute("aria-label","checkbox");var a=!t.isNullOrUndefined(o.checkboxState)&&"uncheck"!==o.checkboxState;if((r=i.createCheckBox(this.parent.createElement,!1,{checked:a,label:" "})).classList.add("e-hierarchycheckbox"),r.querySelector(".e-frame").style.width="18px","indeterminate"===o.checkboxState){var s=r.querySelectorAll(".e-frame")[0];t.removeClass([s],["e-check","e-stop","e-uncheck"]),r.querySelector(".e-frame").classList.add("e-stop")}return r.insertBefore(n.cloneNode(),r.firstChild),r},e.prototype.columnCheckbox=function(e){var r=this.renderColumnCheckbox(e),i=e.cell.querySelector(".e-treecolumn-container");if(t.isNullOrUndefined(i)){var n=this.parent.createElement("span",{className:"e-treecheckbox"}),o=e.cell.innerHTML;e.cell.innerHTML="",n.innerHTML=o;var a=this.parent.createElement("div",{className:"e-treecheckbox-container"});a.appendChild(r),a.appendChild(n),e.cell.appendChild(a)}else i.insertBefore(r,i.querySelectorAll(".e-treecell")[0])},e.prototype.selectCheckboxes=function(e){for(var r=0;r<e.length;r++){var i=this.parent.getCurrentViewRecords()[e[r]],n=m(this.parent,i.uniqueID),o="uncheck"===(i=t.isBlazor()&&"BlazorAdaptor"===this.parent.dataSource.adaptorName?i:n).checkboxState?"check":"uncheck";i.checkboxState=o;for(var a=Object.keys(i),s=0;s<a.length;s++)n.hasOwnProperty(a[s])&&(n[a[s]]=i[a[s]]);this.traverSelection(i,o,!1),this.parent.autoCheckHierarchy&&this.headerSelection()}},e.prototype.traverSelection=function(e,r,i){var n=0;if(this.updateSelectedItems(e,r),!i&&e.parentItem&&this.parent.autoCheckHierarchy&&this.updateParentSelection(e.parentItem),e.childRecords&&this.parent.autoCheckHierarchy){var o=e.childRecords;!t.isNullOrUndefined(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.parent.autoCheckHierarchy&&(o=this.getFilteredChildRecords(o)),n=o.length;for(var a=0;a<n;a++)o[a].hasChildRecords?this.traverSelection(o[a],r,!0):this.updateSelectedItems(o[a],r)}},e.prototype.getFilteredChildRecords=function(e){var t=this;return e.filter((function(e){return t.parent.filterModule.filteredResult.indexOf(e)>-1}))},e.prototype.updateParentSelection=function(e){var r,i=[],n=m(this.parent,e.uniqueID);n&&n.childRecords&&(i=n.childRecords),!t.isNullOrUndefined(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.parent.autoCheckHierarchy&&(i=this.getFilteredChildRecords(i)),r=i&&i.length;var o=0,a=0;if(!t.isNullOrUndefined(n)){for(var s=this,d=0;d<i.length;d++)!function(e){var r=s.parent.getCurrentViewRecords().filter((function(t){return t.uniqueID===i[e].uniqueID})),n=m(s.parent,i[e].uniqueID),d=t.isBlazor()&&"BlazorAdaptor"===s.parent.dataSource.adaptorName?r[0]:n;"indeterminate"===d.checkboxState?o++:"check"===d.checkboxState&&a++}(d);n.checkboxState=o>0||a>0&&a!==r?"indeterminate":0===a&&0===o?"uncheck":"check",this.updateSelectedItems(n,n.checkboxState),n.parentItem&&this.updateParentSelection(n.parentItem)}},e.prototype.headerSelection=function(e){var r,i=this,n=!t.isNullOrUndefined(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0?this.parent.filterModule.filteredResult:this.parent.flatData;if(n=t.isBlazor()&&"BlazorAdaptor"===this.parent.dataSource.adaptorName||s(this.parent)?this.parent.getCurrentViewRecords():n,!t.isNullOrUndefined(e))for(var o=0;o<n.length;o++)if(e){if("check"===n[o].checkboxState)continue;n[o].checkboxState="check",this.updateSelectedItems(n[o],n[o].checkboxState)}else this.selectedItems.indexOf(n[o])>-1&&(n[o].checkboxState="uncheck",this.updateSelectedItems(n[o],n[o].checkboxState),this.parent.autoCheckHierarchy&&this.updateParentSelection(n[o]));!1===e&&this.parent.enableVirtualization&&(this.selectedItems=[],this.selectedIndexes=[],n.filter((function(e){e.checkboxState="uncheck",i.updateSelectedItems(e,e.checkboxState)}))),r=this.selectedItems.length;var a=this.parent.getHeaderContent().querySelectorAll(".e-frame")[0];r>0&&n.length>0?r===n.length||e?(t.removeClass([a],["e-stop"]),a.classList.add("e-check")):(t.removeClass([a],["e-check"]),a.classList.add("e-stop")):t.removeClass([a],["e-check","e-stop"])},e.prototype.updateSelectedItems=function(e,r,i){var n,o,a=this.parent.getCurrentViewRecords().filter((function(t){return t.uniqueID===e.uniqueID})),s=this.parent.getCurrentViewRecords().indexOf(a[0]),d=m(this.parent,e.uniqueID);if(s>-1){var l=this.parent.getRows()[s],p=void 0;(this.parent.frozenRows||this.parent.getFrozenColumns())&&(p=this.parent.getMovableDataRows()[s]),o=l.querySelectorAll(".e-frame")[0]?l.querySelectorAll(".e-frame")[0]:p.querySelectorAll(".e-frame")[0],t.isNullOrUndefined(o)||t.removeClass([o],["e-check","e-stop","e-uncheck"])}if(n=t.isBlazor()&&"BlazorAdaptor"===this.parent.dataSource.adaptorName?a[0]:d,t.isNullOrUndefined(n)&&(n=e),n.checkboxState=r,"check"===r&&t.isNullOrUndefined(e.isSummaryRow))-1!==s&&-1===this.selectedIndexes.indexOf(s)&&this.selectedIndexes.push(s),-1===this.selectedItems.indexOf(n)&&-1!==s&&!t.isNullOrUndefined(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.selectedItems.push(n),-1!==this.selectedItems.indexOf(n)||t.isNullOrUndefined(this.parent.filterModule)||0!==this.parent.filterModule.filteredResult.length||this.selectedItems.push(n),-1===this.selectedItems.indexOf(n)&&t.isNullOrUndefined(this.parent.filterModule)&&this.selectedItems.push(n);else if(("uncheck"===r||"indeterminate"===r)&&t.isNullOrUndefined(e.isSummaryRow)){var h=this.selectedItems.indexOf(n);if(-1!==h&&this.selectedItems.splice(h,1),-1!==this.selectedIndexes.indexOf(s)){var c=this.selectedIndexes.indexOf(s);this.selectedIndexes.splice(c,1)}}var u="indeterminate"===r?"e-stop":"e-"+r;s>-1&&(t.isNullOrUndefined(o)||o.classList.add(u))},e.prototype.updateGridActions=function(e){var r,i,n=this,o=e.requestType;if(l(this.parent)&&this.parent.autoCheckHierarchy)if("sorting"===o||"paging"===o)for(i=(r=this.parent.getCurrentViewRecords()).length,this.selectedIndexes=[],d=0;d<i;d++)this.updateSelectedItems(r[d],r[d].checkboxState,!0);else if("delete"===o||"add"===e.action){var a=[];"delete"===o?a=e.data:a.push(e.data);for(var d=0;d<a.length;d++){if("delete"===o){var p=this.parent.flatData.indexOf(a[d]),h=this.selectedIndexes.indexOf(p);this.selectedIndexes.splice(h,1),this.updateSelectedItems(a[d],"uncheck")}t.isNullOrUndefined(a[d].parentItem)||this.updateParentSelection(a[d].parentItem)}}else"add"===e.requestType&&this.parent.autoCheckHierarchy?e.data.checkboxState="uncheck":("filtering"===o||"searching"===o||"refresh"===o&&!s(this.parent))&&(this.selectedItems=[],this.selectedIndexes=[],(r=!t.isNullOrUndefined(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0?this.parent.getCurrentViewRecords():this.parent.flatData).forEach((function(e){e.hasChildRecords?n.updateParentSelection(e):n.updateSelectedItems(e,e.checkboxState)})),this.headerSelection())},e.prototype.getCheckedrecords=function(){return this.selectedItems},e.prototype.getCheckedRowIndexes=function(){return this.selectedIndexes},e}(),T=function(){function e(e){this.parent=e,r.Grid.Inject(r.Print),this.addEventListener()}return e.prototype.getModuleName=function(){return"print"},e.prototype.addEventListener=function(){this.parent.grid.on("printGrid-Init",this.printTreeGrid,this)},e.prototype.removeEventListener=function(){this.parent.grid.off("printGrid-Init",this.printTreeGrid)},e.prototype.printTreeGrid=function(e){var i=r.getObject("printgrid",e),n=r.getObject("element",e);i.addEventListener("queryCellInfo",this.parent.grid.queryCellInfo),i.addEventListener("rowDataBound",this.parent.grid.rowDataBound),i.addEventListener("beforeDataBound",this.parent.grid.beforeDataBound),t.addClass([n],"e-treegrid")},e.prototype.print=function(){this.parent.grid.print()},e.prototype.destroy=function(){this.removeEventListener()},e}(),L=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),V=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},j=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return L(r,e),V([t.Property()],r.prototype,"fields",void 0),V([t.Property(!1)],r.prototype,"ignoreCase",void 0),V([t.Property("contains")],r.prototype,"operator",void 0),V([t.Property()],r.prototype,"key",void 0),V([t.Property()],r.prototype,"hierarchyMode",void 0),r}(t.ChildProperty),F=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},z=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return F(r,e),_([t.Property("Row")],r.prototype,"mode",void 0),_([t.Property("Flow")],r.prototype,"cellSelectionMode",void 0),_([t.Property("Single")],r.prototype,"type",void 0),_([t.Property(!1)],r.prototype,"persistSelection",void 0),_([t.Property("Default")],r.prototype,"checkboxMode",void 0),_([t.Property(!1)],r.prototype,"checkboxOnly",void 0),r}(t.ChildProperty),G=function(){function e(e){this.parent=e,this.templateResult=null,this.parent.grid.on("template-result",this.columnTemplateResult,this)}return e.prototype.RowModifier=function(e){if(e.data){var i=e.data,n=i.parentItem;if(t.isNullOrUndefined(i.parentItem)||p(this.parent)||this.parent.allowPaging&&"Root"!==this.parent.pageSettings.pageSizeMode&&(!s(this.parent)||g(this.parent))?e.row.getAttribute("aria-rowindex"):(i.parentItem.index,(this.parent.initialRender&&(!(t.isNullOrUndefined(n[this.parent.expandStateMapping])||n[this.parent.expandStateMapping])||this.parent.enableCollapseAll)||!c(this.parent,e.data,this.parent.grid.getCurrentViewRecords()))&&(e.row.style.display="none")),s(this.parent)&&!g(this.parent)){var o=this.parent,a=this.parent.getCurrentViewRecords().filter((function(e){return t.getValue(o.idMapping,e)===t.getValue(o.parentIdMapping,i)}));if(a.length>0){var d=a[0].expanded?"table-row":"none";e.row.setAttribute("style","display: "+d+";")}}r.getObject("isSummaryRow",e.data)&&t.addClass([e.row],"e-summaryrow"),e.row.querySelector(".e-treegridexpand")?e.row.setAttribute("aria-expanded","true"):e.row.querySelector(".e-treegridcollapse")&&e.row.setAttribute("aria-expanded","false"),this.parent.enableCollapseAll&&this.parent.initialRender&&(t.isNullOrUndefined(i.parentItem)||(e.row.style.display="none")),this.parent.trigger("rowDataBound",e)}},e.prototype.cellRender=function(e){if(e.data){var i,n,o=this.parent.grid,a=e.data,s=t.isNullOrUndefined(a.filterLevel)?a.level:a.filterLevel,d=0,l=this.parent.getColumnByField(e.column.field),p=a.isSummaryRow;if(i=t.isNullOrUndefined(a.parentItem)?a.index:a.parentItem.index,o.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex&&("add"===e.requestType||"delete"===e.requestType||t.isNullOrUndefined(e.cell.querySelector(".e-treecell")))){for(var h=t.createElement("div",{className:"e-treecolumn-container"}),u=t.createElement("span",{className:"e-icons e-none",styles:"width: 10px; display: inline-block"}),g=0;g<s;g++)d+=10,h.appendChild(u.cloneNode());var f=t.isNullOrUndefined(a.hasFilteredChildRecords)?a.hasChildRecords:a.hasFilteredChildRecords;if(f&&!t.isNullOrUndefined(a.childRecords)&&(f=!(0===a.childRecords.length)),f){t.addClass([e.cell],"e-treerowcell");var y,m=t.createElement("span",{className:"e-icons"});y=this.parent.initialRender?a.expanded&&(t.isNullOrUndefined(a[this.parent.expandStateMapping])||a[this.parent.expandStateMapping])&&!this.parent.enableCollapseAll:!(!a.expanded||!c(this.parent,a,this.parent.grid.getCurrentViewRecords()));var v=!0;t.isNullOrUndefined(a.parentItem)||t.isNullOrUndefined(a[this.parent.expandStateMapping])||!a[this.parent.expandStateMapping]||this.parent.allowPaging&&"Root"!==this.parent.pageSettings.pageSizeMode||(v=!c(this.parent,e.data,this.parent.grid.getCurrentViewRecords())),t.addClass([m],y&&v?"e-treegridexpand":"e-treegridcollapse"),d+=18,h.appendChild(m),u.style.width="7px",d+=7,h.appendChild(u.cloneNode())}else(s||!s&&!a.level)&&(d+=20,h.appendChild(u.cloneNode()),h.appendChild(u.cloneNode()));n=t.createElement("span",{className:"e-treecell"}),this.parent.allowTextWrap&&(n.style.width="Calc(100% - "+d+"px)"),t.addClass([e.cell],"e-gridrowindex"+i+"level"+a.level),this.updateTreeCell(e,n,h),h.appendChild(n),e.cell.appendChild(h)}if(this.parent.frozenColumns>this.parent.treeColumnIndex&&o.getColumnIndexByUid(e.column.uid)===this.parent.frozenColumns+1&&t.addClass([e.cell],"e-gridrowindex"+i+"level"+a.level),!t.isNullOrUndefined(l)&&l.showCheckbox&&(this.parent.notify("columnCheckbox",e),this.parent.allowTextWrap)){var w=e.cell.querySelectorAll(".e-frame")[0];d+=parseInt(w.style.width,16),d+=10,(n=o.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex?e.cell.querySelector(".e-treecell"):e.cell.querySelector(".e-treecheckbox")).style.width="Calc(100% - "+d+"px)"}if(p){t.addClass([e.cell],"e-summarycell");var R=r.getObject(e.column.field,e.data);null!=e.cell.querySelector(".e-treecell")?e.cell.querySelector(".e-treecell").innerHTML=R:e.cell.innerHTML=R}t.isNullOrUndefined(this.parent.rowTemplate)&&this.parent.trigger("queryCellInfo",e)}},e.prototype.updateTreeCell=function(e,t,i){var o=null!=e.cell.querySelector(".e-treecell")?e.cell.querySelector(".e-treecell").innerHTML:e.cell.innerHTML;if("object"==n()(e.column.template)&&this.templateResult)r.appendChildren(t,this.templateResult),this.templateResult=null,e.cell.innerHTML="";else if(e.cell.classList.contains("e-templatecell"))for(var a=e.cell.children.length;0<a;a=e.cell.children.length)t.appendChild(e.cell.children[0]);else t.innerHTML=o,e.cell.innerHTML=""},e.prototype.columnTemplateResult=function(e){this.templateResult=e.template},e.prototype.destroy=function(){this.parent.grid.off("template-result",this.columnTemplateResult)},e}(),H=function(){function e(e){this.addedRecords="addedRecords",this.parent=e,this.parentItems=[],this.taskIds=[],this.hierarchyData=[],this.storedIndex=-1,this.sortedData=[],this.isSortAction=!1,this.addEventListener(),this.dataResults={},this.isSelfReference=!t.isNullOrUndefined(this.parent.parentIdMapping)}return e.prototype.addEventListener=function(){this.parent.on("updateRemoteLevel",this.updateParentRemoteData,this),this.parent.grid.on("sorting-begin",this.beginSorting,this),this.parent.on("updateAction",this.updateData,this),this.parent.on("remoteExpand",this.collectExpandingRecs,this),this.parent.on("dataProcessor",this.dataProcessor,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("remoteExpand",this.collectExpandingRecs),this.parent.off("updateRemoteLevel",this.updateParentRemoteData),this.parent.off("updateAction",this.updateData),this.parent.off("dataProcessor",this.dataProcessor),this.parent.grid.off("sorting-begin",this.beginSorting))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.isRemote=function(){return this.parent.dataSource instanceof o.DataManager},e.prototype.convertToFlatData=function(e){var i=this;if(this.parent.flatData=0!==Object.keys(e).length||this.parent.dataSource instanceof o.DataManager?[]:this.parent.dataSource,this.parent.parentData=[],s(this.parent)&&!g(this.parent)&&e instanceof o.DataManager&&!(e instanceof Array)){var n=this.parent.dataSource;if(this.parent.parentIdMapping&&(this.parent.query=t.isNullOrUndefined(this.parent.query)?new o.Query:this.parent.query,this.parent.parentIdMapping&&this.parent.initialRender&&(this.parent.query.where(this.parent.parentIdMapping,"equal",null),this.parent.query.addParams("IdMapping",this.parent.idMapping)),!this.parent.hasChildMapping&&("BlazorAdaptor"!==this.parent.dataSource.adaptorName||this.parent.isClientRender))){var a=this.parent.query.clone();a.queries=[],(a=a.select([this.parent.parentIdMapping])).isCountRequired=!0,n.executeQuery(a).then((function(e){i.parentItems=o.DataUtil.distinct(e.result,i.parent.parentIdMapping,!1),0===r.getObject("dataSource.requests",i.parent).filter((function(e){return"OK"!==e.httpRequest.statusText})).length&&(t.setValue("grid.contentModule.isLoaded",!0,i.parent),t.isNullOrUndefined(i.zerothLevelData)||(t.setValue("cancel",!1,i.zerothLevelData),t.getValue("grid.renderModule",i.parent).dataManagerSuccess(i.zerothLevelData),i.zerothLevelData=null),i.parent.grid.hideSpinner())}))}}else if(e instanceof Array){for(this.hierarchyData=[],this.taskIds=[],h=0;h<Object.keys(e).length;h++){var d=e[h];this.hierarchyData.push(t.extend({},d)),t.isNullOrUndefined(d[this.parent.idMapping])||this.taskIds.push(d[this.parent.idMapping])}if(this.isSelfReference){for(var l=[],p=new o.DataManager(this.hierarchyData).executeLocal((new o.Query).group(this.parent.parentIdMapping)),h=0;h<p.length;h++){var c=p[h],u=this.taskIds.indexOf(c.key);if(!t.isNullOrUndefined(c.key)&&u>-1){var f=c.items;this.hierarchyData[u][this.parent.childMapping]=f}else l.push.apply(l,c.items)}this.hierarchyData=this.selfReferenceUpdate(l)}Object.keys(this.hierarchyData).length?this.createRecords(this.hierarchyData):this.parent.flatData=this.parent.dataSource instanceof o.DataManager?[]:this.parent.dataSource,this.storedIndex=-1}},e.prototype.selfReferenceUpdate=function(e){for(var t=[];this.hierarchyData.length>0&&e.length>0;){var r=e.indexOf(this.hierarchyData[0]);-1===r?this.hierarchyData.shift():(t.push(this.hierarchyData.shift()),e.splice(r,1))}return t},e.prototype.updateParentRemoteData=function(e){var i=e.result;if(this.parent.hasChildMapping||this.parentItems.length||"BlazorAdaptor"===this.parent.dataSource.adaptorName&&!this.parent.isClientRender||this.parent.loadChildOnDemand)if("BlazorAdaptor"===this.parent.dataSource.adaptorName&&!this.parent.isClientRender||this.parent.loadChildOnDemand)t.isNullOrUndefined(i)||this.convertToFlatData(i);else for(var n=0;n<i.length;n++)(i[n][this.parent.hasChildMapping]||-1!==this.parentItems.indexOf(i[n][this.parent.idMapping]))&&t.isNullOrUndefined(i[n].index)&&(i[n].taskData=t.extend({},i[n]),i[n].uniqueID=r.getUid(this.parent.element.id+"_data_"),t.setValue("uniqueIDCollection."+i[n].uniqueID,i[n],this.parent),i[n].level=0,i[n].index=Math.ceil(1e3*Math.random()),i[n].hasChildRecords=!0,i[n].checkboxState="uncheck");else this.zerothLevelData=e,t.setValue("cancel",!0,e);e.result="BlazorAdaptor"===this.parent.dataSource.adaptorName&&!this.parent.isClientRender&&!t.isNullOrUndefined(i)||this.parent.loadChildOnDemand?this.parent.flatData:i,this.parent.notify("updateResults",e)},e.prototype.collectExpandingRecs=function(e){var i=this,n=this.parent.getRows();if(this.parent.rowTemplate){var s=this.parent.getContentTable().rows;n=[].slice.call(s)}var d,l={row:e.parentRow,data:e.record};if(e.rows.length>0){e.record.expanded=!0;for(var p=0;p<e.rows.length;p++){if(t.isBlazor()&&this.parent.isServerRendered?(t.removeClass([e.rows[p]],"e-treerowcollapsed"),t.addClass([e.rows[p]],"e-treerowexpanded")):e.rows[p].style.display="table-row",t.isBlazor()&&"BlazorAdaptor"===this.parent.dataSource.adaptorName&&!this.parent.isClientRender||this.parent.loadChildOnDemand){var h=e.rows[p].getElementsByClassName("e-treegridcollapse")[0];t.isNullOrUndefined(h)||(t.addClass([h],"e-treegridexpand"),t.removeClass([h],"e-treegridcollapse")),d=this.parent.rowTemplate?this.parent.grid.getCurrentViewRecords()[e.rows[p].rowIndex]:this.parent.grid.getRowObjectFromUID(e.rows[p].getAttribute("data-Uid")).data;var c;(c=n.filter((function(e){return e.querySelector(".e-gridrowindex"+d.index+"level"+(d.level+1))}))).length&&this.collectExpandingRecs({record:d,rows:c,parentRow:e.parentRow})}var u=e.rows[p].querySelector(".e-detailrowcollapse");t.isNullOrUndefined(u)||this.parent.grid.detailRowModule.expand(u)}}else{var g=this.parent.dataSource,f=this.parent.grid.getDataModule().generateQuery(),y=f.queries.filter((function(e){return"onPage"!==e.fn&&"onWhere"!==e.fn}));f.queries=y,f.isCountRequired=!0,f.where(this.parent.parentIdMapping,"equal",e.record[this.parent.idMapping]),a.showSpinner(this.parent.element),g.executeQuery(f).then((function(n){var s=i.parent.grid.currentViewData,d=s.indexOf(e.record),p=r.getObject("actual.nextLevel",n),h=n.result;e.record.childRecords=h;for(var c=0;c<h.length;c++){h[c].taskData=t.extend({},h[c]),h[c].level=e.record.level+1,h[c].index=Math.ceil(1e3*Math.random());var u=t.extend({},e.record);delete u.childRecords,h[c].parentItem=u,h[c].parentUniqueID=e.record.uniqueID,h[c].uniqueID=r.getUid(i.parent.element.id+"_data_"),t.setValue("uniqueIDCollection."+h[c].uniqueID,h[c],i.parent),!h[c][i.parent.hasChildMapping]&&-1===i.parentItems.indexOf(h[c][i.parent.idMapping])||p&&!p[c]||(h[c].hasChildRecords=!0,h[c].expanded=!1),s.splice(d+c+1,0,h[c])}if(t.setValue("result",s,n),t.setValue("action","beforecontentrender",n),i.parent.trigger("actionComplete",n),a.hideSpinner(i.parent.element),i.parent.grid.aggregates.length>0&&!i.parent.enableVirtualization){var g=r.getObject("query",n);if(t.isNullOrUndefined(g)&&(g=t.getValue("grid.renderModule.data",i.parent).aggregateQuery(new o.Query)),!t.isNullOrUndefined(g)){var f=g.queries.filter((function(e){return"onAggregates"===e.fn}));n.result=i.parent.summaryModule.calculateSummaryValue(f,n.result,!0)}}n.count=i.parent.grid.pageSettings.totalRecordsCount;var y={};i.parent.enableVirtualization&&i.remoteVirtualAction(y),t.getValue("grid.renderModule",i.parent).dataManagerSuccess(n,y),i.parent.trigger("expanded",l)}))}},e.prototype.remoteVirtualAction=function(e){e.requestType="refresh",t.setValue("isExpandCollapse",!0,e);var r=t.getValue("grid.contentModule",this.parent),i=t.getValue("currentInfo",r),n=t.getValue("prevInfo",r);i.loadNext&&this.parent.grid.pageSettings.currentPage===i.nextInfo.page&&(this.parent.grid.pageSettings.currentPage=n.page)},e.prototype.beginSorting=function(){this.isSortAction=!0},e.prototype.createRecords=function(e,i){for(var n=[],o=0,a=Object.keys(e).length;o<a;o++){var s=t.extend({},e[o]);s.taskData=e[o];var l=0;if(this.storedIndex++,s.hasOwnProperty("index")||(s.index=this.storedIndex),(!t.isNullOrUndefined(s[this.parent.childMapping])||s[this.parent.hasChildMapping]&&d(this.parent))&&(s.hasChildRecords=!0,this.parent.enableCollapseAll||!t.isNullOrUndefined(this.parent.dataStateChange)&&t.isNullOrUndefined(s[this.parent.childMapping])?s.expanded=!1:s.expanded=!!t.isNullOrUndefined(s[this.parent.expandStateMapping])||s[this.parent.expandStateMapping]),s.hasOwnProperty("index")||(s.index=(s.hasChildRecords,this.storedIndex)),this.isSelfReference&&t.isNullOrUndefined(s[this.parent.parentIdMapping])&&this.parent.parentData.push(s),s.uniqueID=r.getUid(this.parent.element.id+"_data_"),t.setValue("uniqueIDCollection."+s.uniqueID,s,this.parent),!t.isNullOrUndefined(i)){var p=t.extend({},i);delete p.childRecords,delete p[this.parent.childMapping],this.isSelfReference&&delete p.taskData[this.parent.childMapping],s.parentItem=p,s.parentUniqueID=p.uniqueID,l=i.level+1}if(s.hasOwnProperty("level")||(s.level=l),s.checkboxState="uncheck",(t.isNullOrUndefined(s[this.parent.parentIdMapping])||s.parentItem)&&this.parent.flatData.push(s),this.isSelfReference||0!==s.level||this.parent.parentData.push(s),!t.isNullOrUndefined(s[this.parent.childMapping]&&s[this.parent.childMapping].length)){var h=this.createRecords(s[this.parent.childMapping],s);s.childRecords=h}n.push(s)}return n},e.prototype.dataProcessor=function(e){var i,n=r.getObject("isExport",e),a=r.getObject("expresults",e),s=r.getObject("exportType",e),l=r.getObject("isPrinting",e),p=r.getObject("actionArgs",e),h=r.getObject("requestType",e),c=r.getObject("data",e),u=r.getObject("action",e),g=p,f=this.parent.getPrimaryKeyFieldNames()[0],y=r.getObject("data",g);t.isNullOrUndefined(g)||t.isNullOrUndefined(g.action)||"add"!==g.action||t.isNullOrUndefined(g.data)||!t.isNullOrUndefined(g.data[f])||(g.data[f]=e.result[g.index][f],y.taskData[f]=e.result[g.index][f]),(!t.isNullOrUndefined(p)&&Object.keys(p).length||"save"===h)&&(h=h||p.requestType,c=c||r.getObject("data",p),u=u||r.getObject("action",p),"Batch"===this.parent.editSettings.mode&&(this.batchChanges=this.parent.grid.editModule.getBatchChanges()),("add"===u||"batchsave"===h&&"Batch"===this.parent.editSettings.mode&&this.batchChanges[this.addedRecords].length)&&(this.parent.grid.currentViewData=e.result),this.parent.isLocalData&&this.updateAction(c,u,h));var m=(i=n&&!t.isNullOrUndefined(a)?a:d(this.parent)?t.getValue("result",this.parent.grid.dataSource):this.parent.grid.dataSource)instanceof o.DataManager?i.dataSource.json:i,v=d(this.parent)?t.getValue("count",this.parent.dataSource):m.length;if(this.parent.grid.allowFiltering&&this.parent.grid.filterSettings.columns.length||this.parent.grid.searchSettings.key.length>0){var w=new o.Query,R=r.getObject("query",e);t.isNullOrUndefined(R)&&(R=new o.Query,R=t.getValue("grid.renderModule.data",this.parent).filterQuery(R),R=t.getValue("grid.renderModule.data",this.parent).searchQuery(R));var C=R.queries.filter((function(e){return"onWhere"===e.fn})),x=R.queries.filter((function(e){return"onSearch"===e.fn}));w.queries=C.concat(x);var S=new o.DataManager(m).executeLocal(w);this.parent.notify("updateFilterRecs",{data:S}),m=this.dataResults.result,this.dataResults.result=null,this.parent.grid.aggregates.length>0&&(I=r.getObject("query",e),t.isNullOrUndefined(R)&&(R=t.getValue("grid.renderModule.data",this.parent).aggregateQuery(new o.Query)),t.isNullOrUndefined(I)||(A=I.queries.filter((function(e){return"onAggregates"===e.fn})),m=this.parent.summaryModule.calculateSummaryValue(A,m,!0)))}if(this.parent.grid.aggregates.length&&0===this.parent.grid.sortSettings.columns.length&&0===this.parent.grid.filterSettings.columns.length&&!this.parent.grid.searchSettings.key.length&&(R=r.getObject("query",e),t.isNullOrUndefined(R)&&(R=t.getValue("grid.renderModule.data",this.parent).aggregateQuery(new o.Query)),A=R.queries.filter((function(e){return"onAggregates"===e.fn})),m=this.parent.summaryModule.calculateSummaryValue(A,this.parent.flatData,!0)),this.parent.grid.sortSettings.columns.length>0||this.isSortAction){this.isSortAction=!1;var b;b=this.parent.parentData;for(var I=r.getObject("query",e),D=new o.Query,M=this.parent.grid.sortSettings.columns.length-1;M>=0;M--){var P=this.parent.getColumnByField(this.parent.grid.sortSettings.columns[M].field),O=P.sortComparer&&!this.isRemote()?P.sortComparer.bind(P):this.parent.grid.sortSettings.columns[M].direction;D.sortBy(this.parent.grid.sortSettings.columns[M].field,O)}var E={modifiedData:new o.DataManager(b).executeLocal(D),filteredData:m,srtQry:D};if(this.parent.notify("createSort",E),m=E.modifiedData,this.dataResults.result=null,this.sortedData=m,this.parent.notify("updateModel",{}),this.parent.grid.aggregates.length>0&&!t.isNullOrUndefined(I)){var A=r.getObject("query",e).queries.filter((function(e){return"onAggregates"===e.fn}));m=this.parent.summaryModule.calculateSummaryValue(A,this.sortedData,!1)}}v=d(this.parent)?t.getValue("count",this.parent.dataSource):m.length;var k=this.paging(m,v,n,l,s,e);m=k.result,v=k.count,e.result=m,e.count=v,this.parent.notify("updateResults",e)},e.prototype.paging=function(e,r,i,n,o,a){return!this.parent.allowPaging||i&&"CurrentPage"!==o||n&&"CurrentPage"!==this.parent.printMode?!this.parent.enableVirtualization||i&&"CurrentPage"!==o||(this.parent.notify("pagingActions",{result:e,count:r,actionArgs:t.getValue("actionArgs",a)}),e=this.dataResults.result,r=this.dataResults.count):(this.parent.notify("pagingActions",{result:e,count:r}),e=this.dataResults.result,r=d(this.parent)?t.getValue("count",this.parent.dataSource):this.dataResults.count),{result:e,count:r}},e.prototype.updateData=function(e){this.dataResults=e},e.prototype.updateAction=function(e,t,r){"delete"!==r&&"save"!==r||this.parent.notify("crudAction",{value:e,action:t||r}),"batchsave"===r&&"Batch"===this.parent.editSettings.mode&&this.parent.notify("batchSave",{})},e}();!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e[e.Cancel=4]="Cancel",e[e.Search=5]="Search",e[e.ExpandAll=6]="ExpandAll",e[e.CollapseAll=7]="CollapseAll",e[e.ExcelExport=8]="ExcelExport",e[e.PdfExport=9]="PdfExport",e[e.CsvExport=10]="CsvExport",e[e.Print=11]="Print",e[e.RowIndent=12]="RowIndent",e[e.RowOutdent=13]="RowOutdent"}(e.ToolbarItem||(e.ToolbarItem={})),function(e){e[e.AutoFit=0]="AutoFit",e[e.AutoFitAll=1]="AutoFitAll",e[e.SortAscending=2]="SortAscending",e[e.SortDescending=3]="SortDescending",e[e.Edit=4]="Edit",e[e.Delete=5]="Delete",e[e.Save=6]="Save",e[e.Cancel=7]="Cancel",e[e.PdfExport=8]="PdfExport",e[e.ExcelExport=9]="ExcelExport",e[e.CsvExport=10]="CsvExport",e[e.FirstPage=11]="FirstPage",e[e.PrevPage=12]="PrevPage",e[e.LastPage=13]="LastPage",e[e.NextPage=14]="NextPage",e[e.AddRow=15]="AddRow"}(e.ContextMenuItems||(e.ContextMenuItems={}));var Q,W,K,Y,J,X,Z,$,ee,te=(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),re=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},ie=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return te(r,e),re([t.Property(12)],r.prototype,"pageSize",void 0),re([t.Property(8)],r.prototype,"pageCount",void 0),re([t.Property(1)],r.prototype,"currentPage",void 0),re([t.Property()],r.prototype,"totalRecordsCount",void 0),re([t.Property(!1)],r.prototype,"enableQueryString",void 0),re([t.Property(!1)],r.prototype,"pageSizes",void 0),re([t.Property(null)],r.prototype,"template",void 0),re([t.Property("All")],r.prototype,"pageSizeMode",void 0),r}(t.ChildProperty),ne=($=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),oe=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},ae=function(e){function i(){var r=null!==e&&e.apply(this,arguments)||this;return r.intl=new t.Internationalization,r.templateFn={},r}return ne(i,e),i.prototype.setFormatter=function(e){this.format&&(this.format.skeleton||this.format.format)&&(this.formatFn=this.getFormatFunction(this.format))},i.prototype.getFormatFunction=function(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},i.prototype.getFormatter=function(){return this.formatFn},i.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[t.getEnumValue(r.CellType,r.CellType.Summary)]={fn:t.compile(this.footerTemplate,e),property:"footerTemplate"})},i.prototype.getTemplate=function(e){return this.templateFn[t.getEnumValue(r.CellType,e)]},i.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},oe([t.Property()],i.prototype,"type",void 0),oe([t.Property()],i.prototype,"footerTemplate",void 0),oe([t.Property()],i.prototype,"field",void 0),oe([t.Property()],i.prototype,"format",void 0),oe([t.Property()],i.prototype,"columnName",void 0),oe([t.Property()],i.prototype,"customAggregate",void 0),i}(t.ChildProperty),se=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return ne(r,e),oe([t.Collection([],ae)],r.prototype,"columns",void 0),oe([t.Property(!0)],r.prototype,"showChildSummary",void 0),r}(t.ChildProperty),de=(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),le=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},pe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return de(r,e),le([t.Property(!1)],r.prototype,"allowAdding",void 0),le([t.Property(!1)],r.prototype,"allowEditing",void 0),le([t.Property(!1)],r.prototype,"allowDeleting",void 0),le([t.Property("Cell")],r.prototype,"mode",void 0),le([t.Property("Top")],r.prototype,"newRowPosition",void 0),le([t.Property(!0)],r.prototype,"allowEditOnDblClick",void 0),le([t.Property(!0)],r.prototype,"showConfirmDialog",void 0),le([t.Property(!1)],r.prototype,"showDeleteConfirmDialog",void 0),le([t.Property("")],r.prototype,"template",void 0),le([t.Property({})],r.prototype,"dialog",void 0),r}(t.ChildProperty),he=(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ce=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},ue=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return he(r,e),ce([t.Property()],r.prototype,"field",void 0),ce([t.Property()],r.prototype,"direction",void 0),r}(t.ChildProperty),ge=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return he(r,e),ce([t.Collection([],ue)],r.prototype,"columns",void 0),ce([t.Property(!0)],r.prototype,"allowUnsort",void 0),r}(t.ChildProperty),fe=(J=function(e,t){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ye=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},me=function(i){function n(e,n){var o=i.call(this,e,n)||this;return o.dataResults={},o.uniqueIDCollection={},o.uniqueIDFilterCollection={},o.changedRecords="changedRecords",o.deletedRecords="deletedRecords",o.addedRecords="addedRecords",l.Inject(U),t.setValue("mergePersistData",o.mergePersistTreeGridData,o),o.grid=new r.Grid,o}var l;return fe(n,i),l=n,n.prototype.excelExport=function(e,r,i,n){return t.isBlazor()?(this.excelExportModule.Map(e,r,i,n,!1),null):this.excelExportModule.Map(e,r,i,n,!1)},n.prototype.csvExport=function(e,r,i,n){return t.isBlazor()?(this.excelExportModule.Map(e,r,i,n,!0),null):this.excelExportModule.Map(e,r,i,n,!0)},n.prototype.pdfExport=function(e,r,i,n){return t.isBlazor()?(this.pdfExportModule.Map(e,r,i,n),null):this.pdfExportModule.Map(e,r,i,n)},n.prototype.getModuleName=function(){return"treegrid"},n.prototype.preRender=function(){this.TreeGridLocale(),this.initProperties(),this.defaultLocale={Above:"Above",Below:"Below",AddRow:"Add Row",ExpandAll:"Expand All",CollapseAll:"Collapse All",RowIndent:"Indent",RowOutdent:"Outdent"},this.isSelfReference&&t.isNullOrUndefined(this.childMapping)&&(this.childMapping="Children")},n.prototype.sortByColumn=function(e,t,r){this.sortModule.sortColumn(e,t,r)},n.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},n.prototype.removeSortColumn=function(e){this.sortModule.removeSortColumn(e)},n.prototype.search=function(e){this.grid.search(e)},n.prototype.autoFitColumns=function(e){this.resizeModule.autoFitColumns(e),this.updateColumnModel()},n.prototype.reorderColumns=function(e,t){this.grid.reorderColumns(e,t)},n.prototype.TreeGridLocale=function(){var e,i,n,o=t.L10n.locale;e={},t.setValue(this.locale,{},e),i=r.getObject(this.locale,o),n=r.getObject(this.getModuleName(),i),t.setValue("grid",n,r.getObject(this.locale,e)),t.L10n.load(e)},n.prototype.print=function(){this.printModule.print()},n.prototype.treeGridkeyActionHandler=function(e){if(this.allowKeyboard)switch(e.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"ctrlShiftUpArrow":var r=e.target.closest(".e-rowcell").closest("tr");this.expandCollapseRequest(r.querySelector(".e-treegridexpand"));break;case"ctrlShiftDownArrow":var i=e.target.closest(".e-rowcell").closest("tr");this.expandCollapseRequest(i.querySelector(".e-treegridcollapse"));break;case"downArrow":var n=e.target.parentElement,o=this.findnextRowElement(n);if(null!==o){var a=o.rowIndex;this.selectRow(a);var s=e.target.cellIndex,d=o.children[s];t.addClass([d],"e-focused"),t.addClass([d],"e-focus")}else this.clearSelection();break;case"upArrow":var l=e.target.parentElement,p=this.findPreviousRowElement(l);if(null!==p){var h=p.rowIndex;this.selectRow(h);var c=e.target.cellIndex,u=p.children[c];t.addClass([u],"e-focused"),t.addClass([u],"e-focus")}else this.clearSelection()}},n.prototype.findnextRowElement=function(e){var t=e.nextElementSibling;return null===t||-1===t.className.indexOf("e-summaryrow")&&"none"!==t.style.display||(t=this.findnextRowElement(t)),t},n.prototype.findPreviousRowElement=function(e){var t=e.previousSibling;return null===t||-1===t.className.indexOf("e-summaryrow")&&"none"!==t.style.display||(t=this.findPreviousRowElement(t)),t},n.prototype.initProperties=function(){this.defaultLocale={},this.flatData=[],this.parentData=[],this.columnModel=[],this.isExpandAll=!1,this.isCollapseAll=!1,this.keyConfigs={ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",downArrow:"downArrow",upArrow:"upArrow"},this.isLocalData=!(this.dataSource instanceof o.DataManager)||this.dataSource.dataSource.offline||!t.isNullOrUndefined(this.dataSource.ready)||this.dataSource.adaptor instanceof o.RemoteSaveAdaptor,this.isSelfReference=!t.isNullOrUndefined(this.parentIdMapping)},n.prototype.wireEvents=function(){t.EventHandler.add(this.grid.element,"click",this.mouseClickHandler,this),t.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this),this.keyboardModule=new t.KeyboardEvents(this.element,{keyAction:this.treeGridkeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex)},n.prototype.requiredModules=function(){var e=[];return this.isDestroyed||(e.push({member:"filter",args:[this,this.filterSettings]}),t.isNullOrUndefined(this.toolbar)||e.push({member:"toolbar",args:[this]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this]}),this.aggregates.length>0&&e.push({member:"summary",args:[this]}),e.push({member:"resize",args:[this]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this]}),(this.frozenColumns||this.frozenRows||this.getFrozenColumns())&&e.push({member:"freeze",args:[this]}),this.detailTemplate&&e.push({member:"detailRow",args:[this]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this]}),this.allowSelection&&e.push({member:"selection",args:[this]}),this.enableVirtualization&&e.push({member:"virtualScroll",args:[this]})),e},n.prototype.isCommandColumn=function(e){var t=this;return e.some((function(e){return e.columns?t.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate)}))},n.prototype.unwireEvents=function(){t.EventHandler.remove(this.grid.element,"click",this.mouseClickHandler)},n.prototype.render=function(){var e=this;if(a.createSpinner({target:this.element},this.createElement),this.renderModule=new G(this),this.dataModule=new H(this),this.printModule=new T(this),this.isClientRender&&(this.isServerRendered=!1),this.trigger("load"),this.autoGenerateColumns(),this.initialRender=!0,t.isNullOrUndefined(this.dataSource)||this.convertTreeData(this.dataSource),!t.isBlazor()||!this.isServerRendered){this.loadGrid(),this.element.classList.contains("e-treegrid")&&this.rowDropSettings.targetID&&(this.grid.rowDropSettings.targetID+="_gridcontrol"),this.addListener();var i=t.createElement("div",{id:this.element.id+"_gridcontrol"});t.addClass([this.element],"e-treegrid"),t.isNullOrUndefined(this.height)||"string"!=typeof this.height||-1===this.height.indexOf("%")||(this.element.style.height=this.height),t.isNullOrUndefined(this.width)||"string"!=typeof this.width||-1===this.width.indexOf("%")||(this.element.style.width=this.width),this.element.appendChild(i),this.grid.appendTo(i),this.wireEvents()}this.renderComplete();var n=this.grid.destroyTemplate;if(this.grid.destroyTemplate=function(t){n.apply(e.grid),e.clearTemplate(t)},t.isBlazor()&&this.isServerRendered){r.gridObserver.on("component-rendered",(function t(r){return e.gridRendered(r,t)}),this)}},n.prototype.afterGridRender=function(){t.isNullOrUndefined(this.grid.clipboardModule)||this.grid.clipboardModule.destroy(),this.clipboardModule=this.grid.clipboardModule=new N(this)},n.prototype.gridRendered=function(e,t){if(e.id===this.element.id+"_gridcontrol"){this.grid=e.grid,this.grid.query.queries=[],this.isServerRendered||(this.grid.isJsComponent=!0),this.setBlazorGUID(),this.setColIndex(this.grid.columns),this.bindGridEvents(),this.grid.on("colgroup-refresh",this.selectionModule.headerCheckbox,this.selectionModule);for(var i=0;i<this.columns.length;i++)this.columns[i].uid=this.grid.columns[i].uid;this.wireEvents(),this.afterGridRender(),this.grid.processModel(),r.gridObserver.off("component-rendered",this.gridRendered)}},n.prototype.setColIndex=function(e,r){void 0===r&&(r=0);for(var i=0,n=e.length;i<n;i++)e[i].columns?(e[i].index=t.isNullOrUndefined(e[i].index)?r:e[i].index,r++,r=this.setColIndex(e[i].columns,r)):(e[i].index=t.isNullOrUndefined(e[i].index)?r:e[i].index,r++);return r},n.prototype.setBlazorGUID=function(){for(this.editSettings&&(this.grid.editSettings.guid=this.editSettings.guid,this.grid.editSettings.template=this.editSettings.template),t=0;t<this.aggregates.length;t++)for(var e=0;e<this.aggregates[t].columns.length;e++)this.grid.aggregates[t].columns[e].guid=this.aggregates[t].columns[e].guid;for(var t=0;t<this.columns.length;t++)this.grid.columns[t].guid=this.columns[t].guid},n.prototype.convertTreeData=function(e){var r=this;if(e instanceof Array&&e.length>0&&e[0].hasOwnProperty("level"))this.flatData=d(this)?t.getValue("result",e):e,this.flatData.filter((function(e){t.setValue("uniqueIDCollection."+e.uniqueID,e,r),0===e.level&&r.parentData.push(e)}));else if(d(this)){var i=t.getValue("result",this.dataSource);this.dataModule.convertToFlatData(i)}else this.dataModule.convertToFlatData(e)},n.prototype.bindGridProperties=function(){this.bindedDataSource(),this.grid.enableRtl=this.enableRtl,this.grid.allowKeyboard=this.allowKeyboard,this.grid.columns=this.getGridColumns(this.columns),this.grid.allowExcelExport=this.allowExcelExport,this.grid.allowPdfExport=this.allowPdfExport,this.grid.query=this.query,this.grid.columnQueryMode=this.columnQueryMode,this.grid.allowPaging=this.allowPaging,this.grid.pageSettings=r.getActualProperties(this.pageSettings),this.grid.pagerTemplate=this.pagerTemplate,this.grid.showColumnMenu=this.showColumnMenu,this.grid.allowSorting=this.allowSorting,this.grid.allowFiltering=this.allowFiltering,this.grid.enableVirtualization=this.enableVirtualization,this.grid.width=this.width,this.grid.height=this.height,this.grid.enableAltRow=this.enableAltRow,this.grid.allowReordering=this.allowReordering,this.grid.allowTextWrap=this.allowTextWrap,this.grid.allowResizing=this.allowResizing,this.grid.enableHover=this.enableHover,this.grid.enableAutoFill=this.enableAutoFill,this.grid.allowRowDragAndDrop=this.allowRowDragAndDrop,this.grid.rowDropSettings=r.getActualProperties(this.rowDropSettings),this.grid.rowHeight=this.rowHeight,this.grid.gridLines=this.gridLines,this.grid.allowSelection=this.allowSelection,this.grid.toolbar=r.getActualProperties(this.getGridToolbar()),this.grid.toolbarTemplate=this.toolbarTemplate,this.grid.filterSettings=r.getActualProperties(this.filterSettings),this.grid.selectionSettings=r.getActualProperties(this.selectionSettings),this.grid.sortSettings=r.getActualProperties(this.sortSettings),this.grid.searchSettings=r.getActualProperties(this.searchSettings),this.grid.aggregates=r.getActualProperties(this.aggregates),this.grid.textWrapSettings=r.getActualProperties(this.textWrapSettings),this.grid.printMode=r.getActualProperties(this.printMode),this.grid.locale=r.getActualProperties(this.locale),this.grid.selectedRowIndex=this.selectedRowIndex,this.grid.contextMenuItems=r.getActualProperties(this.getContextMenu()),this.grid.columnMenuItems=r.getActualProperties(this.columnMenuItems),this.grid.editSettings=this.getGridEditSettings(),this.grid.rowTemplate=r.getActualProperties(this.rowTemplate),this.grid.detailTemplate=r.getActualProperties(this.detailTemplate),this.grid.frozenRows=this.frozenRows,this.grid.frozenColumns=this.frozenColumns,this.grid.templateDotnetInstance=this.templateDotnetInstance,this.grid.isJsComponent=!0},n.prototype.triggerEvents=function(e){this.trigger(r.getObject("name",e),e)},n.prototype.bindGridEvents=function(){var e=this,r=this;this.grid.rowSelecting=this.triggerEvents.bind(this),this.grid.rowSelected=function(i){t.isBlazor()||(e.selectedRowIndex=e.grid.selectedRowIndex),r.notify("rowSelected",i),e.trigger("rowSelected",i)},this.grid.rowDeselected=function(r){e.selectedRowIndex=e.grid.selectedRowIndex,t.isBlazor()&&!e.isServerRendered&&(r.data=r.data[r.data.length-1],r.rowIndex=r.rowIndex[r.rowIndex.length-1],r.row=r.row[r.row.length-1]),e.trigger("rowDeselected",r)},this.grid.resizeStop=function(t){e.updateColumnModel(),e.trigger("resizeStop",t)},this.grid.excelQueryCellInfo=function(t){e.notify("excelCellInfo",t),t=e.dataResults},this.grid.pdfQueryCellInfo=function(t){e.notify("pdfCellInfo",t),t=e.dataResults},this.grid.checkBoxChange=function(t){e.trigger("checkboxChange",t)},this.grid.pdfExportComplete=this.triggerEvents.bind(this),this.grid.excelExportComplete=this.triggerEvents.bind(this),this.grid.excelHeaderQueryCellInfo=this.triggerEvents.bind(this),this.grid.pdfHeaderQueryCellInfo=this.triggerEvents.bind(this),this.grid.dataSourceChanged=this.triggerEvents.bind(this),this.grid.recordDoubleClick=this.triggerEvents.bind(this),this.grid.rowDeselecting=this.triggerEvents.bind(this),this.grid.cellDeselected=this.triggerEvents.bind(this),this.grid.cellDeselecting=this.triggerEvents.bind(this),this.grid.columnMenuOpen=this.triggerEvents.bind(this),this.grid.columnMenuClick=this.triggerEvents.bind(this),this.grid.cellSelected=this.triggerEvents.bind(this),this.grid.headerCellInfo=this.triggerEvents.bind(this),this.grid.resizeStart=this.triggerEvents.bind(this),this.grid.resizing=this.triggerEvents.bind(this),this.grid.columnDrag=this.triggerEvents.bind(this),this.grid.columnDragStart=this.triggerEvents.bind(this),this.grid.columnDrop=this.triggerEvents.bind(this),this.grid.beforePrint=this.triggerEvents.bind(this),this.grid.beforeCopy=this.triggerEvents.bind(this),this.grid.beforePaste=function(t){for(var r=e.getRows();r[t.rowIndex].classList.contains("e-summaryrow");)t.rowIndex++;e.trigger("beforePaste",t)},this.grid.load=function(){r.grid.on("initial-end",r.afterGridRender,r)},this.grid.printComplete=this.triggerEvents.bind(this),this.grid.actionFailure=this.triggerEvents.bind(this),this.extendedGridDataBoundEvent(),this.extendedGridEvents(),this.extendedGridActionEvents(),this.extendedGridEditEvents(),this.bindGridDragEvents(),this.bindCallBackEvents()},n.prototype.extendedGridDataBoundEvent=function(){var e=this,i=this;this.grid.dataBound=function(i){if(e.updateRowTemplate(i),e.updateColumnModel(),e.updateAltRow(e.getRows()),e.notify("dataBoundArg",i),e.trigger("dataBound",i),s(e)&&!g(e)&&!e.hasChildMapping){var n=r.getObject("dataSource.requests",e).filter((function(e){return"OK"!==e.httpRequest.statusText})).length;t.setValue("grid.contentModule.isLoaded",!(n>0),e)}e.initialRender=!1},this.grid.beforeDataBound=function(e){var n=r.getObject("action",e);if(s(i)&&!g(i)&&"edit"!==n)i.notify("updateRemoteLevel",e),e=i.dataResults;else if(0===i.flatData.length&&g(i)&&i.dataSource instanceof o.DataManager){var a=i.dataSource;i.dataModule.convertToFlatData(a.dataSource.json),e.result=i.grid.dataSource.dataSource.json=i.flatData}if(s(i)||d(this)||t.isNullOrUndefined(i.dataSource)||(this.isPrinting&&t.setValue("isPrinting",!0,e),i.notify("dataProcessor",e)),t.extend(e,i.dataResults),!this.isPrinting){var l=new o.Deferred;return i.trigger("beforeDataBound",e,(function(e){l.resolve(e)})),l}}},n.prototype.bindCallBackEvents=function(){var e,i=this;t.isBlazor()&&this.isServerRendered&&(t.isNullOrUndefined(this.grid.beginEdit)||"bound triggerEJEvents"!==this.grid.beginEdit.name||(e=this.grid.beginEdit)),this.grid.toolbarClick=function(e){var t=new o.Deferred;return i.trigger("toolbarClick",e,(function(r){r.cancel||i.notify("toolbarClick",e),t.resolve(r)})),t},this.grid.cellSelecting=function(e){var t=new o.Deferred;return i.trigger(r.getObject("name",e),e,(function(e){t.resolve(e)})),t},this.grid.beginEdit=function(r){t.isBlazor()&&i.isServerRendered&&e&&"function"==typeof e&&"bound triggerEJEvents"===e.name&&e.apply(i,[r]);var n=new o.Deferred;return i.trigger("beginEdit",r,(function(e){n.resolve(e)})),n}},n.prototype.extendedGridEditEvents=function(){var e,r=this;if(t.isBlazor()&&this.isServerRendered&&(t.isNullOrUndefined(this.grid.cellEdit)||"bound triggerEJEvents"!==this.grid.cellEdit.name||(e=this.grid.cellEdit)),this.editModule&&t.isBlazor()&&this.isServerRendered){this.grid.on("key-pressed",this.editModule.keyPressed,this.editModule);var i=this.grid.localObserver.boundedEvents["key-pressed"];i.splice(0,0,i.pop())}this.grid.dataStateChange=function(e){r.isExpandRefresh?(r.isExpandRefresh=!1,r.grid.dataSource={result:r.flatData,count:t.getValue("count",r.grid.dataSource)}):r.trigger("dataStateChange",e)},this.grid.cellSave=function(e){if(r.grid.isContextMenuOpen()){var i;i=r.grid.contextMenuModule.contextMenu.element.getElementsByClassName("e-selected")[0],(t.isNullOrUndefined(i)||i.id!==r.element.id+"_gridcontrol_cmenu_Save")&&(e.cancel=!0)}var n=new o.Deferred;return r.trigger("cellSave",e,(function(e){t.isBlazor()&&!r.isServerRendered&&(e.cell=t.getElement(e.cell)),e.cancel||r.notify("cellSave",e),n.resolve(e)})),n},this.grid.cellSaved=function(e){r.trigger("cellSaved",e),r.notify("cellSaved",e)},this.grid.cellEdit=function(i){t.isBlazor()&&r.isServerRendered&&e&&"function"==typeof e&&"bound triggerEJEvents"===e.name&&e.apply(r,[i]);var n=new o.Deferred;return i.promise=n,r.notify("cellEdit",i),n},this.grid.batchAdd=function(e){r.trigger("batchAdd",e),r.notify("batchAdd",e)},this.grid.beforeBatchSave=function(e){r.trigger("beforeBatchSave",e),r.notify("beforeBatchSave",e)},this.grid.beforeBatchAdd=function(e){r.trigger("beforeBatchAdd",e),r.notify("beforeBatchAdd",e)},this.grid.batchDelete=function(e){r.trigger("batchDelete",e),r.notify("batchDelete",e)},this.grid.beforeBatchDelete=function(e){r.trigger("beforeBatchDelete",e),r.notify("beforeBatchDelete",e)},this.grid.batchCancel=function(e){"Cell"!==r.editSettings.mode&&r.trigger("batchCancel",e),r.notify("batchCancel",e)}},n.prototype.updateRowTemplate=function(e){var r=this;t.isBlazor()&&!this.isServerRendered?setTimeout((function(){r.treeColumnRowTemplate(e)}),1e3):this.treeColumnRowTemplate(e)},n.prototype.bindedDataSource=function(){if(this.dataSource&&d(this)){var e=this.flatData,r=t.getValue("count",this.dataSource);this.grid.dataSource={result:e,count:r}}else this.grid.dataSource=this.dataSource instanceof o.DataManager?new o.DataManager(this.dataSource.dataSource,this.dataSource.defaultQuery,this.dataSource.adaptor):this.flatData;if(t.isBlazor()&&this.dataSource instanceof o.DataManager&&(this.grid.dataSource.adaptorName=this.dataSource.adaptorName,this.grid.dataSource.dotnetInstance=this.dataSource.dotnetInstance,this.grid.dataSource.key=this.dataSource.key),this.dataSource instanceof o.DataManager&&(this.dataSource.dataSource.offline||this.dataSource.ready)){this.grid.dataSource.dataSource.json=f(this.dataSource.dataSource.json),this.grid.dataSource.ready=this.dataSource.ready;var i=this.grid.dataSource;t.isNullOrUndefined(this.grid.dataSource.ready)||this.grid.dataSource.ready.then((function(e){i.dataSource.offline=!0,i.isDataAvailable=!0,i.dataSource.json=e.result,i.adaptor=new o.JsonAdaptor}))}},n.prototype.extendedGridActionEvents=function(){var e,i=this;t.isBlazor()&&this.isServerRendered&&(t.isNullOrUndefined(this.grid.actionComplete)||"bound triggerEJEvents"!==this.grid.actionComplete.name||(e=this.grid.actionComplete)),this.grid.actionBegin=function(e){"sorting"===e.requestType&&e.target&&e.target.parentElement&&e.target.parentElement.classList.contains("e-hierarchycheckbox")&&(e.cancel=!0),"reorder"===r.getObject("requestType",e)&&i.notify("getColumnIndex",{}),i.notify("actionBegin",{editAction:e}),s(i)||t.isNullOrUndefined(i.filterModule)||d(i)||0!==i.grid.filterSettings.columns.length&&0!==i.grid.searchSettings.key.length||(i.notify("clearFilters",{flatData:i.grid.dataSource}),i.grid.dataSource=i.dataResults.result);var n=new o.Deferred;return t.isBlazor()&&"delete"===e.requestType&&!i.isServerRendered&&(e.data=e.data[0]),i.trigger("actionBegin",e,(function(e){t.isBlazor()&&"delete"===e.requestType&&!i.isServerRendered&&(e.data=[e.data]),e.cancel||i.notify("beginEdit",e),t.isBlazor()&&"beginEdit"===e.requestType&&!i.isServerRendered&&(e.row=t.getElement(e.row)),n.resolve(e)})),n},this.grid.actionComplete=function(r){if(t.isBlazor()&&i.isServerRendered){for(var n=i.getRows(),o=0;o<n.length;o++){(n[o].classList.contains("e-treerowcollapsed")||n[o].classList.contains("e-treerowexpanded"))&&(i.enableCollapseAll&&"paging"===r.requestType?t.removeClass([n[o]],"e-treerowexpanded"):t.removeClass([n[o]],"e-treerowcollapsed"),i.enableCollapseAll&&"paging"===r.requestType?t.addClass([n[o]],"e-treerowcollapsed"):t.addClass([n[o]],"e-treerowexpanded"));var a=n[o].querySelectorAll(".e-rowcell"),s=a[i.treeColumnIndex].getElementsByClassName("e-treegridcollapse")[0]||a[i.treeColumnIndex].getElementsByClassName("e-treegridexpand")[0];s&&(i.enableCollapseAll&&"paging"===r.requestType?t.removeClass([s],"e-treegridexpand"):t.removeClass([s],"e-treegridcollapse"),i.enableCollapseAll&&"paging"===r.requestType?t.addClass([s],"e-treegridcollapse"):t.addClass([s],"e-treegridexpand"))}e&&"function"==typeof e&&"bound triggerEJEvents"===e.name&&e.apply(i,[r])}i.notify("actioncomplete",r),i.updateColumnModel(),i.updateTreeGridModel(),"reorder"===r.requestType&&i.notify("setColumnIndex",{}),i.notify("actionComplete",{editAction:r}),"add"===r.requestType&&"Top"!==i.editSettings.newRowPosition&&"Bottom"!==i.editSettings.newRowPosition&&i.notify("beginAdd",r),"batchsave"===r.requestType&&i.notify("batchSave",r),i.notify("updateGridActions",r),t.isBlazor()&&"delete"===r.requestType&&!i.isServerRendered&&(r.data=r.data[0]),i.trigger("actionComplete",r)}},n.prototype.extendedGridEvents=function(){var e=this,r=this;this.grid.recordDoubleClick=function(t){e.trigger("recordDoubleClick",t),e.notify("recordDoubleClick",t)},this.grid.detailDataBound=function(t){e.notify("detaildataBound",t),e.trigger("detailDataBound",t)},this.grid.rowDataBound=function(e){t.isNullOrUndefined(this.isPrinting)?t.setValue("isPrinting",!1,e):t.setValue("isPrinting",this.isPrinting,e),r.renderModule.RowModifier(e)},this.grid.queryCellInfo=function(e){t.isNullOrUndefined(this.isPrinting)?t.setValue("isPrinting",!1,e):t.setValue("isPrinting",this.isPrinting,e),r.renderModule.cellRender(e)},this.grid.contextMenuClick=function(t){e.notify("contextMenuClick",t),e.trigger("contextMenuClick",t)},this.grid.contextMenuOpen=function(t){e.notify("contextMenuOpen",t),e.trigger("contextMenuOpen",t)},this.grid.queryCellInfo=function(t){e.renderModule.cellRender(t)}},n.prototype.bindGridDragEvents=function(){var e=this,t=this;this.grid.rowDragStartHelper=function(e){t.trigger("rowDragStartHelper",e)},this.grid.rowDragStart=function(e){t.trigger("rowDragStart",e)},this.grid.rowDrag=function(r){e.grid.isEdit?r.cancel=!0:(t.notify("row-draging",r),t.trigger("rowDrag",r))},this.grid.rowDrop=function(r){e.grid.isEdit||t.notify("row-dropped",r),r.cancel=!0}},n.prototype.loadGrid=function(){this.bindGridProperties(),this.bindGridEvents(),t.setValue("registeredTemplate",this.registeredTemplate,this.grid),t.setValue("viewContainerRef",this.viewContainerRef,this.grid)},n.prototype.autoGenerateColumns=function(){if(!this.columns.length&&!this.dataModule.isRemote()&&Object.keys(this.dataSource).length){var e;e=this.dataSource[0];for(var t=Object.keys(e),r=0;r<t.length;r++)-1===[this.childMapping,this.parentIdMapping].indexOf(t[r])&&this.columns.push(t[r])}},n.prototype.getGridEditSettings=function(){var e={};switch(e.allowAdding=this.editSettings.allowAdding,e.allowEditing=this.editSettings.allowEditing,e.allowDeleting=this.editSettings.allowDeleting,e.newRowPosition="Bottom"===this.editSettings.newRowPosition?"Bottom":"Top",e.allowEditOnDblClick=this.editSettings.allowEditOnDblClick,e.showConfirmDialog=this.editSettings.showConfirmDialog,e.template=this.editSettings.template,e.showDeleteConfirmDialog=this.editSettings.showDeleteConfirmDialog,e.guid=this.editSettings.guid,e.dialog=this.editSettings.dialog,this.editSettings.mode){case"Dialog":case"Batch":e.mode=this.editSettings.mode;break;case"Row":e.mode="Normal";break;case"Cell":e.mode="Normal",e.showConfirmDialog=!1}return e},n.prototype.getContextMenu=function(){if(this.contextMenuItems){for(var t=[],r=0;r<this.contextMenuItems.length;r++)switch(this.contextMenuItems[r]){case"AddRow":case e.ContextMenuItems.AddRow:t.push({text:"AddRow",target:".e-content",id:this.element.id+"_gridcontrol_cmenu_AddRow",items:[{text:"Above",id:"Above"},{text:"Below",id:"Below"}]});break;default:t.push(this.contextMenuItems[r])}return t}return null},n.prototype.getGridToolbar=function(){if(this.toolbar){this.l10n=new t.L10n("treegrid",this.defaultLocale,this.locale);for(var r=[],i=0;i<this.toolbar.length;i++)switch(this.toolbar[i]){case"Search":case e.ToolbarItem.Search:r.push("Search");break;case"Print":case e.ToolbarItem.Print:r.push("Print");break;case"ExpandAll":case e.ToolbarItem.ExpandAll:var n=this.l10n.getConstant("ExpandAll");r.push({text:n,tooltipText:n,prefixIcon:"e-expand",id:this.element.id+"_gridcontrol_expandall"});break;case"CollapseAll":case e.ToolbarItem.CollapseAll:var o=this.l10n.getConstant("CollapseAll");r.push({text:o,tooltipText:o,prefixIcon:"e-collapse",id:this.element.id+"_gridcontrol_collapseall"});break;case"Indent":case e.ToolbarItem.RowIndent:var a=this.l10n.getConstant("RowIndent");r.push({text:a,tooltipText:a,prefixIcon:"e-indent",id:this.element.id+"_gridcontrol_indent"});break;case"Outdent":case e.ToolbarItem.RowOutdent:var s=this.l10n.getConstant("RowOutdent");r.push({text:s,tooltipText:s,prefixIcon:"e-outdent",id:this.element.id+"_gridcontrol_outdent"});break;default:r.push(this.toolbar[i])}return r}return null},n.prototype.getGridColumns=function(e){var t=e;this.columnModel=[];for(var r,i,n=[],o=0;o<t.length;o++){if(i=this.grid.getColumnByUid(t[o].uid)||{},r={},"string"==typeof this.columns[o])i.field=r.field=this.columns[o];else for(var a=0,s=Object.keys(t[o]);a<s.length;a++){var d=s[a];i[d]=r[d]=t[o][d]}t[o].columns?this.getGridColumns(e[o].columns):this.columnModel.push(new M(r)),n.push(i)}return n},n.prototype.onPropertyChanged=function(e,i){for(var n=!1,a=0,s=Object.keys(e);a<s.length;a++){var l=s[a];switch(l){case"columns":this.grid.columns=this.getGridColumns(this.columns);break;case"treeColumnIndex":this.grid.refreshColumns();break;case"allowPaging":this.grid.allowPaging=this.allowPaging;break;case"pageSettings":this.grid.pageSettings=r.getActualProperties(this.pageSettings),n=!0;break;case"enableVirtualization":this.grid.enableVirtualization=this.enableVirtualization;break;case"toolbar":this.grid.toolbar=this.getGridToolbar();break;case"allowSelection":this.grid.allowSelection=this.allowSelection;break;case"selectionSettings":this.grid.selectionSettings=r.getActualProperties(this.selectionSettings);break;case"allowSorting":this.grid.allowSorting=this.allowSorting;break;case"allowMultiSorting":this.grid.allowMultiSorting=this.allowMultiSorting;break;case"sortSettings":this.grid.sortSettings=r.getActualProperties(this.sortSettings);break;case"searchSettings":this.grid.searchSettings=r.getActualProperties(this.searchSettings);break;case"allowFiltering":this.grid.allowFiltering=this.allowFiltering;break;case"filterSettings":this.grid.filterSettings=r.getActualProperties(this.filterSettings);break;case"showColumnMenu":this.grid.showColumnMenu=this.showColumnMenu;break;case"allowRowDragAndDrop":this.grid.allowRowDragAndDrop=this.allowRowDragAndDrop;break;case"aggregates":this.grid.aggregates=r.getActualProperties(this.aggregates);break;case"dataSource":if(this.isLocalData=!(this.dataSource instanceof o.DataManager)||!t.isNullOrUndefined(this.dataSource.ready)||this.dataSource.adaptor instanceof o.RemoteSaveAdaptor,this.convertTreeData(this.dataSource),this.isLocalData)if(d(this)){var p=t.getValue("count",this.dataSource);this.grid.dataSource={result:this.flatData,count:p}}else this.grid.dataSource=this.flatData;else this.bindedDataSource(),this.enableVirtualization&&(this.grid.contentModule.removeEventListener(),this.grid.contentModule.eventListener("on"),this.grid.contentModule.renderTable());break;case"query":this.grid.query=this.query;break;case"enableCollapseAll":e[l]?this.collapseAll():this.expandAll();break;case"expandStateMapping":this.refresh();break;case"gridLines":this.grid.gridLines=this.gridLines;break;case"rowTemplate":this.grid.rowTemplate=r.getActualProperties(this.rowTemplate);break;case"frozenRows":this.grid.frozenRows=this.frozenRows;break;case"frozenColumns":this.grid.frozenColumns=this.frozenColumns;break;case"rowHeight":this.grid.rowHeight=this.rowHeight;break;case"height":t.isNullOrUndefined(this.height)||"string"!=typeof this.height||-1===this.height.indexOf("%")||(this.element.style.height=this.height),this.grid.height=this.height;break;case"width":t.isNullOrUndefined(this.width)||"string"!=typeof this.width||-1===this.width.indexOf("%")||(this.element.style.width=this.width),this.grid.width=this.width;break;case"locale":this.grid.locale=this.locale;break;case"selectedRowIndex":this.grid.selectedRowIndex=this.selectedRowIndex;break;case"enableAltRow":this.grid.enableAltRow=this.enableAltRow;break;case"enableHover":this.grid.enableHover=this.enableHover;break;case"enableAutoFill":this.grid.enableAutoFill=this.enableAutoFill;break;case"allowExcelExport":this.grid.allowExcelExport=this.allowExcelExport;break;case"allowPdfExport":this.grid.allowPdfExport=this.allowPdfExport;break;case"enableRtl":this.grid.enableRtl=this.enableRtl;break;case"allowReordering":this.grid.allowReordering=this.allowReordering;break;case"allowResizing":this.grid.allowResizing=this.allowResizing;break;case"textWrapSettings":this.grid.textWrapSettings=r.getActualProperties(this.textWrapSettings);break;case"allowTextWrap":this.grid.allowTextWrap=r.getActualProperties(this.allowTextWrap),this.refresh();break;case"contextMenuItems":this.grid.contextMenuItems=this.getContextMenu();break;case"detailTemplate":this.grid.detailTemplate=r.getActualProperties(this.detailTemplate);break;case"columnMenuItems":this.grid.columnMenuItems=r.getActualProperties(this.columnMenuItems);break;case"editSettings":this.grid.isEdit&&"Normal"===this.grid.editSettings.mode&&e[l].mode&&("Cell"===e[l].mode||"Row"===e[l].mode)&&this.grid.closeEdit(),this.grid.editSettings=this.getGridEditSettings()}n&&this.refresh()}},n.prototype.destroy=function(){this.removeListener(),this.unwireEvents(),i.prototype.destroy.call(this),this.grid.destroy(),this.dataModule.destroy();for(var e=["dataModule","sortModule","renderModule","filterModule","printModule","clipboardModule","excelExportModule","pdfExportModule","toolbarModule","summaryModule","reorderModule","resizeModule","pagerModule","keyboardModule","columnMenuModule","contextMenuModule","editModule","virtualScrollModule","selectionModule","detailRow","rowDragAndDropModule","freezeModule"],t=0;t<e.length;t++)this[e[t]]&&(this[e[t]]=null);this.element.innerHTML="",this.grid=null},n.prototype.dataBind=function(){i.prototype.dataBind.call(this),t.isBlazor()&&this.isServerRendered&&(!t.getValue("isRendered",this.grid)||this.initialRender)||this.grid.dataBind()},n.prototype.getPersistData=function(){for(var e=["pageSettings","sortSettings","filterSettings","columns","searchSettings","selectedRowIndex"],t={pageSettings:["template","pageSizes","pageSizeMode","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent","hierarchyMode"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[]},r=0;r<e.length;r++)for(var i=this[e[r]],n=0,o=t[e[r]];n<o.length;n++)delete i[o[n]];return this.ignoreInArrays(["filter","edit","filterBarTemplate","headerTemplate","template","commandTemplate","commands","dataSource"],this.columns),this.addOnPersist(e)},n.prototype.ignoreInArrays=function(e,t){for(var r=0;r<t.length;r++)t[r].columns?(this.ignoreInColumn(e,t[r]),this.ignoreInArrays(e,t[r].columns)):this.ignoreInColumn(e,t[r])},n.prototype.ignoreInColumn=function(e,t){for(var r=0;r<e.length;r++)delete t[e[r]],t.filter={}},n.prototype.mouseClickHandler=function(e){if(t.isNullOrUndefined(e.touches)){var r=e.target;!r.classList.contains("e-treegridexpand")&&!r.classList.contains("e-treegridcollapse")||this.isEditCollapse||this.grid.isEdit||this.expandCollapseRequest(r),this.isEditCollapse=!1,this.notify("checkboxSelection",{target:r})}},n.prototype.getRows=function(){return this.grid.getRows()},n.prototype.getPager=function(){return this.grid.getPager()},n.prototype.addRecord=function(e,t,r){this.editModule&&this.editModule.addRecord(e,t,r)},n.prototype.closeEdit=function(){this.grid.editModule&&this.grid.editModule.closeEdit()},n.prototype.saveCell=function(){this.grid.editModule&&this.grid.editModule.saveCell()},n.prototype.updateCell=function(e,t,r){this.grid.editModule&&this.grid.editModule.updateCell(e,t,r)},n.prototype.updateRow=function(e,t){this.grid.editModule&&this.grid.editModule.updateRow(e,t)},n.prototype.deleteRecord=function(e,t){this.grid.editModule&&this.grid.editModule.deleteRecord(e,t)},n.prototype.startEdit=function(e){this.grid.editModule&&this.grid.editModule.startEdit(e)},n.prototype.editCell=function(e,t){this.editModule&&this.editModule.editCell(e,t)},n.prototype.enableToolbarItems=function(e,t){this.grid.toolbarModule&&this.grid.toolbarModule.enableItems(e,t)},n.prototype.endEdit=function(){this.grid.editModule&&this.grid.editModule.endEdit()},n.prototype.deleteRow=function(e){this.grid.editModule&&this.grid.editModule.deleteRow(e)},n.prototype.getPrimaryKeyFieldNames=function(){return this.grid.getPrimaryKeyFieldNames()},n.prototype.setCellValue=function(e,t,r){this.grid.setCellValue(e,t,r)},n.prototype.setRowData=function(e,t){var r,i=this.getCurrentViewRecords(),n=this.grid.getPrimaryKeyFieldNames()[0],o={};i.some((function(t,r,i){return t[n]===e&&(o=t,!0)})),r=o.level;var a=t;a.level=r,a.index=o.index,a.childRecords=o.childRecords,a.taskData=o.taskData,a.uniqueID=o.uniqueID,a.parentItem=o.parentItem,a.checkboxState=o.checkboxState,a.hasChildRecords=o.hasChildRecords,a.parentUniqueID=o.parentUniqueID,a.expanded=o.expanded,this.grid.setRowData(e,a)},n.prototype.goToPage=function(e){this.grid.pagerModule&&this.grid.pagerModule.goToPage(e)},n.prototype.updateExternalMessage=function(e){this.pagerModule&&this.grid.pagerModule.updateExternalMessage(e)},n.prototype.getCellFromIndex=function(e,t){return this.grid.getCellFromIndex(e,t)},n.prototype.getColumnByField=function(e){return t.isBlazor()&&this.isServerRendered?r.iterateArrayOrObject(this.grid.columns,(function(t,r){if(t.field===e)return t}))[0]:r.iterateArrayOrObject(this.columnModel,(function(t,r){if(t.field===e)return t}))[0]},n.prototype.getColumnByUid=function(e){return t.isBlazor()&&this.isServerRendered?r.iterateArrayOrObject(this.grid.columns,(function(t,r){if(t.uid===e)return t}))[0]:r.iterateArrayOrObject(this.columnModel,(function(t,r){if(t.uid===e)return t}))[0]},n.prototype.getColumnFieldNames=function(){return this.grid.getColumnFieldNames()},n.prototype.getFooterContent=function(){return this.grid.getFooterContent()},n.prototype.getFooterContentTable=function(){return this.grid.getFooterContentTable()},n.prototype.showColumns=function(e,t){this.grid.showColumns(e,t),this.updateColumnModel()},n.prototype.hideColumns=function(e,t){this.grid.hideColumns(e,t),this.updateColumnModel()},n.prototype.getColumnHeaderByField=function(e){return this.grid.getColumnHeaderByField(e)},n.prototype.getColumnHeaderByIndex=function(e){return this.grid.getColumnHeaderByIndex(e)},n.prototype.getColumnHeaderByUid=function(e){return this.grid.getColumnHeaderByUid(e)},n.prototype.getColumnIndexByField=function(e){return this.grid.getColumnIndexByField(e)},n.prototype.getColumnIndexByUid=function(e){return this.grid.getColumnIndexByUid(e)},n.prototype.getColumns=function(e){return t.isBlazor()&&this.isServerRendered?this.grid.columns:(this.updateColumnModel(this.grid.getColumns(e)),this.columnModel)},n.prototype.updateColumnModel=function(e){this.columnModel=[];for(var r,i=!1,n=t.isNullOrUndefined(e)?this.grid.getColumns():e,o=0;o<n.length;o++){r={};for(var a=0,s=Object.keys(n[o]);a<s.length;a++){var d=s[a];t.isBlazor()&&"edit"===d||(r[d]=n[o][d])}this.columnModel.push(new M(r))}return t.isBlazor()&&this.isServerRendered||(this.deepMerge=["columns"],this.grid.columns.length!==this.columnModel.length&&(i=!0),i||this.setProperties({columns:this.columnModel},!0),this.deepMerge=void 0),this.columnModel},n.prototype.getContent=function(){return this.grid.getContent()},n.prototype.mergePersistTreeGridData=function(){this.grid.mergePersistGridData.apply(this)},n.prototype.mergeColumns=function(e,t){this.grid.mergeColumns.apply(this,[e,t])},n.prototype.updateTreeGridModel=function(){this.setProperties({filterSettings:r.getObject("properties",this.grid.filterSettings)},!0),this.setProperties({pageSettings:r.getObject("properties",this.grid.pageSettings)},!0),this.setProperties({searchSettings:r.getObject("properties",this.grid.searchSettings)},!0),this.setProperties({sortSettings:r.getObject("properties",this.grid.sortSettings)},!0)},n.prototype.getContentTable=function(){return this.grid.getContentTable()},n.prototype.getDataRows=function(){for(var e=[],t=this.grid.getDataRows(),r=0,i=t.length;r<i;r++)t[r].classList.contains("e-summaryrow")||e.push(t[r]);return e},n.prototype.getCurrentViewRecords=function(){return this.grid.currentViewData},n.prototype.getBatchChanges=function(){return this.grid.editModule.getBatchChanges()},n.prototype.getHeaderContent=function(){return this.grid.getHeaderContent()},n.prototype.getHeaderTable=function(){return this.grid.getHeaderTable()},n.prototype.getRowByIndex=function(e){return this.grid.getRowByIndex(e)},n.prototype.getRowInfo=function(e){return this.grid.getRowInfo(e)},n.prototype.getUidByColumnField=function(e){return this.grid.getUidByColumnField(e)},n.prototype.getVisibleColumns=function(){for(var e=[],t=0,r=this.columnModel;t<r.length;t++){var i=r[t];i.visible&&e.push(i)}return e},n.prototype.showSpinner=function(){a.showSpinner(this.element)},n.prototype.hideSpinner=function(){a.hideSpinner(this.element)},n.prototype.refresh=function(){this.grid.refresh()},n.prototype.getCheckedRecords=function(){return this.selectionModule.getCheckedrecords()},n.prototype.getCheckedRowIndexes=function(){return this.selectionModule.getCheckedRowIndexes()},n.prototype.selectCheckboxes=function(e){this.selectionModule.selectCheckboxes(e)},n.prototype.refreshColumns=function(e){t.isNullOrUndefined(e)||e?(this.grid.columns=this.getGridColumns(this.columns),this.grid.refreshColumns()):this.grid.setProperties({columns:this.getGridColumns(this.columns)},!0)},n.prototype.refreshHeader=function(){this.grid.refreshHeader()},n.prototype.expandCollapseRequest=function(e){if("Batch"===this.editSettings.mode&&(this.getBatchChanges()[this.changedRecords].length||this.getBatchChanges()[this.deletedRecords].length||this.getBatchChanges()[this.addedRecords].length)){var t=this.grid.editModule.dialogObj;return this.grid.editModule.showDialog("CancelEdit",t),void(this.targetElement=e)}if(this.rowTemplate){var r=e.closest(".e-treerowcell").parentElement,i=this.getCurrentViewRecords()[r.rowIndex];e.classList.contains("e-treegridexpand")?this.collapseRow(r,i):this.expandRow(r,i)}else i=(r=this.grid.getRowInfo(e)).rowData,e.classList.contains("e-treegridexpand")?this.collapseRow(r.row,i):this.expandRow(r.row,i)},n.prototype.expandRow=function(e,t){var r=this,i={data:t=this.getCollapseExpandRecords(e,t),row:e,cancel:!1};this.trigger("expanding",i,(function(i){if(!i.cancel&&(r.expandCollapse("expand",e,t),(!s(r)||g(r))&&!d(r))){var n={data:t,row:e};r.trigger("expanded",n)}}))},n.prototype.getCollapseExpandRecords=function(e,r){return this.allowPaging&&"All"===this.pageSettings.pageSizeMode&&this.isExpandAll&&t.isNullOrUndefined(r)&&!s(this)?r=this.flatData.filter((function(e){return e.hasChildRecords})):t.isNullOrUndefined(r)&&(r=this.grid.getCurrentViewRecords()[e.rowIndex]),r},n.prototype.collapseRow=function(e,t){var r=this,i={data:t=this.getCollapseExpandRecords(e,t),row:e,cancel:!1};this.trigger("collapsing",i,(function(i){if(!i.cancel){r.expandCollapse("collapse",e,t);var n={data:t,row:e};s(r)||r.trigger("collapsed",n)}}))},n.prototype.expandAtLevel=function(e){if((this.allowPaging&&"All"===this.pageSettings.pageSizeMode||this.enableVirtualization)&&!s(this))t=this.grid.dataSource.filter((function(t){return t.hasChildRecords&&t.level===e&&(t.expanded=!0),t.hasChildRecords&&t.level===e})),this.expandRow(null,t);else for(var t=this.getRecordDetails(e),i=r.getObject("rows",t),n=r.getObject("records",t),o=0;o<n.length;o++)this.expandRow(i[o],n[o])},n.prototype.getRecordDetails=function(e){var t=this.getRows().filter((function(t){return-1!==t.className.indexOf("level"+e)&&(t.querySelector(".e-treegridcollapse")||t.querySelector(".e-treegridexpand"))}));return{records:this.getCurrentViewRecords().filter((function(t){return t.level===e&&t.hasChildRecords})),rows:t}},n.prototype.collapseAtLevel=function(e){if((this.allowPaging&&"All"===this.pageSettings.pageSizeMode||this.enableVirtualization)&&!s(this)){var t=this.grid.dataSource.filter((function(t){return t.hasChildRecords&&t.level===e&&(t.expanded=!1),t.hasChildRecords&&t.level===e}));this.collapseRow(null,t)}else for(var i=this.getRecordDetails(e),n=r.getObject("rows",i),o=r.getObject("records",i),a=0;a<o.length;a++)this.collapseRow(n[a],o[a])},n.prototype.expandAll=function(){this.expandCollapseAll("expand")},n.prototype.collapseAll=function(){this.expandCollapseAll("collapse")},n.prototype.expandCollapseAll=function(e){var t=this.getRows().filter((function(t){return t.querySelector(".e-treegrid"+("expand"===e?"collapse":"expand"))}));if(this.isExpandAll=!0,this.isCollapseAll=!0,(this.allowPaging&&"All"===this.pageSettings.pageSizeMode||this.enableVirtualization)&&!s(this))this.flatData.filter((function(t){t.hasChildRecords&&(t.expanded="collapse"!==e)})),t.length&&("collapse"===e?this.collapseRow(t[0]):this.expandRow(t[0]));else for(var r=0;r<t.length;r++)"collapse"===e?this.collapseRow(t[r]):this.expandRow(t[r]);this.isExpandAll=!1,this.isCollapseAll=!1},n.prototype.expandCollapse=function(e,r,i,n){var o={row:r,data:i,childData:[],requestType:e};!s(this)&&"expand"===e&&this.isSelfReference&&this.updateChildOnDemand(o);var a=this.getRows();if(this.rowTemplate){var l=this.getContentTable().rows;a=[].slice.call(l)}if(t.isNullOrUndefined(r)?r=a[this.getCurrentViewRecords().indexOf(i)]:r.getAttribute("aria-rowindex"),t.isNullOrUndefined(r)||r.setAttribute("aria-expanded","expand"===e?"true":"false"),!(this.allowPaging&&"All"===this.pageSettings.pageSizeMode||this.enableVirtualization)||s(this)||d(this)){var p=void 0;if("expand"===e){if(p="table-row",n||(i.expanded=!0,this.uniqueIDCollection[i.uniqueID].expanded=i.expanded),h=r.getElementsByClassName("e-treegridcollapse")[0],t.isNullOrUndefined(h))return;t.addClass([h],"e-treegridexpand"),t.removeClass([h],"e-treegridcollapse")}else{p="none",n||(i.expanded=!1,this.uniqueIDCollection[i.uniqueID].expanded=i.expanded);var h=r.getElementsByClassName("e-treegridexpand")[0];if(t.isNullOrUndefined(h))return;t.addClass([h],"e-treegridcollapse"),t.removeClass([h],"e-treegridexpand")}var c=a.filter((function(e){return e.classList.contains("e-griddetailrowindex"+i.index+"level"+(i.level+1))}));s(this)&&!g(this)?this.remoteExpand(e,r,i,n):d(this)&&"collapse"!==e||this.localExpand(e,r,i,n),this.notify("rowExpandCollapse",{detailrows:c,action:p,record:i,row:r}),this.updateAltRow(a)}else this.notify("localPagedExpandCollapse",{action:e,row:r,record:i})},n.prototype.updateChildOnDemand=function(e){var i=this,n=new o.Deferred;e.childDataBind=n.resolve;var a=e.data;this.trigger("dataStateChange",e),n.promise.then((function(n){if(e.childData.length){for(var o=i.flatData,s=0,l=0;l<o.length;l++)if(o[l].taskData===a.taskData){s=l;break}var p=t.getValue("result",i.dataSource),h=f(e.childData),c=a[i.childMapping]&&a[i.childMapping].length>h.length?a[i.childMapping].length:h.length;for(l=0;l<c;l++)a[i.childMapping]&&p.filter((function(e,t){e[i.parentIdMapping]===a[i.idMapping]&&p.splice(t,1)})),h[l]?(h[l].level=a.level+1,h[l].index=Math.ceil(1e3*Math.random()),h[l].parentItem=t.extend({},a),h[l].taskData=t.extend({},h[l]),delete h[l].parentItem.childRecords,delete h[l].taskData.parentItem,h[l].parentUniqueID=a.uniqueID,h[l].uniqueID=r.getUid(i.element.id+"_data_"),t.setValue("uniqueIDCollection."+h[l].uniqueID,h[l],i),(!t.isNullOrUndefined(h[l][i.childMapping])||h[l][i.hasChildMapping]&&d(i))&&(h[l].hasChildRecords=!0),o.splice(s+1+l,a[i.childMapping]&&a[i.childMapping][l]?1:0,h[l])):o.splice(s+1+l,1);o[s][i.childMapping]=h,o[s].childRecords=h,o[s].expanded=!0,t.setValue("uniqueIDCollection."+o[s].uniqueID,o[s],i);for(var u=0;u<e.childData.length;u++)p.push(e.childData[u])}i.isExpandRefresh=!0,i.refresh(),i.trigger("expanded",e)}))},n.prototype.remoteExpand=function(e,t,r,i){var n=this.getRows();if(this.rowTemplate){var o=this.getContentTable().rows;n=[].slice.call(o)}var a,s={data:r,row:t};if(a=n.filter((function(e){return e.querySelector(".e-gridrowindex"+r.index+"level"+(r.level+1))})),"expand"===e){this.notify("remoteExpand",{record:r,rows:a,parentRow:t});var d={row:t,data:r};a.length>0&&this.trigger("expanded",d)}else this.collapseRemoteChild(a),this.trigger("collapsed",s)},n.prototype.localExpand=function(e,r,i,n){var o,a=this.getCurrentViewRecords().filter((function(e){return e.parentUniqueID===i.uniqueID})),s=this.getRows();if(this.rowTemplate){var d=this.getContentTable().rows;s=[].slice.call(d)}var l="expand"===e?"table-row":"none",p=(a[0].parentItem.index,s.filter((function(e){return e.querySelector(".e-gridrowindex"+i.index+"level"+(i.level+1))})));this.frozenRows>0&&(o=this.getMovableRows().filter((function(e){return e.querySelector(".e-gridrowindex"+i.index+"level"+(i.level+1))})));for(var h=0;h<p.length;h++)p[h].style.display=l,t.isNullOrUndefined(o)||(o[h].style.display=l),this.notify("childRowExpand",{row:p[h]}),t.isNullOrUndefined(a[h].childRecords)||"expand"===e&&!t.isNullOrUndefined(a[h].expanded)&&!a[h].expanded||(this.expandCollapse(e,p[h],a[h],!0),this.frozenColumns<=this.treeColumnIndex&&!t.isNullOrUndefined(o)&&this.expandCollapse(e,o[h],a[h],!0))},n.prototype.updateAltRow=function(e){if(this.enableAltRow&&!this.rowTemplate)for(var r=0,i=0;e&&i<e.length;i++){var n=e[i];"none"!==n.style.display&&(n.classList.contains("e-altrow")&&t.removeClass([n],"e-altrow"),r%2==0||n.classList.contains("e-summaryrow")||n.classList.contains("e-detailrow")||t.addClass([n],"e-altrow"),n.classList.contains("e-summaryrow")||n.classList.contains("e-detailrow")||r++)}},n.prototype.treeColumnRowTemplate=function(e){if(this.rowTemplate){var t=this.getContentTable().rows;t=[].slice.call(t);for(var r=0;r<t.length;r++){var i=this.grid.getContentTable().rows[r].cells[this.treeColumnIndex],n=t[r],o={data:this.grid.getRowsObject()[r].data,row:n,cell:i,column:this.getColumns()[this.treeColumnIndex]};this.renderModule.cellRender(o)}}},n.prototype.collapseRemoteChild=function(e){for(var r,i=0;i<e.length;i++){(r=this.rowTemplate?this.grid.getCurrentViewRecords()[e[i].rowIndex]:this.grid.getRowObjectFromUID(e[i].getAttribute("data-Uid")).data).expanded=!1,t.isBlazor()&&this.isServerRendered?(t.removeClass([e[i]],"e-treerowexpanded"),t.addClass([e[i]],"e-treerowcollapsed")):e[i].style.display="none";var n=e[i].querySelector(".e-detailrowexpand");if(t.isNullOrUndefined(n)||this.grid.detailRowModule.collapse(n),e[i].querySelector(".e-treecolumn-container .e-treegridexpand")){var o=e[i].querySelector(".e-treecolumn-container .e-treegridexpand");t.removeClass([o],"e-treegridexpand"),t.addClass([o],"e-treegridcollapse");for(var a=[],s=this.getRows(),d=0;d<s.length;d++)s[d].querySelector(".e-gridrowindex"+r.index+"level"+(r.level+1))&&a.push(s[d]);this.collapseRemoteChild(a)}}},n.prototype.addListener=function(){this.on("updateResults",this.updateResultModel,this),this.grid.on("initial-end",this.afterGridRender,this)},n.prototype.updateResultModel=function(e){this.dataResults=e},n.prototype.removeListener=function(){this.isDestroyed||(this.off("updateResults",this.updateResultModel),this.grid.off("initial-end",this.afterGridRender))},n.prototype.filterByColumn=function(e,t,r,i,n,o,a,s){this.grid.filterByColumn(e,t,r,i,n,o,a,s)},n.prototype.clearFiltering=function(){this.grid.clearFiltering()},n.prototype.removeFilteredColsByField=function(e,t){this.grid.removeFilteredColsByField(e,t)},n.prototype.selectRow=function(e,t){this.grid.selectRow(e,t)},n.prototype.selectRows=function(e){this.grid.selectRows(e)},n.prototype.clearSelection=function(){this.grid.clearSelection()},n.prototype.copy=function(e){this.clipboardModule.copy(e)},n.prototype.paste=function(e,t,r){this.clipboardModule.paste(e,t,r)},n.prototype.selectCell=function(e,t){this.grid.selectCell(e,t)},n.prototype.getSelectedRows=function(){return this.grid.getSelectedRows()},n.prototype.getMovableCellFromIndex=function(e,t){return this.grid.getMovableCellFromIndex(e,t)},n.prototype.getMovableDataRows=function(){return this.grid.getMovableDataRows()},n.prototype.getMovableRowByIndex=function(e){return this.grid.getMovableRowByIndex(e)},n.prototype.getMovableRows=function(){return this.grid.getMovableRows()},n.prototype.getFrozenColumns=function(){return this.getFrozenCount(this.columns,0)},n.prototype.getFrozenCount=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r].columns?t=this.getFrozenCount(e[r].columns,t):e[r].isFrozen&&t++;return t},n.prototype.getSelectedRowIndexes=function(){return this.grid.getSelectedRowIndexes()},n.prototype.getSelectedRowCellIndexes=function(){return this.grid.getSelectedRowCellIndexes()},n.prototype.getSelectedRecords=function(){return this.grid.getSelectedRecords()},n.prototype.getDataModule=function(){return{baseModule:this.grid.getDataModule(),treeModule:this.dataModule}},n.prototype.reorderRows=function(e,t,r){this.rowDragAndDropModule.reorderRows(e,t,r)},ye([t.Property(0)],n.prototype,"frozenRows",void 0),ye([t.Property(0)],n.prototype,"frozenColumns",void 0),ye([t.Property("Ellipsis")],n.prototype,"clipMode",void 0),ye([t.Property([])],n.prototype,"columns",void 0),ye([t.Property(null)],n.prototype,"childMapping",void 0),ye([t.Property(null)],n.prototype,"hasChildMapping",void 0),ye([t.Property(0)],n.prototype,"treeColumnIndex",void 0),ye([t.Property(null)],n.prototype,"idMapping",void 0),ye([t.Property(null)],n.prototype,"parentIdMapping",void 0),ye([t.Property(!1)],n.prototype,"enableCollapseAll",void 0),ye([t.Property(null)],n.prototype,"expandStateMapping",void 0),ye([t.Property(!1)],n.prototype,"allowRowDragAndDrop",void 0),ye([t.Property([])],n.prototype,"dataSource",void 0),ye([t.Property()],n.prototype,"query",void 0),ye([t.Property()],n.prototype,"cloneQuery",void 0),ye([t.Property("AllPages")],n.prototype,"printMode",void 0),ye([t.Property(!1)],n.prototype,"allowPaging",void 0),ye([t.Property(!1)],n.prototype,"loadChildOnDemand",void 0),ye([t.Property(!1)],n.prototype,"allowTextWrap",void 0),ye([t.Complex({},q)],n.prototype,"textWrapSettings",void 0),ye([t.Property(!1)],n.prototype,"allowReordering",void 0),ye([t.Property(!1)],n.prototype,"allowResizing",void 0),ye([t.Property(!1)],n.prototype,"autoCheckHierarchy",void 0),ye([t.Complex({},ie)],n.prototype,"pageSettings",void 0),ye([t.Complex({},r.RowDropSettings)],n.prototype,"rowDropSettings",void 0),ye([t.Property()],n.prototype,"pagerTemplate",void 0),ye([t.Property(!1)],n.prototype,"showColumnMenu",void 0),ye([t.Property(!1)],n.prototype,"allowSorting",void 0),ye([t.Property(!0)],n.prototype,"allowMultiSorting",void 0),ye([t.Complex({},ge)],n.prototype,"sortSettings",void 0),ye([t.Collection([],se)],n.prototype,"aggregates",void 0),ye([t.Complex({},pe)],n.prototype,"editSettings",void 0),ye([t.Property(!1)],n.prototype,"allowFiltering",void 0),ye([t.Property()],n.prototype,"detailTemplate",void 0),ye([t.Complex({},A)],n.prototype,"filterSettings",void 0),ye([t.Complex({},j)],n.prototype,"searchSettings",void 0),ye([t.Property()],n.prototype,"toolbar",void 0),ye([t.Property()],n.prototype,"toolbarTemplate",void 0),ye([t.Property("Default")],n.prototype,"gridLines",void 0),ye([t.Property()],n.prototype,"contextMenuItems",void 0),ye([t.Property()],n.prototype,"columnMenuItems",void 0),ye([t.Property()],n.prototype,"rowTemplate",void 0),ye([t.Property("Parent")],n.prototype,"copyHierarchyMode",void 0),ye([t.Property(null)],n.prototype,"rowHeight",void 0),ye([t.Property(!0)],n.prototype,"enableAltRow",void 0),ye([t.Property(!0)],n.prototype,"allowKeyboard",void 0),ye([t.Property(!1)],n.prototype,"enableHover",void 0),ye([t.Property(!1)],n.prototype,"enableAutoFill",void 0),ye([t.Property("auto")],n.prototype,"height",void 0),ye([t.Property("auto")],n.prototype,"width",void 0),ye([t.Property(!1)],n.prototype,"enableVirtualization",void 0),ye([t.Property("All")],n.prototype,"columnQueryMode",void 0),ye([t.Event()],n.prototype,"created",void 0),ye([t.Event()],n.prototype,"load",void 0),ye([t.Event()],n.prototype,"expanding",void 0),ye([t.Event()],n.prototype,"expanded",void 0),ye([t.Event()],n.prototype,"collapsing",void 0),ye([t.Event()],n.prototype,"collapsed",void 0),ye([t.Event()],n.prototype,"cellSave",void 0),ye([t.Event()],n.prototype,"cellSaved",void 0),ye([t.Event()],n.prototype,"actionBegin",void 0),ye([t.Event()],n.prototype,"actionComplete",void 0),ye([t.Event()],n.prototype,"beginEdit",void 0),ye([t.Event()],n.prototype,"batchAdd",void 0),ye([t.Event()],n.prototype,"batchDelete",void 0),ye([t.Event()],n.prototype,"batchCancel",void 0),ye([t.Event()],n.prototype,"beforeBatchAdd",void 0),ye([t.Event()],n.prototype,"beforeBatchDelete",void 0),ye([t.Event()],n.prototype,"beforeBatchSave",void 0),ye([t.Event()],n.prototype,"cellEdit",void 0),ye([t.Event()],n.prototype,"actionFailure",void 0),ye([t.Event()],n.prototype,"dataBound",void 0),ye([t.Event()],n.prototype,"dataSourceChanged",void 0),ye([t.Event()],n.prototype,"dataStateChange",void 0),ye([t.Event()],n.prototype,"recordDoubleClick",void 0),ye([t.Event()],n.prototype,"rowDataBound",void 0),ye([t.Event()],n.prototype,"detailDataBound",void 0),ye([t.Event()],n.prototype,"queryCellInfo",void 0),ye([t.Property(!0)],n.prototype,"allowSelection",void 0),ye([t.Event()],n.prototype,"rowSelecting",void 0),ye([t.Event()],n.prototype,"rowSelected",void 0),ye([t.Event()],n.prototype,"rowDeselecting",void 0),ye([t.Event()],n.prototype,"rowDeselected",void 0),ye([t.Event()],n.prototype,"headerCellInfo",void 0),ye([t.Event()],n.prototype,"cellSelecting",void 0),ye([t.Event()],n.prototype,"columnMenuOpen",void 0),ye([t.Event()],n.prototype,"columnMenuClick",void 0),ye([t.Event()],n.prototype,"cellSelected",void 0),ye([t.Event()],n.prototype,"cellDeselecting",void 0),ye([t.Event()],n.prototype,"cellDeselected",void 0),ye([t.Event()],n.prototype,"resizeStart",void 0),ye([t.Event()],n.prototype,"resizing",void 0),ye([t.Event()],n.prototype,"resizeStop",void 0),ye([t.Event()],n.prototype,"columnDragStart",void 0),ye([t.Event()],n.prototype,"columnDrag",void 0),ye([t.Event()],n.prototype,"columnDrop",void 0),ye([t.Event()],n.prototype,"checkboxChange",void 0),ye([t.Event()],n.prototype,"printComplete",void 0),ye([t.Event()],n.prototype,"beforePrint",void 0),ye([t.Event()],n.prototype,"toolbarClick",void 0),ye([t.Event()],n.prototype,"beforeDataBound",void 0),ye([t.Event()],n.prototype,"contextMenuOpen",void 0),ye([t.Event()],n.prototype,"contextMenuClick",void 0),ye([t.Event()],n.prototype,"beforeCopy",void 0),ye([t.Event()],n.prototype,"beforePaste",void 0),ye([t.Event()],n.prototype,"rowDrag",void 0),ye([t.Event()],n.prototype,"rowDragStart",void 0),ye([t.Event()],n.prototype,"rowDragStartHelper",void 0),ye([t.Event()],n.prototype,"rowDrop",void 0),ye([t.Property(-1)],n.prototype,"selectedRowIndex",void 0),ye([t.Complex({},z)],n.prototype,"selectionSettings",void 0),ye([t.Property(!1)],n.prototype,"allowExcelExport",void 0),ye([t.Property(!1)],n.prototype,"allowPdfExport",void 0),ye([t.Event()],n.prototype,"pdfQueryCellInfo",void 0),ye([t.Event()],n.prototype,"pdfHeaderQueryCellInfo",void 0),ye([t.Event()],n.prototype,"excelQueryCellInfo",void 0),ye([t.Event()],n.prototype,"excelHeaderQueryCellInfo",void 0),ye([t.Event()],n.prototype,"beforeExcelExport",void 0),ye([t.Event()],n.prototype,"excelExportComplete",void 0),ye([t.Event()],n.prototype,"beforePdfExport",void 0),ye([t.Event()],n.prototype,"pdfExportComplete",void 0),l=ye([t.NotifyPropertyChanges],n)}(t.Component),ve=function(){function e(e,t){r.Grid.Inject(r.Reorder),this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"reorder"},e.prototype.addEventListener=function(){this.parent.on("getColumnIndex",this.getTreeColumn,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("getColumnIndex",this.getTreeColumn)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getTreeColumn=function(){for(var e,t=this.parent.columnModel[this.parent.treeColumnIndex],i=this.parent.getColumns(),n=0;n<i.length;n++)if(r.getObject("field",t)===r.getObject("field",i[n])){e=n;break}this.parent.setProperties({treeColumnIndex:e},!0)},e}(),we=function(){function e(e){r.Grid.Inject(r.Resize),this.parent=e}return e.prototype.autoFitColumns=function(e){this.parent.grid.autoFitColumns(e)},e.prototype.getModuleName=function(){return"resize"},e.prototype.destroy=function(){this.parent.isDestroyed||this.parent.grid.resizeModule.destroy()},e}(),Re=function(){function e(e){this.canDrop=!0,this.isDraggedWithChild=!1,this.isaddtoBottom=!1,r.Grid.Inject(r.RowDD),this.parent=e,this.addEventListener()}return e.prototype.getChildrecordsByParentID=function(e){return(this.parent.dataSource instanceof o.DataManager&&g(this.parent)?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource).filter((function(t){return t.uniqueID===e}))},e.prototype.addEventListener=function(){this.parent.on("row-draging",this.Rowdraging,this),this.parent.on("row-dropped",this.rowDropped,this),this.parent.on("rows-add",this.rowsAdded,this),this.parent.on("rows-remove",this.rowsRemoved,this)},e.prototype.reorderRows=function(e,t,r){e[0],"above"===r&&(this.dropPosition="topSegment"),"below"===r&&(this.dropPosition="bottomSegment"),"child"===r&&(this.dropPosition="middleSegment");for(var i=[],n=0;n<e.length;n++)i[n]=this.parent.getCurrentViewRecords()[e[n]];var o={data:i,dropIndex:t};this.dropRows(o,!0),this.parent.refresh()},e.prototype.rowsAdded=function(e){for(var r,i=e.records,n=e.records.length-1;n>-1;n--)if((r=i[n]).parentUniqueID){var a=i.filter((function(e){return e.uniqueID===r.parentUniqueID}));if(a.length){var s=a[0].childRecords.indexOf(r),d=a[0];-1!==s&&(d.childRecords.splice(s,1),d.childRecords.length||(d.hasChildRecords=!1,d.hasFilteredChildRecords=!1),this.isDraggedWithChild=!0)}}if(this.parent.dataSource.length){for(n=0;n<i.length;n++)t.setValue("uniqueIDCollection."+i[n].uniqueID,i[n],this.parent);var l={data:e.records,dropIndex:e.toIndex};this.parent.dataSource instanceof o.DataManager?this.treeGridData=this.parent.dataSource.dataSource.json:this.treeGridData=this.parent.grid.dataSource,this.dropRows(l)}else{var p,h=this.parent,c=e.records;for(n=e.records.length-1;n>-1;n--)(p=c[n]).taskData.hasOwnProperty(h.childMapping)||(p.taskData[h.childMapping]=[]),h.dataSource.splice(0,0,p.taskData),h.setProperties({dataSource:h.dataSource},!1)}},e.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)this.draggedRecord=e.records[t],(this.draggedRecord.hasChildRecords||this.draggedRecord.parentItem&&-1!==this.parent.grid.dataSource.indexOf(this.getChildrecordsByParentID(this.draggedRecord.parentUniqueID)[0])||0===this.draggedRecord.level)&&this.deleteDragRow()},e.prototype.refreshGridDataSource=function(){var e,r,i=this.draggedRecord,n=this.droppedRecord,a=this.parent;if(!(e=this.parent.dataSource instanceof o.DataManager&&g(this.parent)?a.dataSource.dataSource.json:a.dataSource)||t.isNullOrUndefined(n)||n.parentItem){if(!this.parent.parentIdMapping&&!t.isNullOrUndefined(n)&&n.parentItem&&("topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition))for(var s=this.getChildrecordsByParentID(n.parentUniqueID)[0].childRecords,d=0;d<s.length;d++)n.parentItem.taskData[this.parent.childMapping][d]=s[d].taskData}else{for(d=0;d<Object.keys(e).length;d++)e[d][this.parent.childMapping]===n.taskData[this.parent.childMapping]&&(r=d);"topSegment"===this.dropPosition?this.parent.idMapping||e.splice(r,0,i.taskData):"bottomSegment"===this.dropPosition&&(this.parent.idMapping||e.splice(r+1,0,i.taskData))}this.parent.parentIdMapping&&(i.parentItem?"topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition?(i[this.parent.parentIdMapping]=n[this.parent.parentIdMapping],i.taskData[this.parent.parentIdMapping]=n[this.parent.parentIdMapping]):(i[this.parent.parentIdMapping]=n[this.parent.idMapping],i.taskData[this.parent.parentIdMapping]=n[this.parent.idMapping]):(i.taskData[this.parent.parentIdMapping]=null,i[this.parent.parentIdMapping]=null))},e.prototype.removeFirstrowBorder=function(e,t){var r="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&e&&(0!==e.rowIndex||r)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeLastrowBorder=function(e,t){var r=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader")),i=e&&!r&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid"),n=i||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&e&&(i||n)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},e.prototype.updateIcon=function(e,i,n){var o=n.target?t.closest(n.target,"tr"):null;this.dropPosition=void 0;var a=0;this.removeFirstrowBorder(o),this.removeLastrowBorder(o);for(var s=0;s<n.rows.length;s++)(t.isNullOrUndefined(o)||o.getAttribute("data-uid")!==n.rows[s].getAttribute("data-uid"))&&r.parentsUntil(n.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var d,l=this.parent,p=l.toolbar&&l.toolbar.length?document.getElementById(l.element.id+"_gridcontrol_toolbarItems").offsetHeight:0,h=this.getOffset(l.element),c=l.getHeaderContent().offsetHeight+h.top+p,u=l.getContent().firstElementChild.scrollTop;t.isNullOrUndefined(o)||(a=o.offsetTop-u);var g=((d=l.allowTextWrap?e[0].offsetHeight:a+c+0)+e[0].offsetHeight-d)/3,f=d+g,y=f+g,m=y+g,v=(h.left,r.getObject("originalEvent.event",n).pageY),w=v<=f,R=v>f&&v<=y,C=v>y&&v<=m;if(w||R||C){if(w&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(o),this.removeErrorElem(),this.removeLastrowBorder(o),this.topOrBottomBorder(n.target)),R&&"Invalid"!==this.dropPosition){this.removetopOrBottomBorder();var x,S=void 0;S=t.closest(n.target,"tr"),(x=[].slice.call(S.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(x,!0,"e-childborder"),this.addLastRowborder(o),this.addFirstrowBorder(o),this.dropPosition="middleSegment"}C&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(o),this.removeFirstrowBorder(o),this.topOrBottomBorder(n.target))}return this.dropPosition},e.prototype.removeChildBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(e,!1,"e-childborder")},e.prototype.addFirstrowBorder=function(e){var r=this.parent.element,i=this.parent;if(e&&0===e.rowIndex&&!e.classList.contains("e-emptyrow")){var n=this.parent.createElement("div",{className:"e-firstrow-border"}),o=this.parent.getHeaderContent(),a=0;i.toolbar&&(a=i.toolbarModule.getToolbar().offsetHeight);var s=!t.isNullOrUndefined(this.parent.rowDropSettings.targetID);s&&(n.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+a+"px"),n.style.width=s?r.offsetWidth+"px":r.offsetWidth-this.getScrollWidth()+"px",o.querySelectorAll(".e-firstrow-border").length||o.appendChild(n)}},e.prototype.addLastRowborder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader"));if(e&&!t&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")===e.getAttribute("data-uid")){var r=this.parent.createElement("div",{className:"e-lastrow-border"}),i=this.parent.getContent();r.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",i.querySelectorAll(".e-lastrow-border").length||(i.classList.add("e-treegrid-relative"),i.appendChild(r),r.style.bottom=this.getScrollWidth()+"px")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?r.Scroll.getScrollBarWidth():0},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-cloneproperties")[0];if(!e.querySelectorAll(".e-errorelem").length&&!this.parent.rowDropSettings.targetID){var r=document.createElement("div");t.classList(r,["e-errorcontainer"],[]),t.classList(r,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),n=e.querySelector(".e-rowcell").innerHTML;i&&(n=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var o=document.createElement("span");o.className="errorValue",o.style.paddingLeft="16px",o.innerHTML=n,e.querySelector(".e-rowcell").appendChild(r),e.querySelector(".e-rowcell").appendChild(o)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.topOrBottomBorder=function(e){t.isNullOrUndefined(this.parent.rowDropSettings.targetID);var r,i;(i=(r=t.closest(e,"tr"))?[].slice.call(r.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length&&("topSegment"===this.dropPosition&&(this.addRemoveClasses(i,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(i,!0,"e-dropbottom"))},e.prototype.removetopOrBottomBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(e,!1,"e-dropbottom"),this.addRemoveClasses(e,!1,"e-droptop"))},e.prototype.addRemoveClasses=function(e,t,r){for(var i=0,n=e.length;i<n;i++)t?e[i].classList.add(r):e[i].classList.remove(r)},e.prototype.getOffset=function(e){var t=e.getBoundingClientRect(),r=document.body,i=document.documentElement,n=window.pageYOffset||i.scrollTop||r.scrollTop,o=window.pageXOffset||i.scrollLeft||r.scrollLeft,a=i.clientTop||r.clientTop||0,s=i.clientLeft||r.clientLeft||0,d=t.top+n-a,l=t.left+o-s;return{top:Math.round(d),left:Math.round(l)}},e.prototype.Rowdraging=function(e){var i=this.parent,n=this.parent.element.querySelector(".e-cloneproperties");n.style.cursor="";var o=e.target?t.closest(e.target,"tr"):null,a=o?o.rowIndex:-1,s=[],d=i.getCurrentViewRecords()[a];if(this.removeErrorElem(),this.canDrop=!0,e.data[0]?s=e.data:s.push(e.data),-1!==a?this.ensuredropPosition(s,d):(this.canDrop=!1,this.addErrorElem()),!i.rowDropSettings.targetID&&this.canDrop&&i.rowDragAndDropModule.updateIcon(e.rows,a,e),i.rowDropSettings.targetID&&(l=r.parentsUntil(e.target,"e-treegrid"))&&l.id===this.parent.rowDropSettings.targetID&&l.ej2_instances[0].rowDragAndDropModule.updateIcon(e.rows,a,e),e.target&&t.closest(e.target,"#"+i.rowDropSettings.targetID)){var l=r.parentsUntil(e.target,"e-treegrid");l||(n.style.cursor="default")}},e.prototype.rowDropped=function(e){var i=this.parent;i.rowDropSettings.targetID?(e.target&&t.closest(e.target,"#"+i.rowDropSettings.targetID)||r.parentsUntil(e.target,"e-treegrid")&&r.parentsUntil(e.target,"e-treegrid").id===i.rowDropSettings.targetID)&&(t.setValue("dropPosition",this.dropPosition,e),i.trigger("rowDrop",e),!e.cancel&&i.rowDropSettings.targetID&&this.dragDropGrid(e)):r.parentsUntil(e.target,"e-content")&&(this.parent.element.querySelector(".e-errorelem")&&(this.dropPosition="Invalid"),t.setValue("dropPosition",this.dropPosition,e),i.trigger("rowDrop",e),e.cancel||(this.dropRows(e),i.refresh(),t.isNullOrUndefined(i.getHeaderContent().querySelector(".e-firstrow-border"))||i.getHeaderContent().querySelector(".e-firstrow-border").remove())),this.removetopOrBottomBorder(),this.removeChildBorder(),t.isNullOrUndefined(this.parent.element.getElementsByClassName("e-firstrow-border")[0])?t.isNullOrUndefined(this.parent.element.getElementsByClassName("e-lastrow-border")[0])||this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.dragDropGrid=function(e){var i=this.parent,n=t.closest(e.target,"tr"),o=isNaN(this.getTargetIdx(n))?0:this.getTargetIdx(n),a=r.parentsUntil(e.target,"e-treegrid");if(a&&a.id===this.parent.rowDropSettings.targetID&&!s(this.parent)){for(var d=a.ej2_instances[0],l=i.getSelectedRecords(),p=[],h=0;h<l.length;h++)p[h]=l[h].index;i.notify("rows-remove",{indexes:p,records:l}),d.notify("rows-add",{toIndex:o,records:l}),i.refresh(),d.refresh(),d.grid.dataSource.length>1&&(d.refresh(),t.isNullOrUndefined(d.getHeaderContent().querySelector(".e-firstrow-border"))||d.getHeaderContent().querySelector(".e-firstrow-border").remove(),t.isNullOrUndefined(d.getContent().querySelector(".e-lastrow-border"))||d.getContent().querySelector(".e-lastrow-border").remove())}},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.getParentData=function(e){var t=e.parentItem;if("bottomSegment"===this.dropPosition){var r=this.parent.getSelectedRecords()[0];this.droppedRecord=m(this.parent,r.parentItem.uniqueID)}"middleSegment"===this.dropPosition&&(this.parent.getSelectedRecords()[0].level===t.level?this.droppedRecord=m(this.parent,t.uniqueID):this.getParentData(t))},e.prototype.dropRows=function(e,r){if("Invalid"!==this.dropPosition&&!s(this.parent)){var i,n=this.parent,o=void 0;if(t.isNullOrUndefined(e.dropIndex)){var a=n.getSelectedRowIndexes()[0]-1,d=n.getCurrentViewRecords()[a];this.getParentData(d)}else this.droppedRecord=n.getCurrentViewRecords()[e.dropIndex];var l=[];i=this.droppedRecord,e.data[0]?l=e.data:l.push(e.data);var p=0,h=this.parent.rowDropSettings.targetID;this.isMultipleGrid=h,h?this.isaddtoBottom=h&&this.isDraggedWithChild:this.ensuredropPosition(l,i);for(var c=l.length,u=0;u<c;u++){o=l[u],this.draggedRecord=o;var g=e.dropIndex,f=!t.isNullOrUndefined(n.parentIdMapping);if("Invalid"!==this.dropPosition){n.rowDropSettings.targetID&&!r||this.deleteDragRow();var y=this.treeGridData.indexOf(i);if(this.dropAtTop(y,f,u),"bottomSegment"===this.dropPosition&&(i.hasChildRecords?(p=this.getChildCount(i,0),this.parent.parentIdMapping&&this.treeData.splice(y+p+1,0,this.draggedRecord.taskData),this.treeGridData.splice(y+p+1,0,this.draggedRecord)):(this.parent.parentIdMapping&&this.treeData.splice(y+1,0,this.draggedRecord.taskData),this.treeGridData.splice(y+1,0,this.draggedRecord)),o.parentItem=this.treeGridData[y].parentItem,o.parentUniqueID=this.treeGridData[y].parentUniqueID,o.level=this.treeGridData[y].level,o.hasChildRecords&&(this.updateChildRecordLevel(o,1),this.updateChildRecord(o,y+p+1)),i.parentItem)){var m=this.getChildrecordsByParentID(i.parentUniqueID)[0].childRecords,v=m.indexOf(i)+1;m.splice(v,0,o)}this.dropMiddle(g,y,e,r,f,u)}if(t.isNullOrUndefined(o.parentItem)){var w=n.parentData,R=w.indexOf(this.droppedRecord);"bottomSegment"===this.dropPosition?w.splice(R+1,0,o):"topSegment"===this.dropPosition&&w.splice(R,0,o)}n.rowDragAndDropModule.refreshGridDataSource()}}},e.prototype.dropMiddle=function(e,r,i,n,o,a){var s=this.parent,d=u(this.droppedRecord),l=t.isNullOrUndefined(d)||0===d.length?r+1:d.length+r+1;"middleSegment"===this.dropPosition&&(s.parentIdMapping?(this.treeData.splice(l,0,this.draggedRecord.taskData),this.treeGridData.splice(l,0,this.draggedRecord)):this.treeGridData.splice(l,0,this.draggedRecord),this.recordLevel(),this.draggedRecord.hasChildRecords&&this.updateChildRecord(this.draggedRecord,l,this.droppedRecord.expanded))},e.prototype.dropAtTop=function(e,t,r){var i=this.parent;if("topSegment"===this.dropPosition&&(i.parentIdMapping&&this.treeData.splice(e,0,this.draggedRecord.taskData),this.draggedRecord.parentItem=this.treeGridData[e].parentItem,this.draggedRecord.parentUniqueID=this.treeGridData[e].parentUniqueID,this.draggedRecord.level=this.treeGridData[e].level,this.treeGridData.splice(e,0,this.draggedRecord),this.draggedRecord.hasChildRecords&&(this.updateChildRecord(this.draggedRecord,e),this.updateChildRecordLevel(this.draggedRecord,1)),this.droppedRecord.parentItem)){var n=this.getChildrecordsByParentID(this.droppedRecord.parentUniqueID)[0].childRecords,o=n.indexOf(this.droppedRecord);n.splice(o,0,this.draggedRecord)}},e.prototype.recordLevel=function(){var e=this.parent,r=this.draggedRecord,i=this.droppedRecord,n=e.childMapping;if(i.hasChildRecords||(i.hasChildRecords=!0,i.hasFilteredChildRecords=!0,t.isNullOrUndefined(i.childRecords)&&(i.childRecords=[],!e.parentIdMapping&&t.isNullOrUndefined(i.taskData[n])&&(i.taskData[n]=[]))),"middleSegment"===this.dropPosition){var o=t.extend({},i);delete o.childRecords,r.parentItem=o,r.parentUniqueID=i.uniqueID,i.childRecords.splice(i.childRecords.length,0,r),t.isNullOrUndefined(r)||e.parentIdMapping||t.isNullOrUndefined(i.taskData[n])||i.taskData[e.childMapping].splice(i.childRecords.length,0,r.taskData),r.hasChildRecords?(r.level=i.level+1,this.updateChildRecordLevel(r,1)):r.level=i.level+1,i.expanded=!0}},e.prototype.deleteDragRow=function(){var e;this.parent.dataSource instanceof o.DataManager&&g(this.parent)?(this.treeGridData=this.parent.grid.dataSource.dataSource.json,this.treeData=this.parent.dataSource.dataSource.json):(this.treeGridData=this.parent.grid.dataSource,this.treeData=this.parent.dataSource),e=m(this.parent,this.draggedRecord.uniqueID),this.removeRecords(e)},e.prototype.updateChildRecord=function(e,t,r){var i,n,o=this.parent;if(!e.hasChildRecords)return 0;n=e.childRecords.length;for(var a=0;a<n;a++)i=e.childRecords[a],t++,o.flatData.splice(t,0,i),o.parentIdMapping&&this.treeData.splice(t,0,i.taskData),i.hasChildRecords&&(t=this.updateChildRecord(i,t));return t},e.prototype.updateChildRecordLevel=function(e,t){var r,i;if(t++,!e.hasChildRecords)return 0;i=e.childRecords.length;for(var n=0;n<i;n++){r=e.childRecords[n];var o=void 0;e.parentItem&&(o=m(this.parent,e.parentItem.uniqueID)),r.level=e.parentItem?o.level+t:e.level+1,r.hasChildRecords&&(t--,t=this.updateChildRecordLevel(r,t))}return t},e.prototype.removeRecords=function(e){var r,i=this.parent;r=this.parent.dataSource instanceof o.DataManager&&g(this.parent)?this.parent.dataSource.dataSource.json:this.parent.dataSource;var n=e,a=!t.isNullOrUndefined(i.parentIdMapping),s=this.getChildrecordsByParentID(n.parentUniqueID)[0];if(n){if(n.parentItem){var d=s?s.childRecords:[],l=0;d&&d.length>0&&(l=d.indexOf(n),s.childRecords.splice(l,1),this.parent.parentIdMapping||v({value:n,action:"delete"},this.parent,a,n.index,n.index))}if(i.parentIdMapping){n.hasChildRecords&&n.childRecords.length>0&&this.removeChildItem(n);for(var p=void 0,h=r,c=0;c<h.length;c++)h[c][this.parent.idMapping]===n.taskData[this.parent.idMapping]&&(p=c);-1!==p&&(r.splice(p,1),this.treeGridData.splice(p,1))}var u=this.treeGridData.indexOf(n);if(!i.parentIdMapping){var f=this.parent.parentData.indexOf(n);-1!==f&&(i.parentData.splice(f,1),r.splice(f,1))}if(-1===u&&!i.parentIdMapping)for(var y=i.getPrimaryKeyFieldNames()[0],m=0;m<this.treeGridData.length;m++)this.treeGridData[m][y]===n[y]&&(u=m);if(!i.parentIdMapping){var w=this.getChildCount(n,0);this.treeGridData.splice(u,w+1)}n.parentItem&&s&&s.childRecords&&!s.childRecords.length&&(s.expanded=!1,s.hasChildRecords=!1,s.hasFilteredChildRecords=!1)}},e.prototype.removeChildItem=function(e){this.parent;for(var t,r,i=0;i<e.childRecords.length;i++){t=e.childRecords[i];var n;n=this.parent.dataSource instanceof o.DataManager&&g(this.parent)?this.parent.dataSource.dataSource.json:this.parent.dataSource;for(var a=0;a<n.length;a++)n[a][this.parent.idMapping]===t.taskData[this.parent.idMapping]&&(r=a);-1!==r&&(this.treeData.splice(r,1),this.treeGridData.splice(r,1)),t.hasChildRecords&&this.removeChildItem(t)}},e.prototype.getChildCount=function(e,t){var r;if(!e.hasChildRecords)return 0;for(var i=0;i<e.childRecords.length;i++)t++,(r=e.childRecords[i]).hasChildRecords&&(t=this.getChildCount(r,t));return t},e.prototype.ensuredropPosition=function(e,r){this.parent;var i=this;e.filter((function(e){if(e.hasChildRecords&&!t.isNullOrUndefined(e.childRecords)){if(-1!==e.childRecords.indexOf(r))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(e.childRecords,r)}}))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("row-draging",this.Rowdraging),this.parent.off("row-dropped",this.rowDropped),this.parent.off("rows-add",this.rowsAdded),this.parent.off("rows-remove",this.rowsRemoved))},e.prototype.getModuleName=function(){return"rowDragAndDrop"},e}(),Ce=(Y=function(e,t){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),xe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Ce(r,e),function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);a>3&&s&&Object.defineProperty(t,r,s)}([t.Property()],r.prototype,"targetID",void 0),r}(t.ChildProperty),Se=(K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),be=function(e){function r(t){var r=e.call(this,t)||this;return r.addEventListener(),r}return Se(r,e),r.prototype.addEventListener=function(){this.parent.on("data-listener",this.getDatas,this)},r.prototype.getDatas=function(e){this.visualData=e.data},r.prototype.generateRows=function(r,i){if(this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url)return e.prototype.generateRows.call(this,r,i);t.isNullOrUndefined(i.requestType)||"collapseAll"!==i.requestType.toString()||(i.requestType="refresh");for(var n=e.prototype.generateRows.call(this,r,i),a=0;a<n.length;a++)n[a].index=this.visualData.indexOf(n[a].data);return n},r.prototype.checkAndResetCache=function(e){var t=["paging","refresh","sorting","filtering","searching","reorder","save","delete"].some((function(t){return e===t}));if(this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url){var r=this.model.currentPage;t?(this.cache={},this.data={},this.groups={}):"virtualscroll"===e&&this.cache[r]&&this.cache[r].length>this.parent.contentModule.getBlockSize()&&delete this.cache[r]}else(t||"virtualscroll"===e)&&(this.cache={},this.data={},this.groups={});return t},r}(r.VirtualRowModelGenerator),Ie=function(){function e(e){r.Grid.Inject(r.Filter),this.parent=e,this.isHierarchyFilter=!1,this.filteredResult=[],this.flatFilteredData=[],this.filteredParentRecs=[],this.addEventListener()}return e.prototype.getModuleName=function(){return"filter"},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("updateFilterRecs",this.updatedFilteredRecord,this),this.parent.on("clearFilters",this.clearFilterLevel,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updateFilterRecs",this.updatedFilteredRecord),this.parent.off("clearFilters",this.clearFilterLevel))},e.prototype.updatedFilteredRecord=function(e){t.setValue("uniqueIDFilterCollection",{},this.parent),this.flatFilteredData=e.data,this.filteredParentRecs=[],this.filteredResult=[],this.isHierarchyFilter=!1;for(var i=0;i<this.flatFilteredData.length;i++){var n=this.flatFilteredData[i];this.addParentRecord(n);var o=""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode;"Child"!==o&&"None"!==o||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key||(this.isHierarchyFilter=!0);var a=r.getObject("childRecords",n);!t.isNullOrUndefined(a)&&a.length&&t.setValue("hasFilteredChildRecords",this.checkChildExsist(n),n);var s=r.getObject("parentItem",n);if(!t.isNullOrUndefined(s)){var d=m(this.parent,n.parentItem.uniqueID,!0);t.setValue("hasFilteredChildRecords",!0,d),d&&d.parentItem&&this.updateParentFilteredRecord(d)}}this.flatFilteredData.length>0&&this.isHierarchyFilter&&this.updateFilterLevel(),this.parent.notify("updateAction",{result:this.filteredResult})},e.prototype.updateParentFilteredRecord=function(e){var r=m(this.parent,e.parentItem.uniqueID,!0),i=t.getValue("uniqueIDFilterCollection",this.parent);r&&i.hasOwnProperty(r.uniqueID)&&t.setValue("hasFilteredChildRecords",!0,r),r&&r.parentItem&&this.updateParentFilteredRecord(r)},e.prototype.addParentRecord=function(e){var r=m(this.parent,e.parentUniqueID);if("None"!==(""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode)||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key)t.isNullOrUndefined(r)||("Child"!==(""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode)||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key||-1!==this.flatFilteredData.indexOf(r))&&this.addParentRecord(r),-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),t.setValue("uniqueIDFilterCollection."+e.uniqueID,e,this.parent));else if(t.isNullOrUndefined(r)){if(-1!==this.flatFilteredData.indexOf(e))return void(-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),t.setValue("uniqueIDFilterCollection."+e.uniqueID,e,this.parent),e.hasFilteredChildRecords=!0))}else this.addParentRecord(r),-1!==this.flatFilteredData.indexOf(r)||-1!==this.filteredResult.indexOf(r)?-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),t.setValue("uniqueIDFilterCollection."+e.uniqueID,e,this.parent)):-1===this.filteredResult.indexOf(e)&&-1!==this.flatFilteredData.indexOf(e)&&(this.filteredResult.push(e),t.setValue("uniqueIDFilterCollection."+e.uniqueID,e,this.parent))},e.prototype.checkChildExsist=function(e){for(var i=r.getObject("childRecords",e),n=!1,o=0;o<i.length;o++){var a=i[o].childRecords,s=""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode;if("Child"!==s&&"Both"!==s||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key||t.getValue("uniqueIDFilterCollection",this.parent).hasOwnProperty(i[o].uniqueID)||(this.filteredResult.push(i[o]),t.setValue("uniqueIDFilterCollection."+i[o].uniqueID,i[o],this.parent),n=!0),"None"===s&&(0!==this.parent.grid.filterSettings.columns.length||""!==this.parent.grid.searchSettings.key)&&-1!==this.flatFilteredData.indexOf(i[o])){n=!0;break}!t.isNullOrUndefined(a)&&a.length&&(n=this.checkChildExsist(i[o])),"Child"!==s&&"Both"!==s||!i.length||(n=!0)}return n},e.prototype.updateFilterLevel=function(){for(var e=this.filteredResult,t=this.filteredResult.length,r=0;r<t;r++){var i=m(this.parent,e[r].parentUniqueID);if(-1!==e.indexOf(i)){var n=m(this.parent,e[r].parentUniqueID,!0);e[r].filterLevel=n.filterLevel+1}else e[r].filterLevel=0,this.filteredParentRecs.push(e[r])}},e.prototype.clearFilterLevel=function(e){for(var r,i=0,n=e.flatData,o=n.length;i<o;i++){var a=(r=n[i]).filterLevel;!a&&0!==a&&t.isNullOrUndefined(r.hasFilteredChildRecords)||(r.hasFilteredChildRecords=null,r.filterLevel=null)}this.filteredResult=[],this.parent.notify("updateResults",{result:n,count:n.length})},e}(),De=function(){function e(e){r.Grid.Inject(r.ExcelExport),this.parent=e,this.dataResults={},this.addEventListener()}return e.prototype.getModuleName=function(){return"ExcelExport"},e.prototype.addEventListener=function(){this.parent.on("updateResults",this.updateExcelResultModel,this),this.parent.on("excelCellInfo",this.excelQueryCellInfo,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updateResults",this.updateExcelResultModel),this.parent.off("excelCellInfo",this.excelQueryCellInfo))},e.prototype.updateExcelResultModel=function(e){this.dataResults=e},e.prototype.Map=function(e,i,n,a,s){var d=this,l=this.parent.dataSource,p=Object();return t.setValue("isCsv",s,p),t.setValue("cancel",!1,p),new Promise((function(h,c){var u=d.isLocal()?new o.DataManager(l):d.parent.dataSource,g=new o.Query;if(d.isLocal()||(g=d.generateQuery(g),t.setValue("query",g,p)),d.parent.trigger("beforeExcelExport",t.extend(p,e)),r.getObject("cancel",p))return null;u.executeQuery(g).then((function(r){var o=null;return t.isNullOrUndefined(e)||t.isNullOrUndefined(e.dataSource)||(o=e.dataSource),e=d.manipulateExportProperties(e,l,r),d.parent.grid.excelExportModule.Map(d.parent.grid,e,i,n,s,a).then((function(t){null!=o?e.dataSource=o:delete e.dataSource,h(t)}))}))}))},e.prototype.generateQuery=function(e,i){return!t.isNullOrUndefined(i)&&"CurrentPage"===i.exportType&&this.parent.allowPaging&&(i.exportType="AllPages",e.addParams("ExportType","CurrentPage"),e.where(this.parent.parentIdMapping,"equal",null),e=r.getObject("grid.renderModule.data.pageQuery",this.parent)(e)),e},e.prototype.manipulateExportProperties=function(e,i,n){var a=Object();if(t.setValue("query",this.parent.grid.getDataModule().generateQuery(!0),a),t.setValue("isExport",!0,a),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.exportType)||t.setValue("exportType",e.exportType,a),this.isLocal()&&t.isNullOrUndefined(this.parent.parentIdMapping)||(this.parent.parentData=[],this.parent.dataModule.convertToFlatData(r.getObject("result",n)),t.setValue("expresults",this.parent.flatData,a)),this.parent.notify("dataProcessor",a),a=this.dataResults,i=t.isNullOrUndefined(a.result)?this.parent.flatData.slice(0):a.result,this.isLocal()||(this.parent.flatData=[]),e&&e.dataSource&&this.isLocal()){var s=this.parent.flatData,d=e.dataSource instanceof o.DataManager?e.dataSource.dataSource.json:e.dataSource;this.parent.dataModule.convertToFlatData(d),i=this.parent.flatData,this.parent.flatData=s}return(e=t.isNullOrUndefined(e)?Object():e).dataSource=new o.DataManager({json:i}),e},e.prototype.excelQueryCellInfo=function(e){if(this.parent.grid.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex){var r={},i=e.data,n=t.isNullOrUndefined(i.filterLevel)?i.level:i.filterLevel;r.indent=n,e.style=r}this.parent.notify("updateResults",e),this.parent.trigger("excelQueryCellInfo",e)},e.prototype.isLocal=function(){return!s(this.parent)&&g(this.parent)},e}(),Me=function(){function e(e){r.Grid.Inject(r.PdfExport),this.parent=e,this.dataResults={},this.addEventListener()}return e.prototype.getModuleName=function(){return"PdfExport"},e.prototype.addEventListener=function(){this.parent.on("pdfCellInfo",this.pdfQueryCellInfo,this),this.parent.on("updateResults",this.updatePdfResultModel,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("pdfCellInfo",this.pdfQueryCellInfo),this.parent.off("updateResults",this.updatePdfResultModel))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.updatePdfResultModel=function(e){this.dataResults=e},e.prototype.Map=function(e,i,n,a){var d=this,l=this.parent.dataSource,p=Object(),h=!s(this.parent)&&g(this.parent);return t.setValue("cancel",!1,p),new Promise((function(s,c){var u=h?new o.DataManager(l):d.parent.dataSource,g=new o.Query;if(h||(g=d.generateQuery(g),t.setValue("query",g,p)),d.parent.trigger("beforePdfExport",t.extend(p,e)),r.getObject("cancel",p))return null;u.executeQuery(g).then((function(r){var o=null;return t.isNullOrUndefined(e)||t.isNullOrUndefined(e.dataSource)||(o=e.dataSource),e=d.manipulatePdfProperties(e,l,r),d.parent.grid.pdfExportModule.Map(d.parent.grid,e,i,n,a).then((function(t){null!=o?e.dataSource=o:delete e.dataSource,s(t)}))}))}))},e.prototype.generateQuery=function(e,i){return!t.isNullOrUndefined(i)&&"CurrentPage"===i.exportType&&this.parent.allowPaging&&(i.exportType="AllPages",e.addParams("ExportType","CurrentPage"),e.where(this.parent.parentIdMapping,"equal",null),e=r.getObject("grid.renderModule.data.pageQuery",this.parent)(e)),e},e.prototype.manipulatePdfProperties=function(e,r,i){var n={},a=!s(this.parent)&&g(this.parent);if(t.setValue("query",this.parent.grid.getDataModule().generateQuery(!0),n),t.setValue("isExport",!0,n),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.exportType)||t.setValue("exportType",e.exportType,n),a&&t.isNullOrUndefined(this.parent.parentIdMapping)||(this.parent.parentData=[],this.parent.dataModule.convertToFlatData(t.getValue("result",i)),t.setValue("expresults",this.parent.flatData,n)),this.parent.notify("dataProcessor",n),n=this.dataResults,r=t.isNullOrUndefined(n.result)?this.parent.flatData.slice(0):n.result,a||(this.parent.flatData=[]),e&&e.dataSource&&a){var d=this.parent.flatData,l=e.dataSource instanceof o.DataManager?e.dataSource.dataSource.json:e.dataSource;this.parent.dataModule.convertToFlatData(l),r=this.parent.flatData,this.parent.flatData=d}return(e=t.isNullOrUndefined(e)?{}:e).dataSource=new o.DataManager({json:r}),e},e.prototype.pdfQueryCellInfo=function(e){if(this.parent.grid.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex){var i={},n=r.getObject("data",e),o=t.isNullOrUndefined(n.filterLevel)?n.level:n.filterLevel;i.paragraphIndent=3*o,e.style=i}this.parent.notify("updateResults",e),this.parent.trigger("pdfQueryCellInfo",e)},e}(),Pe=function(){function e(e){r.Grid.Inject(r.Page),this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("localPagedExpandCollapse",this.collapseExpandPagedchilds,this),this.parent.on("pagingActions",this.pageAction,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("localPagedExpandCollapse",this.collapseExpandPagedchilds),this.parent.off("pagingActions",this.pageAction))},e.prototype.getModuleName=function(){return"pager"},e.prototype.refresh=function(){this.parent.grid.pagerModule.refresh()},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.goToPage=function(e){this.parent.grid.pagerModule.goToPage(e)},e.prototype.updateExternalMessage=function(e){this.parent.grid.pagerModule.updateExternalMessage(e)},e.prototype.collapseExpandPagedchilds=function(e){e.record.expanded="collapse"!==e.action,t.isBlazor()&&(this.parent.flatData.filter((function(t){return t.uniqueID===e.record.uniqueID}))[0].expanded="collapse"!==e.action);var r={result:this.parent.flatData,row:e.row,action:e.action,record:e.record,count:this.parent.flatData.length};t.getValue("grid.renderModule",this.parent).dataManagerSuccess(r)},e.prototype.pageRoot=function(e,r,i){for(var n=t.isNullOrUndefined(i)?[]:i,o=this,a=0;a<r.length;a++)!function(t){n.push(r[t]);var i=[];r[t].hasChildRecords&&(i=e.filter((function(e){return r[t].uniqueID===e.parentUniqueID})),n=o.pageRoot(e,i,n))}(a);return n},e.prototype.pageAction=function(e){var t=this,r=new o.DataManager(e.result);if("Root"===this.parent.pageSettings.pageSizeMode){var i=[],n=this.parent.grid.filterSettings.columns.length>0&&("Child"===this.parent.filterSettings.hierarchyMode||"None"===this.parent.filterSettings.hierarchyMode)?"filterLevel":"level",a=(new o.Query).where(n,"equal",0);i=r.executeLocal(a),e.count=i.length,y=(g=this.parent.grid.pageSettings.pageSize)*((f=this.parent.grid.pageSettings.currentPage)-1),a=a.skip(y).take(g),i=r.executeLocal(a);var s=this.pageRoot(e.result,i);e.result=s}else{var d,l=new o.DataManager(e.result),h=new o.Predicate("expanded","notequal",null).or("expanded","notequal",void 0),u=l.executeLocal((new o.Query).where(h));d=p(this.parent)?u:u.filter((function(e){return c(t.parent,e,u)})),e.count=d.length;a=new o.Query;var g=this.parent.grid.pageSettings.pageSize,f=this.parent.grid.pageSettings.currentPage;d.length<f*g&&(f=(f=Math.floor(d.length/g)+(d.length%g?1:0))||1,this.parent.grid.setProperties({pageSettings:{currentPage:f}},!0));var y=g*(f-1);a=a.skip(y).take(g),l.dataSource.json=d,e.result=l.executeLocal(a)}this.parent.notify("updateAction",e)},e}(),Oe=function(){function e(e){r.Grid.Inject(r.Toolbar),this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"toolbar"},e.prototype.addEventListener=function(){this.parent.on("rowSelected",this.refreshToolbar,this),this.parent.on("toolbarClick",this.toolbarClickHandler,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("rowSelected",this.refreshToolbar),this.parent.off("toolbarClick",this.toolbarClickHandler))},e.prototype.refreshToolbar=function(e){var r=this.parent;0===e.row.rowIndex||r.getSelectedRecords().length>1?this.enableItems([r.element.id+"_gridcontrol_indent",r.element.id+"_gridcontrol_outdent"],!1):t.isNullOrUndefined(r.getCurrentViewRecords()[e.row.rowIndex])||(!t.isNullOrUndefined(r.getCurrentViewRecords()[e.row.rowIndex])&&r.getCurrentViewRecords()[e.row.rowIndex].level>r.getCurrentViewRecords()[e.row.rowIndex-1].level?this.enableItems([r.element.id+"_gridcontrol_indent"],!1):this.enableItems([r.element.id+"_gridcontrol_indent"],!0),r.getCurrentViewRecords()[e.row.rowIndex].level===r.getCurrentViewRecords()[e.row.rowIndex-1].level&&this.enableItems([r.element.id+"_gridcontrol_indent"],!0),0===r.getCurrentViewRecords()[e.row.rowIndex].level&&this.enableItems([r.element.id+"_gridcontrol_outdent"],!1),0!==r.getCurrentViewRecords()[e.row.rowIndex].level&&this.enableItems([r.element.id+"_gridcontrol_outdent"],!0)),0!==e.row.rowIndex||t.isNullOrUndefined(e.data.parentItem)||this.enableItems([r.element.id+"_gridcontrol_outdent"],!0)},e.prototype.toolbarClickHandler=function(e){var t=this.parent;if("Cell"===this.parent.editSettings.mode&&"Batch"===this.parent.grid.editSettings.mode&&e.item.id===this.parent.grid.element.id+"_update"&&(e.cancel=!0,this.parent.grid.editModule.saveCell()),e.item.id===this.parent.grid.element.id+"_expandall"&&this.parent.expandAll(),e.item.id===this.parent.grid.element.id+"_collapseall"&&this.parent.collapseAll(),e.item.id===t.grid.element.id+"_indent"&&t.getSelectedRecords().length){var r=t.getCurrentViewRecords()[t.getSelectedRowIndexes()[0]-1],i=void 0;if(r.level>t.getSelectedRecords()[0].level)for(a=0;a<t.getCurrentViewRecords().length;a++)t.getCurrentViewRecords()[a].taskData===r.parentItem.taskData&&(i=a);else i=t.getSelectedRowIndexes()[0]-1;t.reorderRows([t.getSelectedRowIndexes()[0]],i,"child")}if(e.item.id===t.grid.element.id+"_outdent"&&t.getSelectedRecords().length){for(var n=t.getSelectedRowIndexes()[0],o=(i=void 0,t.getSelectedRecords()[0].parentItem),a=0;a<t.getCurrentViewRecords().length;a++)t.getCurrentViewRecords()[a].taskData===o.taskData&&(i=a);t.reorderRows([n],i,"below")}},e.prototype.getToolbar=function(){return this.parent.grid.toolbarModule.getToolbar()},e.prototype.enableItems=function(e,t){this.parent.grid.toolbarModule.enableItems(e,t)},e.prototype.destroy=function(){this.removeEventListener()},e}(),Ee=function(){function e(e){r.Grid.Inject(r.Aggregate),this.parent=e,this.flatChildRecords=[],this.summaryQuery=[]}return e.prototype.getModuleName=function(){return"summary"},e.prototype.removeEventListener=function(){this.parent.isDestroyed},e.prototype.calculateSummaryValue=function(e,i,n){var o,a;this.summaryQuery=e,a=[];for(var s=0,d=Object.keys(i).length;s<d;s++)r.getObject("isSummaryRow",i[s])||a.push(i[s]);var l,p=h(a);l=a.slice();var c,u=Object.keys(this.parent.columns).length,g=Object.keys(this.parent.aggregates).length,f=0;for(d=Object.keys(p).length;f<d;f++)if(o=p[f],c=this.getChildRecordsLength(o,l)){for(var y=this,m=1,v=g;m<=v;m++)!function(e,i){var a,s=void 0;s={};for(var d=0,p=u;d<p;d++)s[t.isNullOrUndefined(r.getObject("field",y.parent.columns[d]))?y.parent.columns[d]:r.getObject("field",y.parent.columns[d])]=null;if(!y.parent.aggregates[e-1].showChildSummary)return"continue";s=y.createSummaryItem(s,y.parent.aggregates[e-1]),l.map((function(e,t){e.uniqueID!==o.uniqueID||(a=t)}));var h=a+c+e,g=t.extend({},o);delete g.childRecords,delete g[y.parent.childMapping],t.setValue("parentItem",g,s);var f=r.getObject("level",g);if(t.setValue("level",f+1,s),r.getObject("index",g),t.setValue("isSummaryRow",!0,s),t.setValue("parentUniqueID",g.uniqueID,s),n){var m=r.getObject("childRecords",o);m.length&&m.push(s)}l.splice(h,0,s)}(m);this.flatChildRecords=[]}return l},e.prototype.getChildRecordsLength=function(e,i){for(var n,o=0,a=Object.keys(i).length;o<a;o++)if(n=i[o],e===(t.isNullOrUndefined(n.parentItem)?null:i.filter((function(e){return e.uniqueID===n.parentItem.uniqueID}))[0])){if(this.flatChildRecords.push(n),!r.getObject("hasChildRecords",n))continue;this.getChildRecordsLength(n,i)}return this.flatChildRecords.length},e.prototype.createSummaryItem=function(e,r){for(var i=0,n=Object.keys(r.columns).length;i<n;i++)for(var o=t.isNullOrUndefined(r.columns[i].columnName)?r.columns[i].field:r.columns[i].columnName,a=0,s=Object.keys(e);a<s.length;a++){var d=s[a];d===o&&(e[d]=this.getSummaryValues(r.columns[i],this.flatChildRecords))}return e},e.prototype.getSummaryValues=function(e,i){var n,a=new o.Query;n={};var s={},d=t.isNullOrUndefined(e.field)?void 0:this.parent.getColumnByField(e.field).type;e.setPropertiesSilent({format:this.getFormatFromType(e.format,d)}),e.setFormatter(this.parent.grid.locale);var l=e.getFormatter()||function(e){return e};e.setTemplate(s);var p=e.getTemplate(2);a.queries=this.summaryQuery,a.requiresCount();var h,c=new o.DataManager(i).executeLocal(a),u=e.type;u=[e.type];for(var g=0;g<u.length;g++){h=u[g];var f=e.field+" - "+u[g].toLowerCase(),y="Custom"!==u[g]?r.getObject("aggregates",c):r.calculateAggregate(u[g],c,e,this.parent),m=e.columnName,v="Custom"!==u[g]?y[f]:y;n[m]=n[m]||{},n[m][f]=v,n[m][u[g]]=t.isNullOrUndefined(y)?" ":l(v)}s.format=e.getFormatter();var w=t.createElement("td",{className:"e-summary"});r.appendChildren(w,p.fn(n[e.columnName],this.parent,p.property));var R=n[e.columnName][h];return-1===w.innerHTML.indexOf(R)?w.innerHTML+R:w.innerHTML},e.prototype.getFormatFromType=function(e,r){if(t.isNullOrUndefined(r)||"string"!=typeof e)return e;var i;switch(r){case"number":i={format:e};break;case"datetime":i={type:"dateTime",skeleton:e};break;case"date":i={type:r,skeleton:e}}return i},e.prototype.destroy=function(){this.removeEventListener()},e}(),Ae=function(){function e(e){r.Grid.Inject(r.Sort),this.parent=e,this.taskIds=[],this.flatSortedData=[],this.storedIndex=-1,this.isSelfReference=!t.isNullOrUndefined(this.parent.parentIdMapping),this.addEventListener()}return e.prototype.getModuleName=function(){return"sort"},e.prototype.addEventListener=function(){this.parent.on("updateModel",this.updateModel,this),this.parent.on("createSort",this.createdSortedRecords,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updateModel",this.updateModel),this.parent.off("createSort",this.createdSortedRecords))},e.prototype.createdSortedRecords=function(e){var t=e.modifiedData,r=e.srtQry;this.iterateSort(t,r),this.storedIndex=-1,e.modifiedData=this.flatSortedData,this.flatSortedData=[]},e.prototype.iterateSort=function(e,r){for(var i=0;i<e.length;i++)if((this.parent.grid.filterSettings.columns.length>0||""!==this.parent.grid.searchSettings.key)&&t.isNullOrUndefined(m(this.parent,e[i].uniqueID,!0))||(this.storedIndex++,this.flatSortedData[this.storedIndex]=e[i]),e[i].hasChildRecords){var n=new o.DataManager(e[i].childRecords).executeLocal(r);this.iterateSort(n,r)}},e.prototype.sortColumn=function(e,t,r){this.parent.grid.sortColumn(e,t,r)},e.prototype.removeSortColumn=function(e){this.parent.grid.removeSortColumn(e)},e.prototype.updateModel=function(){this.parent.setProperties({sortSettings:r.getActualProperties(this.parent.grid.sortSettings)},!0)},e.prototype.clearSorting=function(){this.parent.grid.clearSorting(),this.updateModel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),ke=function(){function e(e){r.Grid.Inject(r.ColumnMenu),this.parent=e}return e.prototype.getColumnMenu=function(){return this.parent.grid.columnMenuModule.getColumnMenu()},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"columnMenu"},e}(),qe=function(){function e(e){r.Grid.Inject(r.ContextMenu),this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("contextMenuOpen",this.contextMenuOpen,this),this.parent.on("contextMenuClick",this.contextMenuClick,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("contextMenuOpen",this.contextMenuOpen),this.parent.off("contextMenuClick",this.contextMenuClick))},e.prototype.contextMenuOpen=function(e){var r=e.element.querySelector("#"+this.parent.element.id+"_gridcontrol_cmenu_AddRow"),i=e.element.querySelector("#"+this.parent.element.id+"_gridcontrol_cmenu_Edit");r&&(!1===this.parent.grid.editSettings.allowAdding?r.style.display="none":r.style.display="block"),"Cell"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode||t.isNullOrUndefined(i)||i.classList.contains("e-menu-hide")||(i.style.display="none")},e.prototype.contextMenuClick=function(e){"Above"!==e.item.id&&"Below"!==e.item.id||(this.parent.notify("savePreviousRowPosition",e),this.parent.setProperties({editSettings:{newRowPosition:e.item.id}},!0),this.parent.addRecord())},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getContextMenu=function(){return this.parent.grid.contextMenuModule.getContextMenu()},e}(),Be=function(){function e(e){this.batchChildCount=0,this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",this.batchAddedRecords=[],this.batchDeletedRecords=[],this.batchAddRowRecord=[],this.parent=e,this.isSelfReference=!t.isNullOrUndefined(e.parentIdMapping),this.batchRecords=[],this.currentViewRecords=[],this.isAdd=!1,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("cellSaved",this.cellSaved,this),this.parent.on("batchAdd",this.batchAdd,this),this.parent.on("beforeBatchAdd",this.beforeBatchAdd,this),this.parent.on("batchSave",this.batchSave,this),this.parent.on("beforeBatchDelete",this.beforeBatchDelete,this),this.parent.on("beforeBatchSave",this.beforeBatchSave,this),this.parent.on("batchPageAction",this.batchPageAction,this),this.parent.on("batchCancelAction",this.batchCancelAction,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("cellSaved",this.cellSaved),this.parent.off("batchAdd",this.batchAdd),this.parent.off("batchSave",this.batchSave),this.parent.off("beforeBatchAdd",this.beforeBatchAdd),this.parent.off("beforeBatchDelete",this.beforeBatchDelete),this.parent.off("beforeBatchSave",this.beforeBatchSave),this.parent.off("batchPageAction",this.batchPageAction),this.parent.off("batchCancelAction",this.batchCancelAction))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getBatchRecords=function(){return this.batchRecords},e.prototype.getAddRowIndex=function(){return this.addRowIndex},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.getBatchChildCount=function(){return this.batchChildCount},e.prototype.batchPageAction=function(){var e,r=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,i=this.parent.grid.getPrimaryKeyFieldNames()[0];if(!t.isNullOrUndefined(this.batchAddedRecords)&&this.batchAddedRecords.length)for(var n=0;n<this.batchAddedRecords.length;n++)e=r.map((function(e){return e[i]})).indexOf(this.batchAddedRecords[n][i]),r.splice(e,1);this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.batchDeletedRecords=this.currentViewRecords=[]},e.prototype.cellSaved=function(e){if(e.cell.cellIndex===this.parent.treeColumnIndex&&this.parent.renderModule.cellRender({data:e.rowData,cell:e.cell,column:this.parent.grid.getColumnByIndex(e.cell.cellIndex)}),this.isAdd&&"Batch"===this.parent.editSettings.mode&&"Bottom"!==this.parent.editSettings.newRowPosition){var i,n=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,a=void 0,s=this.parent.grid.getPrimaryKeyFieldNames()[0],d=void 0,l=void 0;i=this.selectedIndex>-1?this.batchRecords[this.addRowIndex].parentItem:null;var p=void 0,h=void 0,c=void 0;if(this.newBatchRowAdded){if(this.batchRecords.length&&(p=this.batchRecords[this.addRowIndex][this.parent.idMapping],c=this.batchRecords[this.addRowIndex][this.parent.parentIdMapping],this.batchRecords[this.addRowIndex].parentItem&&(h=this.batchRecords[this.addRowIndex].parentItem.uniqueID)),this.batchAddedRecords=f(this.batchAddedRecords),this.batchAddRowRecord=f(this.batchAddRowRecord),this.batchAddRowRecord.push(this.batchRecords[this.addRowIndex]),(a=this.parent.grid.getRowsObject()[0].changes).uniqueID=r.getUid(this.parent.element.id+"_data_"),t.setValue("uniqueIDCollection."+a.uniqueID,a,this.parent),!a.hasOwnProperty("level")){if(this.batchIndex=-1===this.selectedIndex?0:this.batchIndex,"Child"===this.parent.editSettings.newRowPosition){if(a.primaryParent=i,this.selectedIndex>-1){a.parentItem=t.extend({},this.batchRecords[this.addRowIndex]),a.parentUniqueID=a.parentItem.uniqueID,delete a.parentItem.childRecords,delete a.parentItem[this.parent.childMapping],a.level=a.parentItem.level+1,a.index=this.batchIndex;var g=u(this.batchRecords[this.addRowIndex]).length,y=u(this.batchRecords[this.addRowIndex])[g-1];y=t.isNullOrUndefined(y)?this.batchRecords[this.addRowIndex]:y,d=n.map((function(e){return e[s]})).indexOf(y[s]),this.isSelfReference&&(a[this.parent.parentIdMapping]=p),C(s,a.parentItem,"add",this.parent,this.isSelfReference,a)}}else if("Above"===this.parent.editSettings.newRowPosition||"Below"===this.parent.editSettings.newRowPosition){if(a.level=this.batchRecords[this.addRowIndex].level,a.level&&(a.parentItem=i,a.parentUniqueID=h,delete a.parentItem.childRecords,delete a.parentItem[this.parent.childMapping]),a.index="Below"===this.parent.editSettings.newRowPosition?this.batchIndex:this.batchIndex-1,"Below"===this.parent.editSettings.newRowPosition&&this.selectedIndex>-1){g=u(this.batchRecords[this.addRowIndex]).length,y=u(this.batchRecords[this.addRowIndex])[g-1];y=t.isNullOrUndefined(y)?this.batchRecords[this.addRowIndex]:y,d=n.map((function(e){return e[s]})).indexOf(y[s])}"Above"===this.parent.editSettings.newRowPosition&&this.selectedIndex>-1&&(y=this.batchRecords[this.addRowIndex],d=n.map((function(e){return e[s]})).indexOf(y[s])),this.isSelfReference&&(a[this.parent.parentIdMapping]=c)}a.index=-1===a.index?0:a.index,a.hasChildRecords=!1,a.childRecords=[],this.batchRecords.splice(a.index,0,a),this.currentViewRecords.splice(a.index,0,a),l=d||a.index,"Above"!==this.parent.editSettings.newRowPosition&&(l=0===a.index?l:l+1),n.splice(l,0,a),this.batchAddedRecords.push(a)}this.parent.grid.getRowsObject()[0].data=a,this.newBatchRowAdded=!1}}},e.prototype.beforeBatchAdd=function(e){this.selectedIndex=this.parent.grid.selectedRowIndex,this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0,this.addRowRecord=this.parent.getSelectedRecords()[0]},e.prototype.batchAdd=function(e){if("Bottom"!==this.parent.editSettings.newRowPosition){this.isAdd=!0,this.newBatchRowAdded=!0;var r=0;if(this.batchRecords.length||(this.batchAddedRecords=[],this.batchRecords=f(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=f(this.parent.grid.getCurrentViewRecords())),"Top"!==this.parent.editSettings.newRowPosition){var i=this.parent.grid.getCurrentViewRecords();"Batch"===this.parent.editSettings.mode&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(i=this.batchRecords),this.updateChildCount(i),this.parent.notify("beginAdd",{}),this.batchChildCount=0}this.updateRowIndex();var n=t.getValue("focusModule",this.parent.grid),o=this.parent.getContentTable();this.parent.getBatchChanges()[this.deletedRecords].length&&"Above"===this.parent.editSettings.newRowPosition?(r=e.row.rowIndex,n.getContent().matrix.matrix=this.matrix):(r=o.getElementsByClassName("e-batchrow")[0].rowIndex,(this.parent.frozenRows||this.parent.frozenColumns)&&(r=this.batchIndex)),n.getContent().matrix.current=[r,n.getContent().matrix.current[1]]}},e.prototype.beforeBatchDelete=function(e){this.batchRecords.length||(this.batchRecords=f(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=f(this.parent.grid.getCurrentViewRecords()));var r=t.getValue("focusModule",this.parent.grid);this.matrix=r.getContent().matrix.matrix,this.parent=this.parent;var i,n,o=[],a=this.parent.grid.getPrimaryKeyFieldNames()[0],s=u(n=this.parent.grid.getSelectedRecords()[this.parent.grid.getSelectedRecords().length-1]);if(s.length)for(c=0;c<s.length;c++){var d=this.parent.grid.getRowIndexByPrimaryKey(s[c][a]);o.push(this.parent.grid.getRows()[d])}if(!t.isNullOrUndefined(n.parentItem)){var l=m(this.parent,n.parentItem.uniqueID);if(!t.isNullOrUndefined(l)&&l.hasChildRecords){var p=l.childRecords.indexOf(n);l.childRecords.splice(p,1)}this.batchDeletedRecords=f(this.batchDeletedRecords),this.batchDeletedRecords.push(n)}for(s.push(n),i=s,c=0;c<i.length;c++){var h=this.batchRecords.map((function(e){return e[a]})).indexOf(i[c][a]);-1!==h&&this.batchRecords.splice(h,1)}for(var c=0;c<o.length;c++)t.isNullOrUndefined(o[c])||this.parent.grid.selectionModule.selectedRecords.push(o[c])},e.prototype.updateRowIndex=function(){for(var e=this.parent.grid.getDataRows(),t=0;t<e.length;t++)e[t].setAttribute("aria-rowindex",t.toString())},e.prototype.updateChildCount=function(e){for(var r=this.parent.grid.getPrimaryKeyFieldNames()[0],i="Child"===this.parent.editSettings.newRowPosition?"primaryParent":"parentItem",n=1;n<this.parent.getBatchChanges().addedRecords.length;n++)t.isNullOrUndefined(this.parent.getBatchChanges().addedRecords[n][i])||this.parent.getBatchChanges().addedRecords[n][i][r]===e[this.addRowIndex][r]&&(this.batchChildCount=this.batchChildCount+1)},e.prototype.beforeBatchSave=function(e){var t=e.batchChanges.changedRecords;if(e.batchChanges.changedRecords.length)for(i=0;i<t.length;i++)v({value:t[i],action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,void 0);if(e.batchChanges.deletedRecords.length)for(var r=e.batchChanges.deletedRecords,i=0;i<r.length;i++){this.deleteUniqueID(r[i].uniqueID);for(var n=u(r[i]),o=0;o<n.length;o++)this.deleteUniqueID(n[o].uniqueID);e.batchChanges.deletedRecords=e.batchChanges.deletedRecords.concat(n)}this.isAdd=!1},e.prototype.deleteUniqueID=function(e){delete this.parent.uniqueIDFilterCollection[e],delete this.parent.uniqueIDCollection[e]},e.prototype.batchCancelAction=function(){var e,r=this.parent.grid.getCurrentViewRecords(),i=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,n=this.parent.grid.getPrimaryKeyFieldNames()[0];if(!t.isNullOrUndefined(this.parent.targetElement)){var a=this.parent.targetElement.closest("tr");this.parent.collapseRow(a),this.parent.targetElement=null}if(!t.isNullOrUndefined(this.batchAddedRecords))for(l=0;l<this.batchAddedRecords.length;l++)if(e=i.map((function(e){return e[n]})).indexOf(this.batchAddedRecords[l][n]),i.splice(e,1),"Child"===this.parent.editSettings.newRowPosition)for(var s=r[e=r.map((function(e){return e[n]})).indexOf(this.batchAddedRecords[l].parentItem[n])].childRecords,d=0;d<s.length;d++)s[d][n]===this.batchAddedRecords[l][n]&&r[e].childRecords.splice(d,1);if(!t.isNullOrUndefined(this.batchDeletedRecords))for(var l=0;l<this.batchDeletedRecords.length;l++)if(!t.isNullOrUndefined(this.batchDeletedRecords[l].parentItem)){e=r.map((function(e){return e[n]})).indexOf(this.batchDeletedRecords[l].parentItem[n]);var p=0===this.batchDeletedRecords[l].index?this.batchDeletedRecords[l].index:this.batchDeletedRecords[l].index-1;r[e].childRecords.splice(p,0,this.batchDeletedRecords[l])}this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.currentViewRecords=[],this.batchRecords=f(this.parent.grid.getCurrentViewRecords()),this.batchIndex=0,this.currentViewRecords=f(this.parent.grid.getCurrentViewRecords()),this.batchDeletedRecords=[],this.parent.refresh()},e.prototype.batchSave=function(e){if("Batch"===this.parent.editSettings.mode){var r=void 0,i=this.parent.getBatchChanges(),n=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,a=this.parent.grid.getCurrentViewRecords(),s=this.parent.grid.getPrimaryKeyFieldNames()[0],d=i.addedRecords,l=void 0,p=void 0,h=void 0;if(d.length>1&&"Bottom"!==this.parent.editSettings.newRowPosition&&d.reverse(),"Bottom"!==this.parent.editSettings.newRowPosition)if(n.splice(n.length-d.length,d.length),this.parent.allowPaging){var c=f(n),u=c.map((function(e){return e[s]})).indexOf(a[0][s]),g=u+this.parent.grid.pageSettings.pageSize;a=c.splice(u,g)}else a.length>d.length&&a.splice(a.length-d.length,d.length);for(r=0;r<d.length;r++){var y=t.extend({},d[r]);if(delete y.parentItem,delete y.uniqueID,delete y.index,delete y.level,delete y.hasChildRecords,delete y.childRecords,delete y.parentUniqueID,t.isNullOrUndefined(y.primaryParent)||delete y.primaryParent,d[r].taskData=y,h=this.batchAddRowRecord[r],t.isNullOrUndefined(h)&&(h=this.batchAddRowRecord[r-1]),this.isSelfReference&&(t.isNullOrUndefined(d[r].parentItem)||C(s,d[r].parentItem,"add",this.parent,this.isSelfReference,d[r])),t.isNullOrUndefined(h)||(p=h.index),"Top"!==this.parent.editSettings.newRowPosition&&"Bottom"!==this.parent.editSettings.newRowPosition&&t.isNullOrUndefined(d[r].parentItem)&&-1===this.selectedIndex&&(l=-1,h=null),v({value:d[r],action:"add"},this.parent,this.isSelfReference,p,l,void 0,h),l=null,"Child"===this.parent.editSettings.newRowPosition&&!t.isNullOrUndefined(d[r].parentItem))for(var m=a.map((function(e){return e[s]})).indexOf(d[r].parentItem[s]),w=a[m].childRecords,R=0;R<w.length;R++)w[R][s]===d[r][s]&&a[m].childRecords.splice(R,1)}if(i.deletedRecords.length)for(r=0;r<i.deletedRecords.length;r++)v({value:i.deletedRecords[r],action:"delete"},this.parent,this.isSelfReference,p,l,void 0,h);this.parent.parentData=[];for(var x=0;x<n.length;x++)n[x].index=x,t.setValue("uniqueIDCollection."+n[x].uniqueID+".index",x,this.parent),n[x].level||this.parent.parentData.push(n[x])}this.batchAddRowRecord=this.batchAddedRecords=this.batchRecords=this.batchDeletedRecords=this.currentViewRecords=[]},e}(),Ne=function(){function e(e){this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",r.Grid.Inject(r.Edit),this.parent=e,this.isSelfReference=!t.isNullOrUndefined(e.parentIdMapping),this.previousNewRowPosition=null,this.internalProperties={},this.batchEditModule=new Be(this.parent),this.addEventListener()}return e.prototype.getModuleName=function(){return"edit"},e.prototype.addEventListener=function(){this.parent.on("crudAction",this.crudAction,this),this.parent.on("beginEdit",this.beginEdit,this),this.parent.on("beginAdd",this.beginAdd,this),this.parent.on("recordDoubleClick",this.recordDoubleClick,this),this.parent.on("cellSave",this.cellSave,this),this.parent.on("batchCancel",this.batchCancel,this),this.parent.grid.on("key-pressed",this.keyPressed,this),this.parent.grid.on("content-ready",this.contentready,this),this.parent.on("cellEdit",this.cellEdit,this),this.parent.on("actionBegin",this.editActionEvents,this),this.parent.on("actionComplete",this.editActionEvents,this),this.parent.grid.on("double-tap",this.recordDoubleClick,this),this.parent.grid.on("dblclick",this.gridDblClick,this),this.parent.on("savePreviousRowPosition",this.savePreviousRowPosition,this),this.parent.grid.on("edit-form",this.beforeStartEdit,this),this.parent.grid.on("before-batch-cancel",this.beforeBatchCancel,this)},e.prototype.gridDblClick=function(e){this.doubleClickTarget=e.target},e.prototype.beforeStartEdit=function(e){this.parent.trigger("actionBegin",e)},e.prototype.beforeBatchCancel=function(e){"Cell"===this.parent.editSettings.mode&&this.parent.trigger("actionComplete",e)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("crudAction",this.crudAction),this.parent.off("beginEdit",this.beginEdit),this.parent.off("beginAdd",this.beginAdd),this.parent.off("recordDoubleClick",this.recordDoubleClick),this.parent.off("batchCancel",this.batchCancel),this.parent.grid.off("key-pressed",this.keyPressed),this.parent.grid.off("content-ready",this.contentready),this.parent.off("cellEdit",this.cellEdit),this.parent.off("actionBegin",this.editActionEvents),this.parent.off("actionComplete",this.editActionEvents),this.parent.grid.off("double-tap",this.recordDoubleClick),this.parent.off("savePreviousRowPosition",this.savePreviousRowPosition),this.parent.grid.off("edit-form",this.beforeStartEdit),this.parent.grid.off("before-batch-cancel",this.beforeBatchCancel),this.parent.grid.off("dblclick",this.gridDblClick))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.applyFormValidation=function(e){this.parent.grid.editModule.applyFormValidation(e)},e.prototype.editActionEvents=function(e){var i=r.getObject("editAction",e),n=r.getObject("name",i),a=this.parent,d=a.dataSource.adaptor;if((s(a)||d instanceof o.RemoteSaveAdaptor)&&"save"===i.requestType&&"add"===i.action&&("Child"===a.editSettings.newRowPosition||"Below"===a.editSettings.newRowPosition||"Above"===a.editSettings.newRowPosition))if("actionBegin"===n){var l=t.isNullOrUndefined(i.row)||!Object.keys(i.row).length?this.selectedIndex:i.row.rowIndex-1,p=t.isNullOrUndefined(l)||-1===l?-1:a.getCurrentViewRecords()[l][a.getPrimaryKeyFieldNames()[0]];a.grid.query.addParams("relationalKey",p)}else if("actionComplete"===n)for(var h=a.grid.query.params.length,c=0;c<h;c++)"relationalKey"===a.grid.query.params[c].key&&a.grid.query.params.splice(c);"Batch"===this.parent.editSettings.mode&&"paging"===i.requestType&&this.parent.notify("batchPageAction",{})},e.prototype.recordDoubleClick=function(e){var r=e.target;if(!t.isNullOrUndefined(r.closest("td.e-rowcell"))){var i=this.parent.grid.getColumnByIndex(+r.closest("td.e-rowcell").getAttribute("aria-colindex"));"Cell"!==this.parent.editSettings.mode||this.isOnBatch||!i||i.isPrimaryKey||!i.allowEditing||r.classList.contains("e-treegridexpand")||r.classList.contains("e-treegridcollapse")||!this.parent.editSettings.allowEditOnDblClick||(this.isOnBatch=!0,this.parent.grid.setProperties({selectedRowIndex:e.rowIndex},!0),this.updateGridEditMode("Batch"))}},e.prototype.updateGridEditMode=function(e){this.parent.grid.setProperties({editSettings:{mode:e}},!0),r.getObject("updateEditObj",this.parent.grid.editModule).apply(this.parent.grid.editModule),this.parent.grid.isEdit=!1},e.prototype.keyPressed=function(e){(this.isOnBatch||"Cell"===this.parent.editSettings.mode&&t.isBlazor()&&this.parent.isServerRendered)&&(this.keyPress=e.action),"f2"===e.action&&this.recordDoubleClick(e)},e.prototype.deleteUniqueID=function(e){delete this.parent.uniqueIDFilterCollection[e],delete this.parent.uniqueIDCollection[e]},e.prototype.cellEdit=function(e){var r=this,i=e.promise;if(delete e.promise,"enter"!==this.keyPress&&this.parent.trigger("cellEdit",e,(function(e){e.cancel||"Cell"!==r.parent.editSettings.mode?e.cancel&&"Cell"===r.parent.editSettings.mode&&(r.isOnBatch=!1,r.updateGridEditMode("Normal")):r.enableToolbarItems("edit"),t.isNullOrUndefined(i)||i.resolve(e)})),this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")))return e.cancel=!0,void(this.doubleClickTarget=null);"Cell"===this.parent.editSettings.mode&&("tab"===this.keyPress||"shiftTab"===this.keyPress?this.keyPress=null:"enter"===this.keyPress&&(e.cancel=!0,this.keyPress=null))},e.prototype.enableToolbarItems=function(e){if(!t.isNullOrUndefined(this.parent.grid.toolbarModule)){var r=this.parent.element.id+"_gridcontrol_";this.parent.grid.toolbarModule.enableItems([r+"add",r+"edit",r+"delete"],"save"===e),this.parent.grid.toolbarModule.enableItems([r+"update",r+"cancel"],"edit"===e)}},e.prototype.batchCancel=function(e){if("Cell"===this.parent.editSettings.mode){var r=t.getValue("editModule.cellDetails",this.parent.grid.editModule),i=r.rowIndex;this.parent.renderModule.cellRender({data:r.rowData,cell:this.parent.getRows()[i].cells[this.parent.treeColumnIndex],column:this.parent.grid.getColumns()[this.parent.treeColumnIndex]}),this.updateGridEditMode("Normal"),this.isOnBatch=!1}"Batch"===this.parent.editSettings.mode&&this.parent.notify("batchCancelAction",{})},e.prototype.cellSave=function(e){if("Cell"===this.parent.editSettings.mode&&this.parent.element.querySelector("form")){e.cancel=!0,t.setValue("isEdit",!1,this.parent.grid),t.setValue("isEditCollapse",!0,this.parent),e.rowData[e.columnName]=e.value;var r=void 0;r=t.isNullOrUndefined(e.cell)?this.parent.grid.editModule.editModule.form.parentElement.parentNode:e.cell.parentNode;var i,n=this.parent.getPrimaryKeyFieldNames();t.isNullOrUndefined(r)?this.parent.grid.getCurrentViewRecords().filter((function(t,r){t[n[0]]!==e.rowData[n[0]]||(i=r)})):i=this.parent.getRows().indexOf(r);var o={};if(t.extend(o,e),o.cancel=!1,o.type="save",r=this.parent.grid.getRows()[r.rowIndex],this.parent.trigger("actionBegin",o),o.cancel)this.parent.grid.isEdit=!0;else{this.blazorTemplates(e),this.updateCell(e,i),this.parent.grid.aggregateModule&&this.parent.grid.aggregateModule.refresh(e.rowData),this.parent.grid.editModule.formObj.destroy(),"tab"!==this.keyPress&&"shiftTab"!==this.keyPress&&(this.updateGridEditMode("Normal"),this.isOnBatch=!1),this.enableToolbarItems("save"),t.removeClass([r],["e-editedrow","e-batchrow"]),t.removeClass(r.querySelectorAll(".e-rowcell"),["e-editedbatchcell","e-updatedtd"]),this.parent.grid.focusModule.restoreFocus(),v({value:e.rowData,action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,e.columnName);var a={type:"save",column:this.parent.getColumnByField(e.columnName),data:e.rowData,previousData:e.previousValue,row:r,target:e.cell};this.parent.trigger("actionComplete",a)}}},e.prototype.blazorTemplates=function(e){if(t.isBlazor()&&this.parent.isServerRendered)for(var r=this.parent.grid.getColumns(),i=this.parent.grid.columnModel,n=0;n<r.length;n++){if(i[n].template){var o=this.parent.grid.element.id+r[n].uid;i[n].getColumnTemplate()(t.extend({index:[n]},e.rowData),this.parent.grid,"template",o,this.parent.grid.isStringTemplate,null)}r[n].editTemplate&&t.updateBlazorTemplate(this.parent.grid.element.id+r[n].uid+"editTemplate","EditTemplate",r[n]),r[n].template&&t.updateBlazorTemplate(this.parent.grid.element.id+r[n].uid,"Template",r[n],!1)}},e.prototype.updateCell=function(e,t){this.parent.grid.editModule.updateRow(t,e.rowData),this.parent.grid.getRowsObject()[t].data=e.rowData},e.prototype.crudAction=function(e,r){v(e,this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,r,this.addRowRecord),this.parent.parentData=[];for(var i=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,n=0;n<i.length;n++){i[n].index=n;var a=this.parent.grid.getPrimaryKeyFieldNames()[0];e.value[a]===i[n][a]&&"add"===e.action&&(i[n].level=this.internalProperties.level,i[n].taskData=this.internalProperties.taskData,i[n].uniqueID=this.internalProperties.uniqueID,t.isNullOrUndefined(this.internalProperties.parentItem)||(i[n].parentItem=this.internalProperties.parentItem,i[n].parentUniqueID=this.internalProperties.parentUniqueID),i[n].childRecords=this.internalProperties.childRecords),t.setValue("uniqueIDCollection."+i[n].uniqueID+".index",n,this.parent),i[n].level||this.parent.parentData.push(i[n])}"add"===e.action&&null!=this.previousNewRowPosition&&(this.parent.setProperties({editSettings:{newRowPosition:this.previousNewRowPosition}},!0),this.previousNewRowPosition=null)},e.prototype.updateIndex=function(e,r,i){for(var n=0;n<this.parent.getDataRows().length;n++){var o=i[n],a=t.getValue("uniqueIDCollection."+o.uniqueID+".index",this.parent);if(o.index=a,!t.isNullOrUndefined(o.parentItem)){var s=t.getValue("uniqueIDCollection."+o.parentItem.uniqueID+".index",this.parent);o.parentItem.index=s}}for(var d=-1,l=0;l<this.parent.getRows().length;l++){r[l].classList.contains("e-detailrow")||d++;var p=i[d],h=(a=p.index,p.level),c=r[l];t.isNullOrUndefined(p.parentItem)||(a=t.getValue("uniqueIDCollection."+p.parentItem.uniqueID+".index",this.parent));for(var u=c.cells[this.parent.treeColumnIndex],g=0;g<u.classList.length;g++){var f=u.classList[g],y=f.match(/e-gridrowindex/i),m=f.match(/e-griddetailrowindex/i);null!=y&&t.removeClass([u],f),null!=m&&t.removeClass([u],f)}r[l].classList.contains("e-detailrow")?t.addClass([u],"e-griddetailrowindex"+a+"level"+h):t.addClass([u],"e-gridrowindex"+a+"level"+h)}},e.prototype.beginAdd=function(e){var r,i=this.addRowIndex,n=this.parent.grid.getCurrentViewRecords();"Batch"===this.parent.editSettings.mode&&(i=this.batchEditModule.getAddRowIndex(),this.selectedIndex=this.batchEditModule.getSelectedIndex(),(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(n=this.batchEditModule.getBatchRecords()));var o,a=this.parent.grid.getDataRows();if((this.parent.frozenRows||this.parent.getFrozenColumns())&&(o=this.parent.getMovableDataRows()),"Dialog"!==this.parent.editSettings.mode&&("Above"===this.parent.editSettings.newRowPosition?r="before":("Below"===this.parent.editSettings.newRowPosition||"Child"===this.parent.editSettings.newRowPosition)&&this.selectedIndex>-1&&(r="after",n[i].expanded&&("Batch"===this.parent.editSettings.mode&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)?(i+=u(n[i]).length,"Child"!==this.parent.editSettings.newRowPosition&&(i+=this.batchEditModule.getBatchChildCount())):i+=u(n[i]).length)),this.selectedIndex>-1&&(i||"Child"===this.parent.editSettings.newRowPosition||"Below"===this.parent.editSettings.newRowPosition))){i>=a.length&&(i=a.length-2);var s=document.activeElement;if(a[i+1][r](a[0]),t.setValue("batchIndex",i+1,this.batchEditModule),(this.parent.frozenRows||this.parent.getFrozenColumns())&&(o[i+1][r](o[0]),t.setValue("batchIndex",i+1,this.batchEditModule)),"Row"===this.parent.editSettings.mode||"Cell"===this.parent.editSettings.mode){for(var d=this.parent.grid.getContentTable().querySelectorAll(".e-griderror"),l=0;l<d.length;l++)d[l].remove();t.setValue("errorRules",[],this.parent.grid.editModule.formObj)}s.focus()}},e.prototype.beginEdit=function(e){if("refresh"===e.requestType&&this.isOnBatch)e.cancel=!0;else if("Cell"!==this.parent.editSettings.mode||"beginEdit"!==e.requestType){if(this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")||this.doubleClickTarget.classList.contains("e-frame")))return e.cancel=!0,void(this.doubleClickTarget=null);if("delete"===e.requestType)for(var t=e.data,r=0;r<t.length;r++){this.deleteUniqueID(t[r].uniqueID);for(var i=u(t[r]),n=0;n<i.length;n++)this.deleteUniqueID(i[n].uniqueID);e.data=t.concat(i)}"add"===e.requestType&&(this.selectedIndex=this.parent.grid.selectedRowIndex,this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0,this.addRowRecord=this.parent.getSelectedRecords()[0]),e=this.beginAddEdit(e)}else e.cancel=!0},e.prototype.savePreviousRowPosition=function(e){null===this.previousNewRowPosition&&(this.previousNewRowPosition=this.parent.editSettings.newRowPosition)},e.prototype.beginAddEdit=function(e){var i=e.data;if("add"===e.action){var n=this.parent.grid.getPrimaryKeyFieldNames()[0],a=null;i.taskData=t.isNullOrUndefined(i.taskData)?t.extend({},e.data):i.taskData;var s=this.parent.grid.getCurrentViewRecords(),d=this.addRowIndex;i.uniqueID=r.getUid(this.parent.element.id+"_data_"),t.setValue("uniqueIDCollection."+i.uniqueID,i,this.parent);var l=void 0,p=void 0,h=void 0,c=void 0,g=void 0;if(s.length&&(l=s[this.addRowIndex].level,s[this.addRowIndex].index,p=s[this.addRowIndex][this.parent.idMapping],g=s[this.addRowIndex][this.parent.parentIdMapping],s[this.addRowIndex].parentItem&&(h=s[this.addRowIndex].parentItem.uniqueID),c=s[this.addRowIndex].parentItem),"Top"!==this.parent.editSettings.newRowPosition&&s.length){if("Above"===this.parent.editSettings.newRowPosition)a="before",d=s[this.addRowIndex].index;else if("Below"===this.parent.editSettings.newRowPosition){a="after";var f=u(s[this.addRowIndex]).length,y=s[this.addRowIndex].index;d=f>0?y+f:y}else if("Child"===this.parent.editSettings.newRowPosition){a="after",this.selectedIndex>-1&&(i.parentItem=t.extend({},s[this.addRowIndex]),i.parentUniqueID=i.parentItem.uniqueID,delete i.parentItem.childRecords,delete i.parentItem[this.parent.childMapping]);var v=u(s[this.addRowIndex]).length,w=s[this.addRowIndex].index;d=v>0?w+v:w,i.level=l+1,this.isSelfReference&&(i.taskData[this.parent.parentIdMapping]=i[this.parent.parentIdMapping]=p,t.isNullOrUndefined(i.parentItem)||C(n,i.parentItem,"add",this.parent,this.isSelfReference,i))}if("Above"!==this.parent.editSettings.newRowPosition&&"Below"!==this.parent.editSettings.newRowPosition||(this.selectedIndex>-1&&l&&(i.parentUniqueID=h,i.parentItem=t.extend({},c),delete i.parentItem.childRecords,delete i.parentItem[this.parent.childMapping]),i.level=l,this.isSelfReference&&(i.taskData[this.parent.parentIdMapping]=i[this.parent.parentIdMapping]=g,t.isNullOrUndefined(i.parentItem)||C(n,i.parentItem,"add",this.parent,this.isSelfReference,i))),null!=a&&this.selectedIndex>-1&&(e.index="before"===a?d:d+1),"Bottom"===this.parent.editSettings.newRowPosition){var R=this.parent.grid.dataSource instanceof o.DataManager?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource;e.index=R.length}}t.isNullOrUndefined(i.level)&&(i.level=l),i.hasChildRecords=!1,i.childRecords=[],i.index=0}if("add"===e.action&&(this.internalProperties={level:i.level,parentItem:i.parentItem,uniqueID:i.uniqueID,taskData:i.taskData,parentUniqueID:t.isNullOrUndefined(i.parentItem)?void 0:i.parentItem.uniqueID,childRecords:i.childRecords}),"delete"===e.requestType)for(var x=e.data,S=0;S<x.length;S++)if(x[S].parentItem&&(c=m(this.parent,x[S].parentItem.uniqueID),!t.isNullOrUndefined(c)&&c.hasChildRecords)){var b=c.childRecords.indexOf(x[S]);c.childRecords.splice(b,1)}return e},e.prototype.addRecord=function(e,t,r){this.previousNewRowPosition=this.parent.editSettings.newRowPosition,e?(t>-1?(this.selectedIndex=t,this.addRowIndex=t):(this.selectedIndex=this.parent.selectedRowIndex,this.addRowIndex=this.parent.selectedRowIndex),r&&this.parent.setProperties({editSettings:{newRowPosition:r}},!0),this.parent.grid.editModule.addRecord(e,t)):this.parent.grid.editModule.addRecord(e,t)},e.prototype.editFormValidate=function(){return this.parent.grid.editModule.editFormValidate()},e.prototype.destroyForm=function(){this.parent.grid.editModule.destroyForm()},e.prototype.contentready=function(e){t.isNullOrUndefined(e.args.requestType)||"delete"!==e.args.requestType.toString()&&"save"!==e.args.requestType.toString()&&("Batch"!==this.parent.editSettings.mode||"batchsave"!==e.args.requestType.toString())||(this.updateIndex(this.parent.grid.dataSource,this.parent.getRows(),this.parent.getCurrentViewRecords()),(this.parent.frozenRows||this.parent.getFrozenColumns())&&this.updateIndex(this.parent.grid.dataSource,this.parent.getMovableDataRows(),this.parent.getCurrentViewRecords()))},e.prototype.editCell=function(e,t){"Cell"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode||("Batch"!==this.parent.editSettings.mode&&(this.isOnBatch=!0,this.updateGridEditMode("Batch")),this.parent.grid.editModule.editCell(e,t))},e}(),Ue=function(){function e(e){r.Grid.Inject(r.CommandColumn),this.parent=e}return e.prototype.getModuleName=function(){return"commandColumn"},e.prototype.destroy=function(){},e}(),Te=function(){function e(e){r.Grid.Inject(r.DetailRow),this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"detailRow"},e.prototype.addEventListener=function(){this.parent.on("dataBoundArg",this.dataBoundArg,this),this.parent.on("detaildataBound",this.detaildataBound,this),this.parent.grid.on("detail-indentcell-info",this.setIndentVisibility,this),this.parent.on("childRowExpand",this.childRowExpand,this),this.parent.on("rowExpandCollapse",this.rowExpandCollapse,this),this.parent.on("actioncomplete",this.actioncomplete,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("dataBoundArg",this.dataBoundArg),this.parent.off("detaildataBound",this.detaildataBound),this.parent.off("childRowExpand",this.childRowExpand),this.parent.off("rowExpandCollapse",this.rowExpandCollapse),this.parent.off("actioncomplete",this.actioncomplete),this.parent.grid.off("detail-indentcell-info",this.setIndentVisibility))},e.prototype.setIndentVisibility=function(e){e.visible=!1},e.prototype.dataBoundArg=function(){for(var e=this.parent.getRows().filter((function(e){return!e.classList.contains("e-detailrow")})),i=0;i<e.length;i++){var n=e[i].getElementsByClassName("e-detailrowcollapse"),o=this.parent.grid.getRowObjectFromUID(e[i].getAttribute("data-Uid")),a=r.getObject("parentItem",this.parent.grid.getCurrentViewRecords()[i]);(t.isNullOrUndefined(a)||!t.isNullOrUndefined(a)&&c(this.parent,o.data,this.parent.grid.getCurrentViewRecords()))&&this.parent.grid.detailRowModule.expand(n[0])}},e.prototype.childRowExpand=function(e){var r=e.row.getElementsByClassName("e-detailrowcollapse");t.isNullOrUndefined(r[0])||this.parent.grid.detailRowModule.expand(r[0])},e.prototype.rowExpandCollapse=function(e){if(!s(this.parent))for(var t=0;t<e.detailrows.length;t++)e.detailrows[t].style.display=e.action},e.prototype.detaildataBound=function(e){if(!t.isBlazor()||!this.parent.isServerRendered){var r=e.data,i=e.detailElement.parentElement.previousSibling,n="e-gridrowindex"+(t.isNullOrUndefined(r.parentItem)?r.index:r.parentItem.index)+"level"+r.level,o=i.querySelector("."+n).classList,a=[].slice.call(o).filter((function(e){return e===n})),s=a[0].length,d="e-griddetail"+a.toString().slice(6,s);t.addClass([e.detailElement.parentElement],d)}},e.prototype.actioncomplete=function(e){if("beginEdit"===e.requestType||"add"===e.requestType){var t=e.row.querySelectorAll(".e-editcell")[0].getAttribute("colSpan"),i=(parseInt(t,10)-1).toString();e.row.querySelectorAll(".e-editcell")[0].setAttribute("colSpan",i)}for(var n=this.parent.grid.contentModule.getRows(),o=0;o<n.length;o++)n[o].cells[0].visible=!1;r.getObject("focusModule",this.parent.grid).refreshMatrix(!0)({rows:this.parent.grid.contentModule.getRows()})},e.prototype.destroy=function(){this.removeEventListener()},e}(),Le=(W=function(e,t){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ve=function(e){function r(t,r){var i=e.call(this,t,r)||this;return i.isExpandCollapse=!1,i.translateY=0,i.maxiPage=0,i.startIndex=-1,i.endIndex=-1,i.preTranslate=0,i.isRemoteExpand=!1,i.addEventListener(),i}return Le(r,e),r.prototype.getModelGenerator=function(){return new be(this.parent)},r.prototype.getRowByIndex=function(e){return this.parent.getDataRows().filter((function(t){return parseInt(t.getAttribute("aria-rowindex"),0)===e}))[0]},r.prototype.addEventListener=function(){this.parent.on("virtual-action-args",this.virtualOtherAction,this),this.parent.on("index-modifier",this.indexModifier,this)},r.prototype.virtualOtherAction=function(e){e.setTop?(this.translateY=0,this.startIndex=0,this.endIndex=this.parent.pageSettings.pageSize-1):e.isExpandCollapse&&(this.isExpandCollapse=!0)},r.prototype.indexModifier=function(e){e.startIndex=this.startIndex,e.endIndex=this.endIndex},r.prototype.eventListener=function(t){var r=this;this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url?e.prototype.eventListener.call(this,"on"):(this.parent[t]("data-ready",this.onDataReady,this),this.fn=function(){r.observers.observes((function(e){return r.scrollListeners(e)})),r.parent.off("content-ready",r.fn)},this.parent.on("content-ready",this.fn,this))},r.prototype.onDataReady=function(r){e.prototype.onDataReady.call(this,r),this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url||(t.isNullOrUndefined(r.count)||(this.totalRecords=r.count,t.getValue("virtualEle",this).setVirtualHeight(this.parent.getRowHeight()*r.count,"100%")),t.isNullOrUndefined(r.requestType)||"collapseAll"!==r.requestType.toString()||(this.contents.scrollTop=0))},r.prototype.renderTable=function(){e.prototype.renderTable.call(this),this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url||(t.getValue("observer",this).options.debounceEvent=!1,this.observers=new je(this.parent,t.getValue("observer",this).element,t.getValue("observer",this).options),this.contents=this.getPanel().firstChild)},r.prototype.getTranslateY=function(t,r,i,n){return this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url?this.isRemoteExpand?(this.isRemoteExpand=!1,this.preTranslate):(this.preTranslate=e.prototype.getTranslateY.call(this,t,r,i,n),e.prototype.getTranslateY.call(this,t,r,i,n)):e.prototype.getTranslateY.call(this,t,r,i,n)},r.prototype.scrollListeners=function(e){var r=e.sentinel,i=this.parent.getContent().querySelector(".e-content"),n=10*this.parent.getRowHeight(),o=e.offset.top-this.translateY<0,a=e.offset.top-this.translateY>n;if(o){var s=+(this.parent.height.toString().indexOf("%")<0?this.parent.height:this.parent.element.getBoundingClientRect().height),d=~~(i.scrollTop/this.parent.getRowHeight())+Math.ceil(s/this.parent.getRowHeight())-this.parent.getRows().length;if(d=d>0?d:0,this.startIndex=d,this.endIndex=d+this.parent.getRows().length,this.endIndex>this.totalRecords){var l=this.totalRecords-1,p=this.endIndex%l;this.endIndex=l,this.startIndex=this.startIndex-p}var h=Math.ceil(e.offset.top/this.parent.getRowHeight());h%=this.parent.pageSettings.pageSize;var c=0;if(t.isNullOrUndefined(this.parent.getRows()[h])||(c=+this.parent.getContent().querySelectorAll(".e-content tr")[h].querySelector("td").getAttribute("index")),0===c)this.translateY=e.offset.top;else{var u=this.parent.getRowHeight();this.translateY=e.offset.top-10*u>0?e.offset.top-10*u+10:0}}else if(a){var g=~~(i.scrollTop/this.parent.getRowHeight()),f=g+this.parent.getRows().length;f>this.totalRecords&&(f=g+(this.totalRecords-g)),this.startIndex=f-this.parent.getRows().length,this.endIndex=f,this.translateY=e.offset.top}if(a&&e.offset.top<this.parent.getRowHeight()*this.totalRecords||o){var y=t.getValue("getInfoFromView",this).apply(this,[e.direction,r,e.offset]);this.parent.notify(y.event,{requestType:"virtualscroll",focusElement:e.focusElement})}},r.prototype.appendContent=function(r,i,n){if(this.parent.dataSource instanceof o.DataManager&&void 0!==this.parent.dataSource.dataSource.url&&""!==this.parent.dataSource.dataSource.url)t.getValue("isExpandCollapse",n)&&(this.isRemoteExpand=!0),e.prototype.appendContent.call(this,r,i,n);else{var a=n.virtualInfo.sentinelInfo&&"Y"===n.virtualInfo.sentinelInfo.axis&&t.getValue("currentInfo",this).page&&t.getValue("currentInfo",this).page!==n.virtualInfo.page?t.getValue("currentInfo",this):n.virtualInfo,s=a.columnIndexes[0]-1,d=this.getColumnOffset(s);(r=this.parent.createElement("tbody")).appendChild(i),this.getTable().querySelector("tbody").replaceWith(r),this.isExpandCollapse&&0!==this.translateY?this.isExpandCollapse=!1:t.getValue("virtualEle",this).adjustTable(d,this.translateY),t.setValue("prevInfo",a,this)}},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("data-ready",this.onDataReady),this.parent.off("content-ready",this.fn),this.parent.off("virtual-action-args",this.virtualOtherAction),this.parent.off("index-modifier",this.indexModifier))},r}(r.VirtualContentRenderer),je=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.isWheeling=!1,t.newPos=0,t.lastPos=0,t.timer=0,t}return Le(r,e),r.prototype.observes=function(e){t.setValue("containerRect",t.getValue("options",this).container.getBoundingClientRect(),this),t.EventHandler.add(t.getValue("options",this).container,"scroll",this.virtualScrollHandlers(e),this)},r.prototype.clear=function(){this.lastPos=null},r.prototype.virtualScrollHandlers=function(e){var r=this,i=0,n=0;return function(o){var a=o.target.scrollTop,s=o.target.scrollLeft,d=i<a?"down":"up";d=n===s?d:n<s?"right":"left",i=a,n=s;var l=t.getValue("sentinelInfo",r)[d],p=0;r.newPos=a,null!=r.lastPos&&(p=r.newPos-r.lastPos),r.lastPos=r.newPos,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.clear,0),(p>100||p<-100)&&o&&o.preventDefault&&(o.returnValue=!1,o.preventDefault()),e({direction:d,isWheel:r.isWheeling,sentinel:l,offset:{top:a,left:s},focusElement:document.activeElement})}},r}(r.InterSectionObserver),Fe=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_e=function(){function e(e){this.prevstartIndex=-1,this.prevendIndex=-1,this.parent=e,r.Grid.Inject(ze),this.addEventListener()}return e.prototype.returnVisualData=function(e){e.data=this.visualData},e.prototype.getModuleName=function(){return"virtualScroll"},e.prototype.addEventListener=function(){this.parent.on("localPagedExpandCollapse",this.collapseExpandVirtualchilds,this),this.parent.on("pagingActions",this.virtualPageAction,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("localPagedExpandCollapse",this.collapseExpandVirtualchilds),this.parent.off("pagingActions",this.virtualPageAction))},e.prototype.collapseExpandVirtualchilds=function(e){this.parent.grid.notify("virtual-action-args",{isExpandCollapse:!0}),this.expandCollapseRec=e.record,e.record.expanded="collapse"!==e.action;var r={result:this.parent.flatData,row:e.row,action:e.action,record:e.record,count:this.parent.flatData.length},i=t.getValue("isCollapseAll",this.parent)?"collapseAll":"refresh";t.getValue("grid.renderModule",this.parent).dataManagerSuccess(r,{requestType:i})},e.prototype.virtualPageAction=function(e){var r=this,i=new o.DataManager(e.result),n=new o.Predicate("expanded","notequal",null).or("expanded","notequal",void 0),a=i.executeLocal((new o.Query).where(n)),s=a.filter((function(e){return c(r.parent,e,a)}));this.visualData=s,this.parent.grid.notify("data-listener",{data:s});var d={startIndex:-1,endIndex:-1};this.parent.grid.notify("index-modifier",d);var l=d.startIndex,p=d.endIndex;if(e.count=s.length,-1===l&&-1===p){var h=new o.Query,u=this.parent.grid.pageSettings.pageSize,g=u*(this.parent.grid.pageSettings.currentPage-1);h=h.skip(g).take(u),i.dataSource.json=s,e.result=i.executeLocal(h)}else{if("filtering"===e.actionArgs.requestType&&(l=0,p=this.parent.grid.pageSettings.pageSize-1,this.parent.grid.notify("virtual-action-args",{setTop:!0})),!t.isNullOrUndefined(this.expandCollapseRec)){var f=this.parent.getRows(),y=s.indexOf(this.expandCollapseRec);s.slice(y,y+f.length).length<f.length&&y>=0?(l=y=(y=s.length-f.length)>0?y:0,p=s.length):t.getValue("isCollapseAll",this.parent)&&(l=0,p=this.parent.grid.pageSettings.pageSize-1,this.parent.grid.notify("virtual-action-args",{setTop:!0})),this.expandCollapseRec=null}e.result=s.slice(l,p),this.prevstartIndex=l,this.prevendIndex=p}this.parent.notify("updateAction",e)},e.prototype.destroy=function(){this.removeEventListener()},e}(),ze=function(e){function i(r,i){var n=e.call(this,r,i)||this;return t.getValue("parent",n).off("initial-load",t.getValue("instantiateRenderer",n),n),t.getValue("parent",n).on("initial-load",n.instantiateRenderers,n),n}return Fe(i,e),i.prototype.instantiateRenderers=function(){t.getValue("parent",this).log(["limitation","virtual_height"],"virtualization");var e=t.getValue("locator",this).getService("rendererFactory");t.getValue("addRenderer",e).apply(e,[r.RenderType.Content,new Ve(t.getValue("parent",this),t.getValue("locator",this))]),this.ensurePageSize()},i.prototype.ensurePageSize=function(){var e=t.getValue("parent",this),r=e.getRowHeight();t.isNullOrUndefined(e.height)||"string"!=typeof e.height||-1===e.height.indexOf("%")||(e.element.style.height=e.height);var i=2*~~((e.height.toString().indexOf("%")<0?e.height:e.element.getBoundingClientRect().height)/r),n=e.pageSettings.pageSize;e.setProperties({pageSettings:{pageSize:n<i?i:n}},!0)},i}(r.VirtualScroll),Ge=function(){function e(e){r.Grid.Inject(r.Freeze),this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("rowExpandCollapse",this.rowExpandCollapse,this),this.parent.on("dataBoundArg",this.dataBoundArg,this),this.parent.grid.on("dblclick",this.dblClickHandler,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("rowExpandCollapse",this.rowExpandCollapse),this.parent.off("dataBoundArg",this.dataBoundArg),this.parent.grid.off("dblclick",this.dblClickHandler))},e.prototype.rowExpandCollapse=function(e){var t,r=this.parent.getMovableDataRows(),i=this.parent.getRows();t=e.detailrows.length?e.detailrows:r.filter((function(t){return t.querySelector(".e-gridrowindex"+e.record.index+"level"+(e.record.level+1))}));for(var n=0;n<t.length;n++){var o=this.parent.grid.getRowObjectFromUID(t[n].getAttribute("data-Uid")).data;t[n].style.display=e.action;var a="none"===e.action?".e-treecolumn-container .e-treegridcollapse":".e-treecolumn-container .e-treegridexpand";if(i[t[n].rowIndex].querySelector(a)){for(var s=[],d=0;d<r.length;d++)r[d].querySelector(".e-gridrowindex"+o.index+"level"+(o.level+1))&&s.push(r[d]);s.length&&this.rowExpandCollapse({detailrows:s,action:e.action})}}},e.prototype.dblClickHandler=function(e){r.parentsUntil(e.target,"e-rowcell")&&this.parent.grid.editSettings.allowEditOnDblClick&&"Cell"!==this.parent.editSettings.mode&&this.parent.grid.editModule.startEdit(r.parentsUntil(e.target,"e-row"))},e.prototype.dataBoundArg=function(e){this.parent.getColumns().filter((function(e){return e.showCheckbox})).length&&this.parent.freezeModule&&this.parent.initialRender&&t.addClass([this.parent.element.getElementsByClassName("e-grid")[0]],"e-checkselection")},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"freeze"},e}();return me.Inject(Ie,Pe,Ae,ve,Oe,Ee,we,ke,De,Me,Ue,qe,Ne,U,_e,Te,Re,Ge),e.TreeGrid=me,e.load="load",e.rowDataBound="rowDataBound",e.dataBound="dataBound",e.queryCellInfo="queryCellInfo",e.beforeDataBound="beforeDataBound",e.actionBegin="actionBegin",e.dataStateChange="dataStateChange",e.actionComplete="actionComplete",e.rowSelecting="rowSelecting",e.rowSelected="rowSelected",e.checkboxChange="checkboxChange",e.rowDeselected="rowDeselected",e.toolbarClick="toolbarClick",e.beforeExcelExport="beforeExcelExport",e.beforePdfExport="beforePdfExport",e.resizeStop="resizeStop",e.expanded="expanded",e.expanding="expanding",e.collapsed="collapsed",e.collapsing="collapsing",e.remoteExpand="remoteExpand",e.localPagedExpandCollapse="localPagedExpandCollapse",e.pagingActions="pagingActions",e.printGridInit="printGrid-Init",e.contextMenuOpen="contextMenuOpen",e.contextMenuClick="contextMenuClick",e.beforeCopy="beforeCopy",e.beforePaste="beforePaste",e.savePreviousRowPosition="savePreviousRowPosition",e.crudAction="crudAction",e.beginEdit="beginEdit",e.beginAdd="beginAdd",e.recordDoubleClick="recordDoubleClick",e.cellSave="cellSave",e.cellSaved="cellSaved",e.cellEdit="cellEdit",e.batchDelete="batchDelete",e.batchCancel="batchCancel",e.batchAdd="batchAdd",e.beforeBatchDelete="beforeBatchDelete",e.beforeBatchAdd="beforeBatchAdd",e.beforeBatchSave="beforeBatchSave",e.batchSave="batchSave",e.keyPressed="key-pressed",e.updateData="update-data",e.doubleTap="double-tap",e.virtualColumnIndex="virtualColumnIndex",e.virtualActionArgs="virtual-action-args",e.dataListener="data-listener",e.indexModifier="index-modifier",e.beforeStartEdit="edit-form",e.beforeBatchCancel="before-batch-cancel",e.batchEditFormRendered="batcheditform-rendered",e.detailDataBound="detailDataBound",e.rowDrag="rowDrag",e.rowDragStartHelper="rowDragStartHelper",e.rowDrop="rowDrop",e.rowDragStart="rowDragStart",e.rowsAdd="rows-add",e.rowsRemove="rows-remove",e.rowdraging="row-draging",e.rowDropped="row-dropped",e.DataManipulation=H,e.Reorder=ve,e.Resize=we,e.RowDD=Re,e.Column=M,e.EditSettings=pe,e.Predicate=E,e.FilterSettings=A,e.PageSettings=ie,e.SearchSettings=j,e.SelectionSettings=z,e.AggregateColumn=ae,e.AggregateRow=se,e.SortDescriptor=ue,e.SortSettings=ge,e.RowDropSettings=xe,e.Render=G,e.TreeVirtualRowModelGenerator=be,e.isRemoteData=s,e.isCountRequired=d,e.isCheckboxcolumn=l,e.isFilterChildHierarchy=p,e.findParentRecords=h,e.getExpandStatus=c,e.findChildrenRecords=u,e.isOffline=g,e.extendArray=f,e.getPlainData=y,e.getParentData=m,e.Filter=Ie,e.ExcelExport=De,e.PdfExport=Me,e.Page=Pe,e.Toolbar=Oe,e.Aggregate=Ee,e.Sort=Ae,e.TreeClipboard=N,e.ColumnMenu=ke,e.ContextMenu=qe,e.Edit=Ne,e.CommandColumn=Ue,e.Selection=U,e.DetailRow=Te,e.VirtualScroll=_e,e.TreeVirtual=ze,e.Freeze=Ge,e};window.checkDependencies(["base","grids","buttons","data","popups"],(function(){sf.treegrid=sf.treegrid({},sf.base,sf.grids,sf.buttons,sf.data,sf.popups)}))}}]);